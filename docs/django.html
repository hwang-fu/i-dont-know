<!-- * * * * * * * * * * * * * * -->
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>django</title>

    <!-- Theme (pick any from Prism site) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css">

    <!-- Prism core + Lisp language -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"
            data-prismjs-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs/components/"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>

<style>
    html {
        scroll-behavior: smooth;
    }

    .back-to-top {
        position: fixed;
        right: 20px;
        bottom: 20px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #333;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        font-size: 22px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        opacity: 0.75;
        transition: opacity 0.2s ease, transform 0.2s ease;
        z-index: 999;
    }

    .back-to-top:hover {
        opacity: 1;
        transform: translateY(-2px);
    }

    .nav-icon {
        width: 48px;
        height: 48px;
        object-fit: contain;
        vertical-align: middle;
        margin-left: 0.3rem;
    }

    table {
        border-collapse: collapse;      /* merge borders so you don't get double lines */
        width: 100%;                    /* optional: make it full width */
        font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", serif;
        font-size: 14px;
    }

    th {
        background-color: #f5f5f5;      /* light gray header background */
        text-align: left;               /* header text alignment */
        font-weight: 600;
    }

    th, td {
        border: 1px solid #ddd;         /* subtle border color */
        padding: 8px 12px;              /* breathing room */
    }

    tr:nth-child(even) {
        background-color: #fafafa;      /* zebra striping for readability */
    }

    tr:hover {
        background-color: #f0f8ff;      /* light hover highlight */
    }

    .comment {
        color: grey;
    }

    .token.keyword {
        font-weight: 500;
    }

    .red-underline {
        text-decoration-line: underline;
        text-decoration-color: red;
        text-decoration-thickness: 2px; /* optional: make it a bit thicker */
        text-underline-offset: 2px;     /* optional: move it slightly down */
    }

    body {
        font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", serif;
        font-variant-ligatures: none;
    }

    ul > li {
        list-style-type: disc;
    }

    code {
        color: #24292e;
        background-color: #f6f8fa;
        border: 1px solid #d0d7de;          /* subtle frame */
        border-radius: .375rem;
        padding: .15rem .35rem;
        font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.875rem;                /* 14px-ish; avoid bare numbers */
        line-height: 1.4;
    }

    /* Block code container */
    pre {
        margin: 1rem 0;
        padding: .8rem 1rem;
        background-color: #f6f8fa;       /* match inline bg */
        border: 1px solid #d0d7de;
        border-radius: .5rem;
        overflow: auto;                   /* scroll if long */
        tab-size: 4;                      /* adjust as needed */
    }

    /* Code inside pre: remove extra padding/background from inline style */
    pre code {
        display: block;                   /* ensure full-width */
        padding: 0;                       /* pre handles padding */
        background: transparent;          /* avoid double bg */
        border: 0;                        /* avoid double border */
        color: #24292e;
        font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.875rem;
        line-height: 1.5;
        white-space: pre;                 /* preserve spacing; use pre-wrap to wrap long lines */
    }
</style>
</head>
<!-- * * * * * * * * * * * * * * -->
<body>
<a href="#" class="back-to-top" aria-label="Back to top">
    &#8593;
</a>
<!-- * * * * * * * * * * * * * * -->


<!-- * * * * * * * * * * * * * * -->
<hr/>
<nav id="toc" style="margin-bottom: 2rem;">
    <h2> <img src="resources/django.png" alt="Logo" class="nav-icon"/> Documentation Index</h2>
    <ul style="line-height: 1.8;">
        <li><a href="#django-intro">Introduction</a></li>
        <li><a href="#django-project-vs-app">Project vs App</a></li>
        <li><a href="#django-manage-py"><code>manage.py</code></a></li>
        <li><a href="#django-settings-basic">Basic Settings</a></li>
        <li><a href="#django-urls-py"><code>urls.py</code></a></li>
        <li><a href="#django-wsgi-py"><code>wsgi.py</code></a></li>
        <li><a href="#django-asgi-py"><code>asgi.py</code></a></li>
        <li><a href="#django-file-structure">File Structures</a></li>
        <li><a href="#django-models">Models</a></li>
        <li><a href="#django-orm">Object–Relational Mapper (ORM)</a></li>
        <li><a href="#django-model-queries">Models Making Queries</a></li>
        <li><a href="#django-model-aggregation">Models Aggregation</a></li>
        <li><a href="#django-model-research">Models Research</a></li>
        <li><a href="#django-model-managers">Models Managers</a></li>
        <li><a href="#django-raw-sql">Performaing Raw SQL Queries</a></li>
        <li><a href="#django-transactions">Database Transactions in Django</a></li>
        <li><a href="#django-multiple-databases">Using Multiple Databases</a></li>
        <li><a href="#django-settings-databse">Understanding the <code>DATABASES</code> Setting</a></li>
        <li><a href="#django-models-model">Understanding the <code>models.Model</code></a></li>
        <li><a href="#django-models-meta">Understanding the <code>class Meta</code> Options in Django <code>models.Model</code></a></li>
    </ul>
</nav>
<hr/>
<!-- * * * * * * * * * * * * * * -->


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-intro">Introduction to Django</h3>
<ol>

    <li><b>What Is Django?</b></li>
    <br/>
    <ul>
        <li>Django is a high-level <code>Python</code> <u>web framework</u> designed for productivity and clean architecture.</li>
        <br/>
        <li>Its key philosophy is <u>batteries included</u>:
            <ul>
                <li>ORM (database abstraction)</li>
                <li>Admin interface</li>
                <li>Authentication &amp; authorization</li>
                <li>Routing</li>
                <li>Templating</li>
                <li>Session &amp; cookie management</li>
                <li>Security middleware</li>
            </ul>
        </li>
        <br/>
        <li>It follows the <b>MVT</b> pattern (Model–View–Template).</li>
    </ul>
    <br/><br/>


    <li><b>MVT Architecture (Model–View–Template)</b></li>
    <br/>
    <ul>
        <li>Django’s architecture is similar to MVC, but naming differs slightly:</li>
        <br/>
    </ul>

    <table>
        <thead>
            <tr>
                <th>Django Term</th>
                <th>Role</th>
                <th>Equivalent in MVC</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>Model</code></td>
                <td>Data representation and database interaction</td>
                <td>Model</td>
            </tr>
            <tr>
                <td><code>View</code></td>
                <td>Business logic and request handling</td>
                <td>Controller</td>
            </tr>
            <tr>
                <td><code>Template</code></td>
                <td>HTML presentation layer</td>
                <td>View</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Installing Django</b></li>
    <br/>
    <ul>
        <li>You can install Django globally or inside a virtual environment.</li>
    </ul>

<pre><code class="language-bash line-numbers">pip install django
</code></pre>

    <ul>
        <li>Check version:</li>
    </ul>

<pre><code class="language-bash line-numbers">django-admin --version
</code></pre>

    <br/><br/>


    <li><b>Create a Django Project</b></li>
    <br/>
    <ul>
        <li>Use <code>django-admin</code> to scaffold a new project:</li>
    </ul>

<pre><code class="language-bash line-numbers">django-admin startproject mysite
cd mysite
</code></pre>

    <ul>
        <li>File structure:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    ├── asgi.py
    └── wsgi.py
</code></pre>

    <br/><br/>


    <li><b>Running the Development Server</b></li>
    <br/>
    <ul>
        <li>Start the built-in web server:</li>
    </ul>

<pre><code class="language-bash line-numbers">python manage.py runserver
</code></pre>

    <ul>
        <li>Your site is now available at <code>http://127.0.0.1:8000/</code>.</li>
    </ul>

    <br/><br/>


    <li><b>Create Your First App</b></li>
    <br/>
    <ul>
        <li>A Django “project” can contain multiple “apps”.</li>
        <li>Apps are modular components that encapsulate one feature.</li>
    </ul>

<pre><code class="language-bash line-numbers">python manage.py startapp blog
</code></pre>

    <ul>
        <li>App structure:</li>
    </ul>

<pre><code class="language-bash line-numbers">blog/
├── admin.py
├── apps.py
├── models.py
├── tests.py
├── views.py
└── migrations/
</code></pre>

    <br/><br/>


    <li><b>Defining a Model (Database Layer)</b></li>
    <br/>
    <ul>
        <li>Models represent database tables.</li>
        <li>Django automatically generates SQL from model definitions.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
</code></pre>

    <ul>
        <li>Create database tables:</li>
    </ul>

<pre><code class="language-bash line-numbers">python manage.py makemigrations
python manage.py migrate
</code></pre>

    <br/><br/>


    <li><b>Creating a View (Business Logic)</b></li>
    <br/>
    <ul>
        <li>A Django view handles incoming requests and returns a response.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.http import HttpResponse

def hello(request):
    return HttpResponse("Hello, Django!")
</code></pre>

    <br/><br/>


    <li><b>URL Routing</b></li>
    <br/>
    <ul>
        <li>You must map URLs to views.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path("hello/", views.hello),
]
</code></pre>

    <ul>
        <li>Include app routes in the project’s main URL config:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),
]
</code></pre>

    <br/><br/>


    <li><b>Django Template System</b></li>
    <br/>
    <ul>
        <li>Templates generate HTML dynamically.</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/home.html --&gt;
&lt;h1&gt;Welcome to My Blog&lt;/h1&gt;
&lt;p&gt;This is rendered from a Django template.&lt;/p&gt;
</code></pre>

    <ul>
        <li>Rendering the template from a view:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.shortcuts import render

def home(request):
    return render(request, "blog/home.html")
</code></pre>

    <br/><br/>


    <li><b>The Django Admin</b></li>
    <br/>
    <ul>
        <li>Django includes an auto-generated admin interface.</li>
        <li>Register your model:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/admin.py

from django.contrib import admin
from .models import Post

admin.site.register(Post)
</code></pre>

    <ul>
        <li>Create an admin account:</li>
    </ul>

<pre><code class="language-bash line-numbers">python manage.py createsuperuser
</code></pre>

    <ul>
        <li>Log in at <code>http://127.0.0.1:8000/admin/</code>.</li>
    </ul>

    <br/><br/>


    <li><b>Django ORM: Querying the Database</b></li>
    <br/>
    <ul>
        <li>You can interact with the database using Python objects instead of raw SQL.</li>
    </ul>

<pre><code class="language-py line-numbers">from blog.models import Post

# Create
Post.objects.create(title="Hello", body="Content here")

# Read
posts = Post.objects.all()

# Filter
latest = Post.objects.filter(title__icontains="hello")
</code></pre>

    <br/><br/>


    <li><b>Common Django Features (Built-In)</b></li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Feature</th>
                <th>Description</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Authentication</td>
                <td>User accounts, login, permissions</td>
                <td><code>from django.contrib.auth.models import User</code></td>
            </tr>
            <tr>
                <td>Admin</td>
                <td>Automatic admin site</td>
                <td><code>/admin/</code></td>
            </tr>
            <tr>
                <td>ORM</td>
                <td>Database abstraction</td>
                <td><code>Model.objects.filter(...)</code></td>
            </tr>
            <tr>
                <td>Templates</td>
                <td>HTML rendering system</td>
                <td><code>render(request, "home.html")</code></td>
            </tr>
            <tr>
                <td>Forms</td>
                <td>Built-in HTML form processing &amp; validation</td>
                <td><code>forms.Form</code></td>
            </tr>
            <tr>
                <td>Security Middleware</td>
                <td>CSRF, XSS protection, secure cookies</td>
                <td><code>django.middleware.csrf.CsrfViewMiddleware</code></td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li>Django is a full-featured web framework following the MVT pattern.</li>
        <li>It includes built-in tools for models, routing, admin, templates, and security.</li>
        <li>Projects consist of modular “apps”, each handling a separate feature.</li>
        <li>The ORM allows you to work with databases using Python classes.</li>
        <li>Django is ideal for fast development, enterprise apps, APIs, and dashboards.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-project-vs-app">Project vs App in Django</h3>
<ol>

    <li>Beginners are often confused by the difference between <b>Django Project</b> and <b>Django App</b></li>
    <br/><br/>


    <li><b>What Is a Django Project?</b></li>
    <br/>
    <ul>
        <li>A <b>Django project</b> is the <u>entire web application</u> that you are building.</li>
        <li>It contains:
            <ul>
                <li>global configuration</li>
                <li>settings</li>
                <li>URL routing</li>
                <li>WSGI/ASGI configuration</li>
                <li>one or many Django apps</li>
            </ul>
        </li>
        <li>You create a project using:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m django startproject mysite
</code></pre>

    <ul>
        <li>Project structure looks like this:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py      # Global Django settings (DEBUG, DB, middleware, etc.)
    ├── urls.py          # Root URL dispatcher
    ├── wsgi.py          # For production servers
    └── asgi.py          # For async servers
</code></pre>

    <ul>
        <li>The project is the container for your whole website.</li>
        <li>It does NOT contain business logic by itself — apps do.</li>
    </ul>
    <br/><br/>


    <li><b>What Is a Django App?</b></li>
    <br/>
    <ul>
        <li>A <b>Django app</b> is a <u>modular component</u> that provides one specific piece of functionality.</li>
        <li>Examples of apps:
            <ul>
                <li><code>blog</code></li>
                <li><code>users</code></li>
                <li><code>payments</code></li>
                <li><code>dashboard</code></li>
            </ul>
        </li>
        <li>You create an app using:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py startapp blog
</code></pre>

    <ul>
        <li>App structure looks like:</li>
    </ul>

<pre><code class="language-bash line-numbers">blog/
├── admin.py        # Admin interface setup
├── apps.py         # App configuration class
├── models.py       # Database models
├── views.py        # Request handlers (Controller logic)
├── tests.py        # Unit tests
└── migrations/     # Database migrations
</code></pre>

    <ul>
        <li>An app contains <u>actual features</u> of your site.</li>
        <li>A single project can contain many apps.</li>
        <li>You can reuse apps between projects.</li>
    </ul>
    <br/><br/>


    <li><b>Project vs App — Conceptual Difference</b></li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Aspect</th>
                <th>Django Project</th>
                <th>Django App</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Purpose</td>
                <td>Overall configuration and container</td>
                <td>Specific feature or module</td>
            </tr>
            <tr>
                <td>Number</td>
                <td>One per website</td>
                <td>Many per project</td>
            </tr>
            <tr>
                <td>Reusable?</td>
                <td>No</td>
                <td>Yes, apps can be placed on PyPI</td>
            </tr>
            <tr>
                <td>Created by</td>
                <td><code>startproject</code></td>
                <td><code>startapp</code></td>
            </tr>
            <tr>
                <td>Main Files</td>
                <td><code>settings.py</code>, <code>urls.py</code></td>
                <td><code>models.py</code>, <code>views.py</code>, <code>admin.py</code></td>
            </tr>
            <tr>
                <td>Scope</td>
                <td>Entire website</td>
                <td>Narrow, focused feature</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>When Should You Create a New App?</b></li>
    <br/>
    <ul>
        <li>Create a new app when you add a <u>new feature</u> that:
            <ul>
                <li>has its own set of models</li>
                <li>has its own views and logic</li>
                <li>could logically be reused elsewhere</li>
                <li>is independent of other parts of the project</li>
            </ul>
        </li>
    </ul>

    <ul>
        <li>Examples:</li>
        <ul>
            <li>Add authentication → create <code>accounts</code> app</li>
            <li>Add blog → create <code>blog</code> app</li>
            <li>Add payment system → create <code>payments</code> app</li>
        </ul>
    </ul>

    <ul>
        <li>Do NOT create an app for:</li>
        <ul>
            <li>small isolated functions</li>
            <li>just one template</li>
            <li>configuration-only changes</li>
        </ul>
    </ul>
    <br/><br/>


    <li><b>How an App Integrates Into a Project</b></li>
    <br/>
    <ul>
        <li>After creating an app, you must add it to <code>INSTALLED_APPS</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/settings.py

INSTALLED_APPS = [
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.sessions",
    "django.contrib.messages",
    "django.contrib.staticfiles",
    "blog",   # your new app
]
</code></pre>

    <ul>
        <li>This tells Django to load:
            <ul>
                <li>models</li>
                <li>migrations</li>
                <li>signals</li>
                <li>admin configuration</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Example: One Project, Multiple Apps</b></li>
    <br/>
    <ul>
        <li>A real-world project (e.g., Instagram clone) might contain:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── accounts/      # login, signup, profiles
├── posts/         # uploading + viewing posts
├── comments/      # comments on posts
├── notifications/ # user notifications
└── messages/      # direct messaging
</code></pre>

    <ul>
        <li>Each app focuses on a single, reusable part of the system.</li>
        <li>Apps communicate via imports and relationships.</li>
    </ul>

    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li>A <b>Django project</b> is the entire website — global configuration, settings, URLs, WSGI/ASGI.</li>
        <li>A <b>Django app</b> is a single feature inside the project — models, views, templates, logic.</li>
        <li>Projects contain many apps; apps are reusable; projects are not.</li>
        <li>You create projects using <code>startproject</code> and apps using <code>startapp</code>.</li>
        <li>Apps must be added to <code>INSTALLED_APPS</code> to work.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-manage-py"><code>manage.py</code> in Django</h3>
<ol>

    <li><b>What Is <code>manage.py</code>?</b></li>
    <br/>
    <ul>
        <li><code>manage.py</code> is a helper script created for every Django project.</li>
        <br/>
        <li>It is the main entry point to run project-related commands during development.</li>
        <br/>
        <li>It wraps Django&#39;s command-line utility and automatically:
            <ul>
                <li>sets the correct <code>DJANGO_SETTINGS_MODULE</code> for your project</li>
                <li>ensures commands run in the context of the current project</li>
            </ul>
        </li>
        <br/>
        <li>When you see commands like <code>python3 manage.py ...</code>, they all start from this script.</li>
    </ul>
    <br/><br/>


    <li><b>Creating a Project and Seeing <code>manage.py</code></b></li>
    <br/>
    <ul>
        <li>Assuming you work inside a virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate
python3 -m pip install django

python3 -m django startproject mysite
cd mysite
</code></pre>

    <ul>
        <li>Project structure:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── asgi.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py
</code></pre>

    <ul>
        <li><code>manage.py</code> sits at the <u>project root</u>, next to your app folders.</li>
    </ul>
    <br/><br/>


    <li><b>How</b> <code>manage.py</code> <b>Works Internally?</b></li>
    <br/>
    <ul>
        <li>A typical <code>manage.py</code> file looks like this (simplified):</li>
    </ul>

<pre><code class="language-py line-numbers">#!/usr/bin/env python3
import os
import sys

def main():
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")
    from django.core.management import execute_from_command_line
    execute_from_command_line(sys.argv)

if __name__ == "__main__":
    main()
</code></pre>

    <ul>
        <li><code>os.environ.setdefault(...)</code> sets which settings module to use.</li>
        <li><code>execute_from_command_line(sys.argv)</code> dispatches commands like <code>runserver</code>, <code>migrate</code>, etc.</li>
        <li>You normally never modify <code>manage.py</code> by hand.</li>
    </ul>
    <br/><br/>


    <li><b>Basic Usage Pattern</b></li>
    <br/>
    <ul>
        <li>All core development actions go through <code>manage.py</code>:</li>
    </ul>

<pre><code class="language-bash line-numbers"># Always inside the virtual environment
source .venv/bin/activate

# Basic pattern:
python3 manage.py &lt;command&gt; [options]
</code></pre>

    <ul>
        <li>Examples:</li>
        <ul>
            <li><code>python3 manage.py runserver</code></li>
            <li><code>python3 manage.py makemigrations</code></li>
            <li><code>python3 manage.py migrate</code></li>
            <li><code>python3 manage.py createsuperuser</code></li>
        </ul>
    </ul>
    <br/><br/>


    <li><b>Frequently Used manage.py Commands</b></li>
    <br/>
    <table>
        <thead>
            <tr>
                <th>Command</th>
                <th>Usage</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>runserver</code></td>
                <td><code>python3 manage.py runserver</code></td>
                <td>Start the development server.</td>
            </tr>
            <tr>
                <td><code>startapp</code></td>
                <td><code>python3 manage.py startapp blog</code></td>
                <td>Create a new Django app inside the project.</td>
            </tr>
            <tr>
                <td><code>makemigrations</code></td>
                <td><code>python3 manage.py makemigrations</code></td>
                <td>Generate migration files from model changes.</td>
            </tr>
            <tr>
                <td><code>migrate</code></td>
                <td><code>python3 manage.py migrate</code></td>
                <td>Apply migrations to the database.</td>
            </tr>
            <tr>
                <td><code>createsuperuser</code></td>
                <td><code>python3 manage.py createsuperuser</code></td>
                <td>Create an admin user for the Django admin site.</td>
            </tr>
            <tr>
                <td><code>shell</code></td>
                <td><code>python3 manage.py shell</code></td>
                <td>Open a Python shell with Django loaded.</td>
            </tr>
            <tr>
                <td><code>test</code></td>
                <td><code>python3 manage.py test</code></td>
                <td>Run your test suite.</td>
            </tr>
            <tr>
                <td><code>showmigrations</code></td>
                <td><code>python3 manage.py showmigrations</code></td>
                <td>List migrations and their applied status.</td>
            </tr>
            <tr>
                <td><code>sqlmigrate</code></td>
                <td><code>python3 manage.py sqlmigrate app_name 0001</code></td>
                <td>Show the raw SQL for a migration.</td>
            </tr>
            <tr>
                <td><code>check</code></td>
                <td><code>python3 manage.py check</code></td>
                <td>Run Django&#39;s system checks for common configuration issues.</td>
            </tr>
        </tbody>
    </table>
    <br/><br/>


    <li><b>Running the Development Server</b></li>
    <br/>
    <ul>
        <li>Use <code>runserver</code> to start a lightweight development server:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py runserver
</code></pre>

    <ul>
        <li>Specify a port if needed:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py runserver 8080
</code></pre>

    <ul>
        <li>By default, the server binds to <code>127.0.0.1:8000</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Creating Apps with manage.py</b></li>
    <br/>
    <ul>
        <li>Inside your project, you create apps via <code>startapp</code>:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py startapp blog
</code></pre>

    <ul>
        <li>This generates an app structure:</li>
    </ul>

<pre><code class="language-bash line-numbers">blog/
├── admin.py
├── apps.py
├── models.py
├── tests.py
├── views.py
└── migrations/
</code></pre>

    <ul>
        <li>Then you add <code>"blog"</code> to <code>INSTALLED_APPS</code> in <code>mysite/settings.py</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Managing Database Schema: makemigrations and migrate</b></li>
    <br/>
    <ul>
        <li>Whenever you change models, you must create and apply migrations:</li>
    </ul>

<pre><code class="language-bash line-numbers"># Generate migration files
python3 manage.py makemigrations

# Apply them to the database
python3 manage.py migrate
</code></pre>

    <ul>
        <li><code>makemigrations</code> looks at <code>models.py</code> and generates migration scripts.</li>
        <li><code>migrate</code> executes those scripts and updates the actual database schema.</li>
    </ul>
    <br/><br/>


    <li><b>Admin User and Auth Management</b></li>
    <br/>
    <ul>
        <li>To use Django&#39;s admin interface, you need a superuser:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py createsuperuser
</code></pre>

    <ul>
        <li>You will be prompted for:
            <ul>
                <li>username</li>
                <li>email</li>
                <li>password (twice)</li>
            </ul>
        </li>
        <li>After that, you can log in at <code>/admin/</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Django Shell for Interactive Work</b></li>
    <br/>
    <ul>
        <li>The <code>shell</code> command opens a Python shell where Django is already configured.</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py shell
</code></pre>

    <ul>
        <li>Example usage:</li>
    </ul>

<pre><code class="language-py line-numbers">from blog.models import Post

Post.objects.create(title="Hello", body="From the shell")
print(Post.objects.all())
</code></pre>

    <ul>
        <li>This is very convenient for quick experiments and debugging.</li>
    </ul>
    <br/><br/>


    <li><b>manage.py vs django-admin</b></li>
    <br/>
    <ul>
        <li>Django also provides a global command: <code>django-admin</code>.</li>
        <br/>
        <li>Difference:
            <ul>
                <li><code>django-admin</code>: Does not automatically know which project settings to use.</li>
                <li><code>manage.py</code>: Tied to a specific project and sets <code>DJANGO_SETTINGS_MODULE</code> for you.</li>
            </ul>
        </li>
        <br/>
        <li>In practice:
            <ul>
                <li>Use <code>python3 manage.py ...</code> inside a project directory.</li>
                <li>Use <code>django-admin</code> mainly to create new projects, or when you know what you are doing.</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li><code>manage.py</code> is the project-specific command-line entry point in Django.</li>
        <li>It loads the correct settings and dispatches commands like <code>runserver</code>, <code>migrate</code>, <code>startapp</code>, and more.</li>
        <li>You should run it with <code>python3</code> from inside an active virtual environment.</li>
        <li>Most of your everyday Django tasks go through <code>python3 manage.py &lt;command&gt;</code>.</li>
        <li>Once you understand <code>manage.py</code>, controlling a Django project from the terminal becomes straightforward and powerful.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-settings-basic">Basic Django Settings</h3>
<ol>

    <li><b>What Are Django Settings?</b></li>
    <br/>
    <ul>
        <li>Django settings configure how your project behaves.</li>
        <br/>
        <li>The main settings file is located in: <code>mysite/settings.py</code></li>
        <br/>
        <li>This file controls:
            <ul>
                <li>debug mode</li>
                <li>installed apps</li>
                <li>database configuration</li>
                <li>static files</li>
                <li>middleware</li>
                <li>URL configuration</li>
                <li>templates</li>
                <li>security settings</li>
            </ul>
        </li>
        <br/>
        <li>Django loads this file automatically when using:
            <ul>
                <li><code>python3 manage.py runserver</code></li>
                <li><code>python3 manage.py migrate</code></li>
                <li><code>python3 manage.py shell</code></li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Location of Settings</b></li>
    <br/>
    <ul>
        <li>Create project inside virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate
python3 -m pip install django

python3 -m django startproject mysite
cd mysite
</code></pre>

    <ul>
        <li>Project structure:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py   &lt;-- settings file
    ├── urls.py
    ├── asgi.py
    └── wsgi.py
</code></pre>

    <br/><br/>


    <li><b>Important Settings in <code>settings.py</code></b></li>
    <br/>

    <ol>
        <li><b>DEBUG</b></li>
        <br/>
        <ul>
            <li><code>DEBUG</code> enables error pages, auto-reload, and rich debugging output.</li>
            <li>Do <u>not</u> enable this in production.</li>
        </ul>

<pre><code class="language-py line-numbers">DEBUG = True
</code></pre>

        <ul>
            <li>In production:</li>
        </ul>

<pre><code class="language-py line-numbers">DEBUG = False
</code></pre>

        <br/><br/>


        <li><b>SECRET_KEY</b></li>
        <br/>
        <ul>
            <li>Used for cryptographic signing (sessions, CSRF tokens, etc.).</li>
            <li>Must remain secret in production.</li>
            <li>Auto-generated when the project is created.</li>
        </ul>

<pre><code class="language-py line-numbers">SECRET_KEY = "django-insecure-abcd1234..."
</code></pre>

        <br/><br/>


        <li><b>ALLOWED_HOSTS</b></li>
        <br/>
        <ul>
            <li>Controls which hosts are allowed to serve the project.</li>
            <li>Required when <code>DEBUG = False</code>.</li>
        </ul>

<pre><code class="language-py line-numbers">ALLOWED_HOSTS = ["127.0.0.1", "localhost"]
</code></pre>

        <ul>
            <li>In production you would add your domain, e.g.:</li>
        </ul>

<pre><code class="language-py line-numbers">ALLOWED_HOSTS = ["mywebsite.com"]
</code></pre>

        <br/><br/>


        <li><b>INSTALLED_APPS</b></li>
        <br/>
        <ul>
            <li>List of all apps activated for this project.</li>
            <li>Includes:
                <ul>
                    <li>Django default apps</li>
                    <li>Your own apps</li>
                    <li>Third-party apps</li>
                </ul>
            </li>
        </ul>

<pre><code class="language-py line-numbers">INSTALLED_APPS = [
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.sessions",
    "django.contrib.messages",
    "django.contrib.staticfiles",
    "blog",   # your app
]
</code></pre>

        <br/><br/>


        <li><b>MIDDLEWARE</b></li>
        <br/>
        <ul>
            <li>Middleware is a chain of hooks that process every request/response.</li>
            <li>Examples:
                <ul>
                    <li>SecurityMiddleware</li>
                    <li>AuthenticationMiddleware</li>
                    <li>CSRF middleware</li>
                </ul>
            </li>
        </ul>

<pre><code class="language-py line-numbers">MIDDLEWARE = [
    "django.middleware.security.SecurityMiddleware",
    "django.contrib.sessions.middleware.SessionMiddleware",
    "django.middleware.common.CommonMiddleware",
    "django.middleware.csrf.CsrfViewMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware",
    "django.contrib.messages.middleware.MessageMiddleware",
]
</code></pre>

        <br/><br/>


        <li><b>ROOT_URLCONF</b></li>
        <br/>
        <ul>
            <li>Points to the main URL routing module.</li>
        </ul>

<pre><code class="language-py line-numbers">ROOT_URLCONF = "mysite.urls"
</code></pre>

        <ul>
            <li>This file typically includes app URLs via <code>include()</code>.</li>
        </ul>

        <br/><br/>


        <li><b>TEMPLATES</b></li>
        <br/>
        <ul>
            <li>Configures Django’s template engine.</li>
            <li>Defines template directories, context processors, and backend engine.</li>
        </ul>

<pre><code class="language-py line-numbers">TEMPLATES = [
    {
        "BACKEND": "django.template.backends.django.DjangoTemplates",
        "DIRS": [],
        "APP_DIRS": True,
        "OPTIONS": {
            "context_processors": [
                "django.template.context_processors.debug",
                "django.template.context_processors.request",
                "django.contrib.auth.context_processors.auth",
                "django.contrib.messages.context_processors.messages",
            ],
        },
    },
]
</code></pre>

        <br/><br/>


        <li><b>DATABASES</b></li>
        <br/>
        <ul>
            <li>Default database is SQLite (easy for development).</li>
        </ul>

<pre><code class="language-py line-numbers">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    }
}
</code></pre>

        <ul>
            <li>For PostgreSQL:</li>
        </ul>

<pre><code class="language-py line-numbers">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.postgresql",
        "NAME": "mydb",
        "USER": "myuser",
        "PASSWORD": "mypassword",
        "HOST": "localhost",
        "PORT": "5432",
    }
}
</code></pre>

        <br/><br/>


        <li><b>AUTH_PASSWORD_VALIDATORS</b></li>
        <br/>
        <ul>
            <li>Controls password requirements for users.</li>
        </ul>

<pre><code class="language-py line-numbers">AUTH_PASSWORD_VALIDATORS = [
    {"NAME": "django.contrib.auth.password_validation.UserAttributeSimilarityValidator"},
    {"NAME": "django.contrib.auth.password_validation.MinimumLengthValidator"},
    {"NAME": "django.contrib.auth.password_validation.CommonPasswordValidator"},
    {"NAME": "django.contrib.auth.password_validation.NumericPasswordValidator"},
]
</code></pre>

        <br/><br/>


        <li><b>STATIC_URL and STATICFILES_DIRS</b></li>
        <br/>
        <ul>
            <li>Static files include CSS, JS, and images.</li>
        </ul>

<pre><code class="language-py line-numbers">STATIC_URL = "/static/"</code></pre>

        <ul>
            <li>Extra static directories (optional):</li>
        </ul>

<pre><code class="language-py line-numbers">STATICFILES_DIRS = [
    BASE_DIR / "static",
]
</code></pre>

        <br/><br/>


        <li><b>TIME_ZONE and LANGUAGE_CODE</b></li>
        <br/>
        <ul>
            <li>Controls default language and timezone.</li>
        </ul>

<pre><code class="language-py line-numbers">LANGUAGE_CODE = "en-us"
TIME_ZONE = "UTC"
USE_TZ = True
</code></pre>

        <ul>
            <li>Examples:</li>
            <ul>
                <li>German: <code>"de"</code></li>
                <li>Chinese: <code>"zh-hans"</code></li>
                <li>Beijing timezone: <code>"Asia/Shanghai"</code></li>
            </ul>
        </ul>

    </ol>

        <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li><code>settings.py</code> controls all configuration aspects of a Django project.</li>
        <li>Key elements include DEBUG status, installed apps, middleware, templates, and databases.</li>
        <li>ALLOWED_HOSTS becomes important when <code>DEBUG = False</code>.</li>
        <li>Django provides defaults, but nearly everything is customizable.</li>
        <li>These settings integrate deeply with Django’s ORM, admin, views, and security.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-urls-py">URL Routing with <code>urls.py</code> in Django</h3>
<ol>

    <li><b>What Is URL Routing in Django?</b></li>
    <br/>
    <ul>
        <li>Django uses a URL routing system to map incoming browser requests to specific view functions.</li>
        <br/>
        <li>This routing logic is defined inside one or more <code>urls.py</code> files.</li>
        <br/>
        <li>The main <code>urls.py</code> lives in the project folder (e.g., <code>mysite/urls.py</code>).</li>
        <br/>
        <li>Each app can also have its own <code>urls.py</code> file for modular routing.</li>
        <br/>
        <li>URL routing decides:
            <ul>
                <li>which view function is executed</li>
                <li>how URL parameters are passed</li>
                <li>how apps organize their routes</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Default Project-Level</b> <code>urls.py</code></li>
    <br/>
    <ul>
        <li>After creating a Django project, your project’s <code>urls.py</code> contains:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path

urlpatterns = [
    path("admin/", admin.site.urls),
]
</code></pre>

    <ul>
        <li><code>urlpatterns</code> is a list mapping URLs to views or included routes.</li>
        <li><code>path()</code> is the most common function for defining routes.</li>
    </ul>
    <br/><br/>


    <li><b>Adding Routes in Project-Level</b> <code>urls.py</code></li>
    <br/>
    <ul>
        <li>Let’s say we have a simple view in <code>blog/views.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.http import HttpResponse

def hello(request):
    return HttpResponse("Hello from blog!")
</code></pre>

    <ul>
        <li>We can route to it directly from the project’s <code>urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path
from blog.views import hello

urlpatterns = [
    path("admin/", admin.site.urls),
    path("hello/", hello),
]
</code></pre>

    <ul>
        <li>This exposes the view at: <code>http://127.0.0.1:8000/hello/</code>.</li>
    </ul>

    <br/><br/>


    <li><b>Using Application-Level</b> <code>urls.py</code> <b>(Recommended)</b></li>
    <br/>
    <ul>
        <li>Each app should have its own <code>urls.py</code> for better organization.</li>
        <li>Create a <code>urls.py</code> inside the <code>blog</code> app:</li>
    </ul>

<pre><code class="language-bash line-numbers">blog/
├── __init__.py
├── admin.py
├── apps.py
├── models.py
├── views.py
└── urls.py   &lt;-- create this file
</code></pre>

    <ul>
        <li>Inside <code>blog/urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path("hello/", views.hello),
]
</code></pre>

    <ul>
        <li>Now include it in the project-level <code>urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),
]
</code></pre>

    <ul>
        <li>This exposes the view at:</li>
        <li><code>http://127.0.0.1:8000/blog/hello/</code></li>
    </ul>

    <br/><br/>


    <li><b>Understanding the</b> <code>path()</code> <b>Syntax</b></li>
    <br/>
    <ul>
        <li><code>path(route, view, name=None)</code></li>
    </ul>

<pre><code class="language-py line-numbers">path("hello/", views.hello, name="hello")
</code></pre>

    <ul>
        <li><b>route</b> → URL pattern string (no domain)</li>
        <li><b>view</b> → the function/class handling the request</li>
        <li><b>name</b> → optional identifier for reverse URL lookups</li>
    </ul>

    <br/><br/>


    <li><b>URL Parameters and Converters</b></li>
    <br/>
    <ul>
        <li>Django allows dynamic URL segments via converters:</li>
    </ul>

<pre><code class="language-py line-numbers">path("post/&lt;int:id&gt;/", views.show_post)
</code></pre>

    <ul>
        <li>Supported converters:</li>
        <ul>
            <li><code>int</code> → integers</li>
            <li><code>str</code> → strings</li>
            <li><code>slug</code> → <code>a-z A-Z 0-9 - _</code></li>
            <li><code>uuid</code> → UUID strings</li>
            <li><code>path</code> → full path segments including <code>/</code></li>
        </ul>
    </ul>

    <br/>

    <ul>
        <li>Example view:</li>
    </ul>

<pre><code class="language-py line-numbers">def show_post(request, id):
    return HttpResponse(f"Post ID is {id}")
</code></pre>

    <br/><br/>


    <li><b>Using</b> <code>include()</code> <b>to Organize URL Structures</b></li>
    <br/>
    <ul>
        <li><code>include()</code> lets you split different URL patterns into app modules. This is crucial for large websites.</li>
    </ul>

<pre><code class="language-py line-numbers">urlpatterns = [
    path("blog/", include("blog.urls")),
    path("shop/", include("shop.urls")),
    path("api/", include("api.urls")),
]
</code></pre>

    <br/><br/>


    <li><b>Named URLs (Highly Recommended)</b></li>
    <br/>
    <ul>
        <li>Use the <code>name=</code> argument to reference routes safely:</li>
    </ul>

<pre><code class="language-py line-numbers">path("hello/", views.hello, name="hello")
</code></pre>

    <ul>
        <li>Then use <code>reverse()</code> or <code>{% url %}</code> in templates:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.urls import reverse
reverse("hello")   # returns "/hello/"
</code></pre>

<pre><code class="language-html line-numbers">&lt;a href="{% url 'hello' %}"&gt;Say Hello&lt;/a&gt;
</code></pre>

    <ul>
        <li>Named URLs make refactoring safer — paths can change, but names stay constant.</li>
    </ul>

    <br/><br/>


    <li><b>Using URL Namespaces</b></li>
    <br/>
    <ul>
        <li>Useful when multiple apps have overlapping route names.</li>
        <li>Assign an <code>app_name</code> at the top of <code>blog/urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

app_name = "blog"

urlpatterns = [
    path("hello/", views.hello, name="hello"),
]
</code></pre>

    <ul>
        <li>Reverse the URL using a namespace:</li>
    </ul>

<pre><code class="language-html line-numbers">{% url 'blog:hello' %}</code></pre>
</ol>
<br/>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-wsgi-py">Understanding <code>wsgi.py</code> in Django</h3>
<ol>

    <li><b>What Is WSGI?</b></li>
    <br/>
    <ul>
        <li><b>WSGI</b> stands for <u>Web Server Gateway Interface</u>.</li>
        <br/>
        <li>It is a standard interface between a Python web application (like Django) and a production web server (like Gunicorn, uWSGI, Apache mod_wsgi)</li>
        <br/>
        <li>WSGI ensures that:
            <ul>
                <li>your Django project can run on any server that supports WSGI</li>
                <li>your Python code is separated from the web server implementation</li>
            </ul>
        </li>
        <br/>
        <li>In short: WSGI is the <u>bridge</u> between Django and the outside world in production environments.</li>
    </ul>
    <br/><br/>


    <li><b>Where Is <code>wsgi.py</code> Located?</b></li>
    <br/>
    <ul>
        <li>It is automatically created inside your project folder:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    ├── wsgi.py      &lt;-- here!
    └── asgi.py
</code></pre>

    <br/><br/>


    <li><b>What Does <code>wsgi.py</code> Contain?</b></li>
    <br/>
    <ul>
        <li>The file contains a small amount of boilerplate necessary for Django to run under WSGI servers.</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/wsgi.py

import os
from django.core.wsgi import get_wsgi_application

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

application = get_wsgi_application()
</code></pre>

    <ul>
        <li>Key parts:</li>
        <ul>
            <li><code>os.environ.setdefault()</code>: tells Django which settings module to load</li>
            <li><code>get_wsgi_application()</code>: creates a WSGI-compatible application object</li>
            <li><code>application</code>: the entry point the server will use</li>
        </ul>
        <br/>
        <li>This file rarely needs modification.</li>
    </ul>

    <br/><br/>


    <li><b>Why Do We Need <code>wsgi.py</code>?</b></li>
    <br/>
    <ul>
        <li>Django needs a standard interface to communicate with a production-ready server.</li>
        <br/>
        <li>WSGI:
            <ul>
                <li>handles HTTP requests</li>
                <li>passes them to Django</li>
                <li>returns Django’s HTTP responses to the server</li>
            </ul>
        </li>

        <br/>

        <li>Without WSGI, your Django project cannot run on servers like:
            <ul>
                <li>Gunicorn</li>
                <li>uWSGI</li>
                <li>Apache with mod_wsgi</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Relationship Between <code>manage.py</code> and <code>wsgi.py</code></b></li>
    <br/>
    <ul>
        <li><code>manage.py</code> is used for development commands:
            <ul>
                <li>runserver</li>
                <li>migrate</li>
                <li>createsuperuser</li>
            </ul>
        </li>
        <br/>
        <li><code>wsgi.py</code> is used for deploying your project to a real server.</li>
        <br/>
        <li>Both load the Django settings module.</li>
    </ul>

    <br/><br/>


    <li><b>Running Django in Production With WSGI</b></li>
    <br/>
    <ul>
        <li>Example using <u>Gunicorn</u> inside your virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate
python3 -m pip install gunicorn
gunicorn mysite.wsgi:application
</code></pre>

    <ul>
        <li>Gunicorn loads:
            <ul>
                <li>your project</li>
                <li>your Django settings</li>
                <li>the WSGI application object</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>How WSGI Processes a Request (Step-by-Step)</b></li>
    <br/>
    <ol>
        <li>Browser sends an HTTP request → web server receives it</li>
        <li>Web server calls your WSGI application object</li>
        <li><code>wsgi.py</code> gives Django the request</li>
        <li>Django:
            <ul>
                <li>loads URL configuration</li>
                <li>dispatches to the correct view</li>
                <li>produces an HttpResponse</li>
            </ul>
        </li>
        <li>Response is passed back through WSGI to the server</li>
        <li>Server sends response to the browser</li>
    </ol>

    <br/><br/>


    <li><b>WSGI vs. ASGI</b></li>
    <br/>
    <ul>
        <li>Django also includes <code>asgi.py</code> for async servers.</li>
        <li>The difference:</li>
    </ul>

    <table>
        <thead>
            <tr>
                <th>Interface</th>
                <th>Purpose</th>
                <th>Typical Server</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>WSGI</b></td>
                <td>Traditional synchronous web apps</td>
                <td>Gunicorn, uWSGI, mod_wsgi</td>
            </tr>
            <tr>
                <td><b>ASGI</b></td>
                <td>Async features (WebSockets, HTTP/2)</td>
                <td>Uvicorn, Daphne</td>
            </tr>
        </tbody>
    </table>

    <br/>

    <ul>
        <li>If your app is basic HTTP — WSGI is enough.</li>
        <li>If you need WebSockets or async — use ASGI.</li>
    </ul>

    <br/><br/>


    <li><b>Do You Ever Edit <code>wsgi.py</code>?</b></li>
    <br/>
    <ul>
        <li>Most projects never change it.</li>
        <br/>
        <li>Possible edge cases:
            <ul>
                <li>adding environment variables</li>
                <li>overriding settings module</li>
                <li>custom logging setup</li>
            </ul>
        </li>
        <br/>
        <li>But for beginners → leave it untouched.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-asgi-py">Understanding <code>asgi.py</code> in Django</h3>
<ol>

    <li><b>What Is ASGI?</b></li>
    <br/>
    <ul>
        <li><b>ASGI</b> stands for <u>Asynchronous Server Gateway Interface</u>.</li>
        <br/>
        <li>ASGI is the spiritual successor to WSGI and enables:
            <ul>
                <li>asynchronous views</li>
                <li>WebSockets</li>
                <li>HTTP/2</li>
                <li>long-lived connections</li>
            </ul>
        </li>
        <br/>
        <li>ASGI makes Django capable of modern real-time features like:
            <ul>
                <li>chat systems</li>
                <li>live notifications</li>
                <li>live dashboards</li>
                <li>background tasks</li>
            </ul>
        </li>
        <br/>
        <li>While <code>wsgi.py</code> is for synchronous servers, <code>asgi.py</code> is for asynchronous servers.</li>
    </ul>
    <br/><br/>


    <li><b>Where Is <code>asgi.py</code> Located?</b></li>
    <br/>
    <ul>
        <li>It is created automatically in every new Django project:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    ├── asgi.py      &lt;-- here!
    └── wsgi.py
</code></pre>

    <br/><br/>


    <li><b>The Default <code>asgi.py</code> File</b></li>
    <br/>
    <ul>
        <li>Django generates the following code:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/asgi.py

import os
from django.core.asgi import get_asgi_application

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

application = get_asgi_application()
</code></pre>

    <ul>
        <li>This file:
            <ul>
                <li>sets up Django settings</li>
                <li>creates an ASGI-compatible application object</li>
                <li>exposes <code>application</code> for ASGI servers</li>
            </ul>
        </li>
        <br/>
        <li>Just like <code>wsgi.py</code>, you rarely need to modify it.</li>
    </ul>

    <br/><br/>


    <li><b>Why Does Django Need <code>asgi.py</code>?</b></li>
    <br/>
    <ul>
        <li>Modern web apps rely heavily on:
            <ul>
                <li>real-time communication</li>
                <li>live updates</li>
                <li>async I/O operations</li>
            </ul>
        </li>
        <li>ASGI makes Django compatible with:
            <ul>
                <li><b>WebSockets</b></li>
                <li><b>Async Views</b> using <code>async def</code></li>
                <li><b>Django Channels</b></li>
            </ul>
        </li>
        <br/>
        <li>ASGI is the future direction of Django for high-concurrency applications.</li>
    </ul>

    <br/><br/>


    <li><b>WSGI vs ASGI — Key Differences</b></li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Feature</th>
                <th>WSGI</th>
                <th>ASGI</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Type</td>
                <td>Synchronous</td>
                <td>Asynchronous + synchronous</td>
            </tr>
            <tr>
                <td>Supports WebSockets?</td>
                <td>No</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>Best Use Case</td>
                <td>Traditional web apps</td>
                <td>Real-time &amp; concurrent apps</td>
            </tr>
            <tr>
                <td>Typical Server</td>
                <td>Gunicorn, uWSGI</td>
                <td>Uvicorn, Daphne, Hypercorn</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Example: Running Django With an ASGI Server</b></li>
    <br/>
    <ul>
        <li>Inside a virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate

python3 -m pip install uvicorn

uvicorn mysite.asgi:application --reload
</code></pre>

    <ul>
        <li>You now run Django on an ASGI server.</li>
        <li>Supports both async and sync views.</li>
    </ul>

    <br/><br/>


    <li><b>Async Views in Django (ASGI Feature)</b></li>
    <br/>
    <ul>
        <li>You can write fully asynchronous views:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

import asyncio
from django.http import HttpResponse

async def slow_view(request):
    await asyncio.sleep(2)
    return HttpResponse("This view waited 2 seconds asynchronously!")
</code></pre>

    <ul>
        <li>Available only when Django runs under ASGI.</li>
    </ul>

    <br/><br/>


    <li><b>Using ASGI for WebSockets (Via Django Channels)</b></li>
    <br/>
    <ul>
        <li>ASGI enables WebSocket support through Django Channels:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m pip install channels
</code></pre>

    <ul>
        <li>You can create <code>routing.py</code> for WebSockets:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/routing.py

from django.urls import path
from channels.routing import ProtocolTypeRouter, URLRouter
from blog.consumers import ChatConsumer

application = ProtocolTypeRouter({
    "websocket": URLRouter([
        path("ws/chat/", ChatConsumer.as_asgi()),
    ]),
})
</code></pre>

    <ul>
        <li>ASGI is essential for Channels to function.</li>
    </ul>

    <br/><br/>


    <li><b>How ASGI Handles a Request (High Level)</b></li>
    <br/>
    <ul>
        <li>1. Browser sends an HTTP or WebSocket request</li>
        <li>2. ASGI server receives it (Uvicorn, Daphne, etc.)</li>
        <li>3. Server calls Django’s <code>asgi.py</code> application object</li>
        <li>4. Django routes request through middleware and URLs</li>
        <li>5. View processes request (sync or async)</li>
        <li>6. Response is returned through ASGI to the client</li>
    </ul>

    <br/><br/>


    <li><b>Do You Ever Edit <code>asgi.py</code>?</b></li>
    <br/>
    <ul>
        <li>Usually no — Django provides everything needed.</li>
        <li>You would modify it only to:
            <ul>
                <li>integrate Django Channels</li>
                <li>add additional ASGI middleware</li>
                <li>customize routing between protocols (HTTP / WebSocket)</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li><code>asgi.py</code> is the entry point for running Django under an ASGI server.</li>
        <li>It enables:
            <ul>
                <li>async views</li>
                <li>WebSockets</li>
                <li>real-time apps</li>
                <li>Django Channels</li>
            </ul>
        </li>
        <li>ASGI is more advanced than WSGI and represents the future of Django.</li>
        <li>You run ASGI servers using Uvicorn, Daphne, or Hypercorn.</li>
        <li><code>asgi.py</code> rarely requires changes unless building advanced async/websocket features.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-file-structure">Understanding Django Project &amp; App File Structure</h3>
<ol>

    <li><b>Create a Django Project (Inside Virtual Environment)</b></li>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate

python3 -m pip install django
python3 -m django startproject mysite
cd mysite
</code></pre>

    <br/><br/>


    <li><b>Django Project Directory Structure</b></li>
    <br/>
    <ul>
        <li>Your project folder <code>mysite/</code> contains:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    ├── asgi.py
    └── wsgi.py
</code></pre>

    <br/>
    <ul>
        <li>Explanation of each file:</li>
    </ul>

    <table>
        <thead>
            <tr>
                <th>File / Folder</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>manage.py</code></td>
                <td>Main CLI tool for the project (e.g., <code>runserver</code>, <code>migrate</code>).</td>
            </tr>
            <tr>
                <td><code>mysite/</code> (inner folder)</td>
                <td>Actual project package (contains settings, URLs, ASGI/WSGI).</td>
            </tr>
            <tr>
                <td><code>__init__.py</code></td>
                <td>Makes the folder a Python package.</td>
            </tr>
            <tr>
                <td><code>settings.py</code></td>
                <td>Global configuration: database, installed apps, middleware, templates, static files, etc.</td>
            </tr>
            <tr>
                <td><code>urls.py</code></td>
                <td>Root URL routing file directing to app URLs.</td>
            </tr>
            <tr>
                <td><code>asgi.py</code></td>
                <td>Entry point for ASGI servers (async support).</td>
            </tr>
            <tr>
                <td><code>wsgi.py</code></td>
                <td>Entry point for WSGI servers (production).</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Creating an App Inside the Project</b></li>
<pre><code class="language-bash line-numbers">python3 manage.py startapp blog
</code></pre>

    <br/><br/>


    <li><b>Django App Directory Structure</b></li>
<pre><code class="language-bash line-numbers">blog/
├── admin.py
├── apps.py
├── models.py
├── tests.py
├── views.py
└── migrations/
    └── __init__.py
</code></pre>

    <ul>
        <br/>
        <li>Explanation of each file:</li>
        <br/>
    </ul>

    <table>
        <thead>
            <tr>
                <th>File / Folder</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>admin.py</code></td>
                <td>Define how models appear in Django Admin.</td>
            </tr>
            <tr>
                <td><code>apps.py</code></td>
                <td>Configuration class for your app (used internally by Django).</td>
            </tr>
            <tr>
                <td><code>models.py</code></td>
                <td>Define your database tables using Django Models.</td>
            </tr>
            <tr>
                <td><code>tests.py</code></td>
                <td>Unit tests for your app.</td>
            </tr>
            <tr>
                <td><code>views.py</code></td>
                <td>Your request handlers (functions or class-based views).</td>
            </tr>
            <tr>
                <td><code>migrations/</code></td>
                <td>Stores migration files for database schema changes.</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Where Do Templates and Static Files Go?</b></li>
    <ul>
        <li>You do NOT see templates or static folders by default.</li>
        <li>You must create them manually.</li>
    </ul>

    <br/><br/>



    <li><b>Recommended Structure for Templates</b></li>

<pre><code class="language-bash line-numbers">blog/
├── templates/
│   └── blog/
│       └── index.html
</code></pre>

    <ul>
        <li>The inner <code>blog/</code> folder prevents naming conflicts between apps.</li>
        <li>Important: the app name becomes a namespace.</li>
        <li>Django finds templates because <code>APP_DIRS</code> is enabled in <code>settings.py</code>.</li>
    </ul>

    <br/><br/>



    <li><b>Recommended Structure for Static Files</b></li>

<pre><code class="language-bash line-numbers">blog/
├── static/
│   └── blog/
│       ├── style.css
│       └── script.js
</code></pre>

    <ul>
        <li>Again, use <code>blog/</code> inside <code>static/</code> to avoid collisions.</li>
        <li>Django collects static files using <code>python3 manage.py collectstatic</code>.</li>
    </ul>

    <br/><br/>


    <li><b>How Project and App Work Together</b></li>
    <br/>
    <ul>
        <li>Your project should be configured to include the app:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/settings.py

INSTALLED_APPS = [
    ...
    "blog",
]
</code></pre>

    <ul>
        <li>Next, the project routes URLs to the app:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.urls import path, include

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),
]
</code></pre>

    <ul>
        <li>This makes your app accessible under <code>/blog/</code>.</li>
    </ul>

    <br/><br/>


    <li><b>Example of a Complete App Folder (Realistic)</b></li>
<pre><code class="language-bash line-numbers">blog/
├── admin.py
├── apps.py
├── migrations/
│   ├── __init__.py
│   └── 0001_initial.py
├── models.py
├── templates/
│   └── blog/
│       └── index.html
├── static/
│   └── blog/
│       ├── style.css
│       └── script.js
├── tests.py
└── views.py
</code></pre>

    <br/><br/>


    <li><b>Example of a Complete Project Folder</b></li>
<pre><code class="language-bash line-numbers">mysite/
├── manage.py
├── mysite/
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   ├── wsgi.py
│   └── asgi.py
└── blog/
    ├── admin.py
    ├── apps.py
    ├── migrations/
    ├── models.py
    ├── templates/
    ├── static/
    ├── tests.py
    └── views.py
</code></pre>

    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li>A Django <b>project</b> is the container for the entire web application and global configuration.</li>
        <li>A Django <b>app</b> is a modular component that provides one specific feature.</li>
        <li>Projects contain:
            <ul>
                <li><code>settings.py</code></li>
                <li><code>urls.py</code></li>
                <li><code>wsgi.py</code></li>
                <li><code>asgi.py</code></li>
            </ul>
        </li>
        <li>Apps contain:
            <ul>
                <li><code>models.py</code></li>
                <li><code>views.py</code></li>
                <li><code>admin.py</code></li>
                <li><code>templates/</code></li>
                <li><code>static/</code></li>
            </ul>
        </li>
        <li>A project can have many apps; apps are reusable across projects.</li>
        <li>Correct folder structure ensures scalability, clarity, and maintainability in Django projects.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-models">Models in Django</h3>
<ol>

    <li><b>What Are Models?</b></li>
    <br/>
    <ul>
        <li>A Django <code>model</code> is a Python class that represents a database table.</li>
        <br/>
        <li>Each class attribute in the <code>model</code> corresponds to a column in the table.</li>
        <br/>
        <li>Django uses its built-in <u>Object–Relational Mapper (ORM)</u> to convert model classes into SQL queries.</li>
        <br/>
        <li>Models are defined inside the <code>models.py</code> of each app.</li>
        <br/>
        <li>You do not write SQL — Django auto-generates it during migration steps.</li>
    </ul>
    <br/><br/>


    <li><b>Typical Workflow With Models</b></li>
    <br/>
    <ul>
        <li>Create and activate a virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate
</code></pre>

    <ul>
        <li>Install Django:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m pip install django
</code></pre>

    <ul>
        <li>Create project and app:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m django startproject mysite
cd mysite
python3 -m django startapp blog
</code></pre>

    <ul>
        <li>Edit <code>models.py</code>, then run:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
python3 manage.py migrate
</code></pre>

    <ul>
        <li>You now have database tables ready for use.</li>
    </ul>
    <br/><br/>


    <li><b>Defining Your First Model</b></li>
    <br/>
    <ul>
        <li>All models inherit from <code>django.db.models.Model</code>.</li>
        <li>Field types define how data is stored in the database.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
</code></pre>

    <ul>
        <li><code>CharField</code>: short strings</li>
        <li><code>TextField</code>: long text</li>
        <li><code>DateTimeField(auto_now_add=True)</code>: timestamp when created</li>
    </ul>
    <br/><br/>


    <li><b>Applying Migrations</b></li>
    <br/>
    <ul>
        <li>After modifying models, create migration scripts:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
</code></pre>

    <ul>
        <li>Apply them and update the database schema:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py migrate
</code></pre>

    <ul>
        <li>Django now creates the corresponding SQL tables.</li>
    </ul>
    <br/><br/>


    <li><b>Common Django Model Fields</b></li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Field Type</th>
                <th>Description</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>CharField</code></td>
                <td>Short strings</td>
                <td><code>CharField(max_length=100)</code></td>
            </tr>
            <tr>
                <td><code>TextField</code></td>
                <td>Large text</td>
                <td><code>TextField()</code></td>
            </tr>
            <tr>
                <td><code>IntegerField</code></td>
                <td>Integers</td>
                <td><code>IntegerField()</code></td>
            </tr>
            <tr>
                <td><code>DateTimeField</code></td>
                <td>Date and time values</td>
                <td><code>DateTimeField(auto_now_add=True)</code></td>
            </tr>
            <tr>
                <td><code>BooleanField</code></td>
                <td>True/False</td>
                <td><code>BooleanField(default=False)</code></td>
            </tr>
            <tr>
                <td><code>ForeignKey</code></td>
                <td>Many-to-one relationship</td>
                <td><code>ForeignKey(User, on_delete=models.CASCADE)</code></td>
            </tr>
            <tr>
                <td><code>FileField</code></td>
                <td>File uploads</td>
                <td><code>FileField(upload_to="uploads/")</code></td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Adding Relationships Between Models</b></li>
    <br/>
    <ul>
        <li>Django supports three common relational patterns:</li>
        <ul>
            <li><b>One-to-many</b> → <code>ForeignKey</code></li>
            <li><b>Many-to-many</b> → <code>ManyToManyField</code></li>
            <li><b>One-to-one</b> → <code>OneToOneField</code></li>
        </ul>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models
from django.contrib.auth.models import User

class Comment(models.Model):
    post = models.ForeignKey("Post", on_delete=models.CASCADE)
    author = models.ForeignKey(User, on_delete=models.CASCADE)
    text = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
</code></pre>

    <ul>
        <li><code>ForeignKey</code> links each comment to one post.</li>
        <li><code>on_delete=models.CASCADE</code> ensures comments disappear when a post is deleted.</li>
    </ul>
    <br/><br/>


    <li><b>Useful Model Methods</b></li>
    <br/>
    <ul>
        <li>You can add custom methods to models:</li>
    </ul>

<pre><code class="language-py line-numbers">class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()

    def __str__(self):
        return self.title

    def preview(self):
        return self.body[:50] + "..."
</code></pre>

    <ul>
        <li><code>__str__</code> improves admin display.</li>
        <li><code>preview</code> returns a short snippet of the body.</li>
    </ul>
    <br/><br/>


    <li><b>Querying Models Using the ORM</b></li>
    <br/>
    <ul>
        <li>Use the Django shell for experimenting:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py shell
</code></pre>

    <ul>
        <li>Example operations:</li>
    </ul>

<pre><code class="language-py line-numbers">from blog.models import Post

# Create
Post.objects.create(title="Hello", body="First post!")

# Read
Post.objects.all()

# Filter
Post.objects.filter(title__icontains="hello")

# Order
Post.objects.order_by("-created_at")
</code></pre>

    <br/><br/>


    <li><b>Meta Options (Model Configuration)</b></li>
    <br/>
    <ul>
        <li>The <code>Meta</code> class customizes model behavior.</li>
    </ul>

<pre><code class="language-py line-numbers">class Post(models.Model):
    title = models.CharField(max_length=200)

    class Meta:
        ordering = ["-id"]
        verbose_name = "Blog Post"
        verbose_name_plural = "Blog Posts"
</code></pre>

    <ul>
        <li><code>ordering</code> → default sort order</li>
        <li><code>verbose_name</code> → human-friendly name in admin</li>
    </ul>
    <br/><br/>


    <li><b>Registering Models in the Admin</b></li>
    <br/>
    <ul>
        <li>To manage models via Django Admin, you must register them:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/admin.py

from django.contrib import admin
from .models import Post, Comment

admin.site.register(Post)
admin.site.register(Comment)
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-orm">Object–Relational Mapper (ORM) in Django</h3>
<ol>

    <li><b>What Is the Django ORM?</b></li>
    <br/>
    <ul>
        <li>The Django ORM is a powerful system that allows you to interact with databases using <u>Python classes</u> instead of writing SQL manually.</li>
        <br/>
        <li>ORM converts Python model operations into SQL queries automatically.</li>
        <br/>
        <li>Supported databases:
            <ul>
                <li>SQLite (default)</li>
                <li>PostgreSQL</li>
                <li>MySQL</li>
                <li>MariaDB</li>
                <li>Oracle</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Prerequisite: Virtual Environment &amp; Project Setup</b></li>
    <br/>
    <ul>
        <li>Create and activate virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate
python3 -m pip install django
</code></pre>

    <ul>
        <li>Create project and app:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m django startproject mysite
cd mysite
python3 -m django startapp blog
</code></pre>

    <br/><br/>


    <li><b>Models and Tables</b></li>
    <br/>
    <ul>
        <li>Define a model (maps to a database table):</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
</code></pre>

    <ul>
        <li>Each attribute becomes a database column.</li>
        <li>Django creates the SQL table automatically through migrations.</li>
    </ul>

    <br/><br/>


    <li><b>Migrations: Create the Database Schema</b></li>
    <br/>
    <ul>
        <li>Generate migration scripts:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
</code></pre>

    <ul>
        <li>Apply migrations:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py migrate
</code></pre>

    <ul>
        <li>Your database now contains a <code>Post</code> table.</li>
    </ul>

    <br/><br/>


    <li><b>Creating Objects (INSERT)</b></li>
    <br/>
    <ul>
        <li>Use the model's manager <code>objects</code> to create records:</li>
    </ul>

<pre><code class="language-py line-numbers">from blog.models import Post

Post.objects.create(title="Hello", body="First post")
</code></pre>

    <ul>
        <li>This generates SQL like:</li>
    </ul>

<pre><code class="language-sql line-numbers">INSERT INTO blog_post (title, body, created_at) VALUES (...);
</code></pre>

    <ul>
        <li>But you do not write SQL — Django handles it.</li>
    </ul>
    <br/><br/>


    <li><b>Querying Objects (SELECT)</b></li>
    <br/>
    <ul>
        <li>Get all objects:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.all()
</code></pre>

    <ul>
        <li>Filter using conditions:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title__icontains="hello")
</code></pre>

    <ul>
        <li>Get a single object:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.get(id=1)
</code></pre>

    <ul>
        <li>If no object is found, <code>DoesNotExist</code> error is raised.</li>
    </ul>

    <br/><br/>


    <li><b>Common ORM Lookups</b></li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Lookup</th>
                <th>Example</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>exact</code></td>
                <td><code>title__exact="Hello"</code></td>
                <td>Exact match</td>
            </tr>
            <tr>
                <td><code>icontains</code></td>
                <td><code>title__icontains="hello"</code></td>
                <td>Case-insensitive substring match</td>
            </tr>
            <tr>
                <td><code>gt</code></td>
                <td><code>id__gt=3</code></td>
                <td>Greater than</td>
            </tr>
            <tr>
                <td><code>lt</code></td>
                <td><code>id__lt=10</code></td>
                <td>Less than</td>
            </tr>
            <tr>
                <td><code>in</code></td>
                <td><code>id__in=[1, 2, 3]</code></td>
                <td>Filter within a list</td>
            </tr>
            <tr>
                <td><code>startswith</code></td>
                <td><code>title__startswith="Django"</code></td>
                <td>Prefix match</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Updating Objects (UPDATE)</b></li>
    <br/>
    <ul>
        <li>Fetch an object, modify it, then save:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
post.title = "Updated title"
post.save()
</code></pre>

    <ul>
        <li>This triggers an <code>UPDATE</code> query.</li>
    </ul>

    <br/><br/>


    <li><b>Deleting Objects (DELETE)</b></li>
    <ul>
        <li>Delete a single object:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
post.delete()
</code></pre>

    <ul>
        <li>Delete multiple objects:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title__icontains="old").delete()
</code></pre>

    <br/><br/>


    <li><b>ORM and Relationships</b></li>
    <br/>
    <ul>
        <li>Django ORM supports relationships via fields:</li>
        <ul>
            <li><code>ForeignKey</code> → one-to-many</li>
            <li><code>ManyToManyField</code> → many-to-many</li>
            <li><code>OneToOneField</code> → one-to-one</li>
        </ul>
    </ul>

<pre><code class="language-py line-numbers">class Comment(models.Model):
    post = models.ForeignKey(Post, on_delete=models.CASCADE)
    text = models.TextField()
</code></pre>

    <ul>
        <li>Query related objects:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
comments = post.comment_set.all()
</code></pre>

    <br/><br/>


    <li><b>Advanced ORM Features</b></li>
    <br/>
    <ul>
        <li>Django ORM also supports:
            <ul>
                <li><b>aggregation</b> (Sum, Avg, Min, Max)</li>
                <li><b>annotations</b></li>
                <li><b>prefetch_related</b> and <b>select_related</b> for performance</li>
                <li><b>raw SQL</b> when needed</li>
            </ul>
        </li>
    </ul>

<pre><code class="language-py line-numbers">from django.db.models import Count

Post.objects.annotate(comment_count=Count("comment"))
</code></pre>

    <br/><br/>


    <li><b>Using Django Shell for ORM Testing</b></li>
    <br/>
    <ul>
        <li>Highly recommended for experimentation:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py shell
</code></pre>

<pre><code class="language-py line-numbers">from blog.models import Post

Post.objects.all()
Post.objects.create(title="New", body="Hello ORM!")
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-model-queries">Models Making Queries in Django (The Django QuerySet API)</h3>
<ol>

    <li><b>Introduction</b></li>
    <br/>
    <ul>
        <li>In Django, every model class comes with a powerful built-in interface called the <u>QuerySet API</u>.</li>
        <br/>
        <li>This lets you perform:
            <ul>
                <li>SELECT</li>
                <li>INSERT</li>
                <li>UPDATE</li>
                <li>DELETE</li>
            </ul>
           operations without writing SQL.</li>
        <br/>
        <li>You "make queries" using:
            <ul>
                <li><code>YourModel.objects</code></li>
                <li>or QuerySet methods → <code>.all()</code>, <code>.filter()</code>, <code>.get()</code>, etc.</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Prerequisite: Example Model</b></li>
    <br/>
    <ul>
        <li>We use this simple model for examples:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return self.title
</code></pre>

    <ul>
        <li>Don't forget to run migrations inside a virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
python3 manage.py migrate
</code></pre>

    <br/><br/>


    <li><b>Using the Django Shell for Testing Queries</b></li>
    <br/>
    <ul>
        <li>Querying is easiest to learn by experimenting inside the interactive shell:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py shell
</code></pre>

    <br/><br/>


    <li><b>Creating Objects (INSERT)</b></li>
    <br/>
    <ul>
        <li>You can create objects with <code>.create()</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.create(title="Hello", body="First post!")
</code></pre>

    <br/>

    <ul>
        <li>Or manually instantiate then save:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post(title="My Title", body="Some text")
post.save()
</code></pre>

    <br/><br/>


    <li><b>Retrieve all objects</b></li>

<pre><code class="language-py line-numbers">Post.objects.all()
</code></pre>

    <ul>
        <li>Returns a QuerySet of all posts.</li>
    </ul>

    <br/><br/>


    <li><b>Retrieve one object</b> (must match exactly one row):</li>

<pre><code class="language-py line-numbers">Post.objects.get(id=1)
</code></pre>

    <ul>
        <li>Raises <code>DoesNotExist</code> if not found.</li>
        <li>Raises <code>MultipleObjectsReturned</code> if more than one result matches.</li>
    </ul>

    <br/><br/>


    <li><b>Filtering Results (WHERE Conditions)</b></li>
    <br/>
    <ul>
        <li>Use <code>.filter()</code> for flexible queries (returns QuerySet):</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title="Hello")
Post.objects.filter(title__icontains="hello")
Post.objects.filter(id__gt=3)     # greater than
Post.objects.filter(id__lte=10)   # less or equal
Post.objects.filter(title__startswith="Django")
Post.objects.filter(title__in=["Hello", "Hi"])
</code></pre>

    <ul>
        <li>The pattern <code>field__lookup=value</code> implements SQL-like conditions.</li>
    </ul>

    <br/><br/>


    <li><b>Excluding Results</b></li>
    <br/>
    <ul>
        <li>Use <code>.exclude()</code> for NOT queries:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.exclude(title__icontains="draft")
</code></pre>

    <br/><br/>


    <li><b>Ordering Results (ORDER BY)</b></li>
<pre><code class="language-py line-numbers">Post.objects.order_by("created_at")     # ascending
Post.objects.order_by("-created_at")    # descending
</code></pre>

    <br/><br/>


    <li><b>Updating Objects (UPDATE)</b></li>
    <br/>
    <ul>
        <li>Option 1: update a single object:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
post.title = "Updated Title"
post.save()
</code></pre>

    <br/>

    <ul>
        <li>Option 2: bulk update:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title__icontains="hello").update(body="Updated text")
</code></pre>

    <ul>
        <li>Executes a single SQL UPDATE statement.</li>
    </ul>

    <br/><br/>


    <li><b>Deleting Objects (DELETE)</b></li>
    <br/>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
post.delete()
</code></pre>

    <ul>
        <li>Delete multiple:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title__icontains="old").delete()
</code></pre>

    <br/><br/>


    <li><b>Useful QuerySet Methods</b></li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Method</th>
                <th>Example</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>.first()</code></td>
                <td><code>Post.objects.first()</code></td>
                <td>First object or None</td>
            </tr>
            <tr>
                <td><code>.last()</code></td>
                <td><code>Post.objects.last()</code></td>
                <td>Last object or None</td>
            </tr>
            <tr>
                <td><code>.count()</code></td>
                <td><code>Post.objects.count()</code></td>
                <td>Fast COUNT(*) query</td>
            </tr>
            <tr>
                <td><code>.exists()</code></td>
                <td><code>Post.objects.filter(...).exists()</code></td>
                <td>Returns True/False if results exist</td>
            </tr>
            <tr>
                <td><code>.values()</code></td>
                <td><code>Post.objects.values("title")</code></td>
                <td>Returns dictionaries instead of model instances</td>
            </tr>
            <tr>
                <td><code>.values_list()</code></td>
                <td><code>Post.objects.values_list("id", "title")</code></td>
                <td>Returns tuples</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Relationships and Related Queries</b></li>
    <br/>
    <ul>
        <li>If your app has relationships, Django simplifies queries across them.</li>
    </ul>

<pre><code class="language-py line-numbers">class Comment(models.Model):
    post = models.ForeignKey(Post, on_delete=models.CASCADE)
    text = models.TextField()
</code></pre>

    <ul>
        <li>Query comments of a post:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
post.comment_set.all()
</code></pre>

    <ul>
        <li>Reverse lookup for many-to-many and one-to-one relationships works similarly.</li>
    </ul>

    <br/><br/>


    <li><b>AND logic:</b> (default behavior)</li>

<pre><code class="language-py line-numbers">Post.objects.filter(title__icontains="django", id__gt=5)
</code></pre>

    <br/>

    <li><b>OR logic:</b> using <code>Q</code> objects</li>

<pre><code class="language-py line-numbers">from django.db.models import Q

Post.objects.filter(
    Q(title__icontains="django") | Q(body__icontains="django")
)
</code></pre>

    <br/><br/>


    <li><b>Aggregation (SUM, AVG, COUNT)</b></li>
<pre><code class="language-py line-numbers">from django.db.models import Count

Post.objects.aggregate(total_posts=Count("id"))
</code></pre>

    <br/><br/>


    <li><b>Prefetching Related Data (Performance Optimization)</b></li>
<pre><code class="language-py line-numbers">Post.objects.select_related()      # for ForeignKey/OneToOne
Post.objects.prefetch_related("comment_set")  # for reverse/M2M
</code></pre>

    <ul>
        <li>These avoid unnecessary database queries.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-model-aggregation">Models Aggregation in Django (SUM, AVG, COUNT, MAX, MIN, etc.)</h3>
<ol>

    <li><b>What Is Aggregation?</b></li>
    <br/>
    <ul>
        <li><b>Aggregation</b> in Django means performing operations over a set of rows and returning a <u>single value</u>, such as:
            <ul>
                <li>COUNT</li>
                <li>SUM</li>
                <li>AVG</li>
                <li>MAX</li>
                <li>MIN</li>
            </ul>
        </li>
        <br/>
        <li>Django provides aggregation tools inside the ORM so you never need to write SQL manually.</li>
        <br/>
        <li>Aggregations use the <code>aggregate()</code> method and built-in functions from <code>django.db.models</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Example Model for This Chapter</b></li>
<pre><code class="language-py line-numbers"># shop/models.py

from django.db import models

class Product(models.Model):
    name = models.CharField(max_length=200)
    price = models.DecimalField(max_digits=8, decimal_places=2)
    stock = models.IntegerField()
    rating = models.FloatField()
</code></pre>

    <ul>
        <li>Make migrations inside a virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
python3 manage.py migrate
</code></pre>

    <br/><br/>


    <li><b>Using <code>aggregate()</code></b></li>
    <br/>
    <ul>
        <li>The <code>aggregate()</code> method sends a single SQL query that returns a dictionary.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db.models import Count, Sum, Avg, Max, Min

Product.objects.aggregate(total_count=Count("id"))
</code></pre>

    <ul>
        <li>Returns:</li>
    </ul>

<pre><code class="language-py line-numbers">{'total_count': 42}
</code></pre>

    <br/><br/>


    <li><b>COUNT Aggregation</b></li>
<pre><code class="language-py line-numbers">from django.db.models import Count

Product.objects.aggregate(total_products=Count("id"))
</code></pre>

    <ul>
        <li>Equivalent to SQL: <code>SELECT COUNT(*) FROM product</code>.</li>
    </ul>

    <br/><br/>


    <li><b>SUM Aggregation</b></li>
<pre><code class="language-py line-numbers">Product.objects.aggregate(total_stock=Sum("stock"))
</code></pre>

    <ul>
        <li>Returns sum of stock across all products.</li>
    </ul>

    <br/><br/>


    <li><b>AVG Aggregation</b></li>
<pre><code class="language-py line-numbers">Product.objects.aggregate(average_price=Avg("price"))
</code></pre>

    <br/><br/>


    <li><b>MAX and MIN Aggregation</b></li>
<pre><code class="language-py line-numbers">Product.objects.aggregate(
    highest_price=Max("price"),
    lowest_price=Min("price")
)
</code></pre>

    <br/><br/>


    <li><b>Multiple Aggregations at Once</b></li>
<pre><code class="language-py line-numbers">Product.objects.aggregate(
    avg_price=Avg("price"),
    total_stock=Sum("stock"),
    max_rating=Max("rating")
)
</code></pre>

    <ul>
        <li>Runs a single SQL query, not multiple.</li>
    </ul>

    <br/><br/>


    <li><b>Using Expressions (F and ExpressionWrapper)</b></li>
<pre><code class="language-py line-numbers">from django.db.models import F, Sum

Product.objects.aggregate(
    total_value=Sum(F("price") * F("stock"))
)
</code></pre>

    <ul>
        <li>Calculates inventory total value (price × stock).</li>
        <li>Django converts expression into SQL automatically.</li>
    </ul>

    <br/><br/>


    <li><b>Aggregating With Filters (Filter then Aggregate)</b></li>
<pre><code class="language-py line-numbers">Product.objects
    .filter(rating__gte=4.5)
    .aggregate(high_rated_count=Count("id"))
</code></pre>

    <ul>
        <li>Useful for analytics dashboards.</li>
    </ul>

    <br/><br/>


    <li><b>Aggregation With Annotation (Per-row Aggregation)</b></li>
    <br/>
    <ul>
        <li><code>annotate()</code> computes aggregated values <u>per object</u> rather than for the whole table.</li>
        <br/>
        <li>This is powerful for grouping.</li>
    </ul>

    <br/><br/>


    <li><b>Example: Total orders per product</b></li>

<pre><code class="language-py line-numbers">from django.db.models import Sum

Product.objects.annotate(
    order_quantity=Sum("order__quantity")
)
</code></pre>

    <ul>
        <li>This gives each product an additional attribute <code>order_quantity</code>.</li>
    </ul>

    <br/><br/>


    <li><b>Grouping Data (Using <code>values()</code> + <code>annotate()</code>)</b></li>
    <br/>
    <ul>
        <li>Similar to SQL <code>GROUP BY</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">Product.objects.values("category").annotate(
    avg_price=Avg("price"),
    count=Count("id")
)
</code></pre>

    <ul>
        <li>Returns one row per category.</li>
    </ul>

    <br/><br/>


    <li><b>Distinct Aggregation</b></li>
    <br/>
    <ul>
        <li>You can count distinct values using <code>distinct=True</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">Product.objects.aggregate(
    unique_ratings=Count("rating", distinct=True)
)
</code></pre>

    <br/><br/>


    <li><b>Using Aggregation With Related Models</b></li>
<pre><code class="language-py line-numbers"># ForeignKey: Product → Category

Category.objects.annotate(
    total_products=Count("product")
)
</code></pre>

    <ul>
        <li>Adds a <code>total_products</code> field to each category.</li>
    </ul>

    <br/><br/>


    <li><b>Ordering Aggregated Results</b></li>
<pre><code class="language-py line-numbers">Category.objects.annotate(
    total_products=Count("product")
).order_by("-total_products")
</code></pre>

    <ul>
        <li>Sort categories by number of products.</li>
    </ul>

    <br/><br/>


    <li><b>Handling Null Values in Aggregation</b></li>
<pre><code class="language-py line-numbers">Product.objects.aggregate(
    avg_rating=Avg("rating")
)
</code></pre>

    <ul>
        <li>Django ignores <code>NULL</code> values automatically.</li>
    </ul>

    <br/><br/>


    <li><b>Raw SQL Equivalent</b></li>
    <br/>
    <ul>
        <li>Django translates aggregation into SQL such as:</li>
    </ul>

<pre><code class="language-sql line-numbers">SELECT AVG(price) AS avg_price FROM shop_product;
</code></pre>

    <ul>
        <li>This is handled by the ORM for you.</li>
    </ul>

    <br/>
</ol>
<br/>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-model-research">Models Research — Basic Searching in Django</h3>
<ol>

    <li><b>What Does It Mean?</b></li>
    <br/>
    <ul>
        <li>In this context, "Models Research" means <u>searching through your Django model data</u>.</li>
        <br/>
        <li>You often search when users type something into a search bar:
            <ul>
                <li>search blog posts</li>
                <li>filter products</li>
                <li>find users</li>
                <li>search comments</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Example Model for Demonstration</b></li>
<pre><code class="language-py line-numbers">from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return self.title
</code></pre>

    <br/><br/>


    <li><b>Basic Searching With <code>filter()</code></b></li>
    <br/>
    <ul>
        <li>The simplest form of searching uses <code>filter()</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title="Hello World")
</code></pre>

    <ul>
        <li>Django translates this into an SQL <code>WHERE</code> query automatically.</li>
    </ul>
    <br/><br/>


    <li><b>Useful Field Lookups for Searching</b></li>
    <br/>
    <ul>
        <li>Django provides many flexible "lookup" keywords:</li>
    </ul>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Lookup</th>
                <th>Example</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>icontains</code></td>
                <td><code>title__icontains="django"</code></td>
                <td>Case-insensitive substring search (very commonly used)</td>
            </tr>
            <tr>
                <td><code>contains</code></td>
                <td><code>title__contains="Django"</code></td>
                <td>Case-sensitive substring search</td>
            </tr>
            <tr>
                <td><code>startswith</code></td>
                <td><code>title__startswith="Hello"</code></td>
                <td>Search by prefix</td>
            </tr>
            <tr>
                <td><code>iexact</code></td>
                <td><code>title__iexact="hello"</code></td>
                <td>Case-insensitive exact match</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Using <code>Q</code> Objects for OR Conditions</b></li>
    <br/>
    <ul>
        <li>By default, multiple conditions in <code>filter()</code> use <b>AND</b>.</li>
        <li>To create an <b>OR</b> search, use <code>Q</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db.models import Q

Post.objects.filter(
    Q(title__icontains="django") | Q(body__icontains="django")
)
</code></pre>

    <ul>
        <li>This finds posts where either field contains the word "django".</li>
    </ul>
    <br/><br/>


    <li><b>Searching Across Multiple Fields</b></li>
    <br/>
    <ul>
        <li>A common search bar pattern:</li>
        <li>Query both <code>title</code> and <code>body</code> with the same user input.</li>
    </ul>

<pre><code class="language-py line-numbers">query = "hello"

Post.objects.filter(
    Q(title__icontains=query) |
    Q(body__icontains=query)
)
</code></pre>

    <ul>
        <li>This is the simplest “multi-field search”.</li>
    </ul>
    <br/><br/>


    <li><b>Handling Search Input From a Form</b></li>
<pre><code class="language-html line-numbers">&lt;form method="get"&gt;
    &lt;input type="text" name="q" placeholder="Search..." /&gt;
    &lt;button type="submit"&gt;Go&lt;/button&gt;
&lt;/form&gt;
</code></pre>

    <ul>
        <li>Then in the view:</li>
    </ul>

<pre><code class="language-py line-numbers">query = request.GET.get("q", "")

results = Post.objects.filter(
    Q(title__icontains=query) |
    Q(body__icontains=query)
)
</code></pre>

    <br/><br/>


    <li><b>Is SQL Injection Possible?</b></li>
    <br/>
    <ul>
        <li>No — Django ORM always escapes user input safely.</li>
        <li>This is safe even if the user types weird characters:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title__icontains=request.GET.get("q"))
</code></pre>

    <br/><br/>


    <li><b>Displaying Simple Search Results</b></li>
<pre><code class="language-html line-numbers">&lt;h2&gt;Results for "{{ q }}"&lt;/h2&gt;

{% for post in results %}
    &lt;div&gt;
        &lt;h3&gt;{{ post.title }}&lt;/h3&gt;
        &lt;p&gt;{{ post.body|truncatechars:150 }}&lt;/p&gt;
    &lt;/div&gt;
{% empty %}
    &lt;p&gt;No matching posts found.&lt;/p&gt;
{% endfor %}
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-model-managers">Model Managers in Django</h3>
<ol>

    <li><b>What Is a Model Manager?</b></li>
    <br/>
    <ul>
        <li>Every Django model has at least one <u>Manager</u> which acts as the main interface between your model and the database.</li>
        <br/>
        <li>The default manager for every model is <code>objects</code>.
            <br/>Example:
            <pre><code class="language-py">Post.objects.all()</code></pre>
        </li>
    </ul>
    <br/><br/>


    <li><b>Default Manager: <code>objects</code></b></li>
    <br/>
    <ul>
        <li>Every model automatically gets:</li>
    </ul>

<pre><code class="language-py line-numbers">class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()

# Default manager
Post.objects.all()
</code></pre>

    <ul>
        <li>But you can <u>add additional managers</u> or <u>replace the default</u>.</li>
    </ul>

    <br/><br/>


    <li><b>Creating a Custom Manager</b></li>
<pre><code class="language-py line-numbers">from django.db import models

class PublishedManager(models.Manager):
    def get_queryset(self):
        return super().get_queryset().filter(is_published=True)
</code></pre>

    <ul>
        <li>This manager redefines <code>get_queryset()</code> to show only published posts.</li>
    </ul>

    <br/>
    <br/>

    <ul>
        <li>Attach it to your model:</li>
    </ul>

<pre><code class="language-py line-numbers">class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    is_published = models.BooleanField(default=False)

    objects = models.Manager()           # default manager
    published = PublishedManager()       # custom manager
</code></pre>

    <br/>

    <ul>
        <li>Using the managers:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.all()        # returns all posts
Post.published.all()      # returns only published posts
</code></pre>

    <br/><br/>


    <li><b>Adding Helper Methods to a Manager</b></li>
    <br/>
    <ul>
        <li>You can define custom helper methods to simplify complex queries.</li>
    </ul>

<pre><code class="language-py line-numbers">class PostManager(models.Manager):
    def recent(self):
        return self.get_queryset().order_by("-created_at")[:5]

class Post(models.Model):
    ...
    objects = PostManager()
</code></pre>

    <ul>
        <li>Use it like:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.recent()</code></pre>

    <br/><br/>


    <li><b>Multiple Managers on One Model</b></li>
<pre><code class="language-py line-numbers">class Post(models.Model):
    ...
    objects = models.Manager()           # default
    published = PublishedManager()       # custom
    recent = PostManager()               # custom
</code></pre>

    <ul>
        <li>You can use:</li>
    </ul>
<pre><code class="language-py">Post.published.all()</code></pre>
<pre><code class="language-py">Post.recent.recent()</code></pre>

    <br/><br/>


    <li><b>Using Managers With ForeignKeys (related_name)</b></li>
<pre><code class="language-py line-numbers">class Comment(models.Model):
    post = models.ForeignKey(Post, on_delete=models.CASCADE, related_name="comments")
    text = models.TextField()
</code></pre>

    <ul>
        <li>Django automatically creates a related manager:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
post.comments.all()               # reverse manager
</code></pre>

    <ul>
        <li>This is used heavily in relationships.</li>
    </ul>

    <br/><br/>


    <li><b>The Modern Way: Custom QuerySet + Manager</b></li>
    <br/>

    <ul>
        <li><b>Step 1 — Create a custom QuerySet</b></li>

    <pre><code class="language-py line-numbers">class PostQuerySet(models.QuerySet):
        def published(self):
            return self.filter(is_published=True)

        def recent(self):
            return self.order_by("-created_at")[:5]
    </code></pre>

        <br/>

        <li><b>Step 2 — Attach it to a Manager</b></li>

    <pre><code class="language-py line-numbers">class PostManager(models.Manager):
        def get_queryset(self):
            return PostQuerySet(self.model, using=self._db)

        def published(self):
            return self.get_queryset().published()

        def recent(self):
            return self.get_queryset().recent()
    </code></pre>

        <br/>

        <li><b>Step 3 — Attach Manager to Model</b></li>

    <pre><code class="language-py line-numbers">class Post(models.Model):
        ...
        objects = PostManager()
    </code></pre>

        <br/>

        <ul>
            <li>Now you can chain methods:</li>
        </ul>

    <pre><code class="language-py line-numbers">Post.objects.published().recent()</code></pre>

        <ul>
            <li>This is much more powerful than plain Managers.</li>
        </ul>
    </ul>

    <br/><br/>


    <li><b>Replacing the Default Manager</b></li>
    <br/>
    <ul>
        <li>Sometimes you want the default QuerySet to always be filtered.</li>
        <li>Example: hide soft-deleted items by default.</li>
    </ul>

<pre><code class="language-py line-numbers">class ActiveManager(models.Manager):
    def get_queryset(self):
        return super().get_queryset().filter(is_deleted=False)

class User(models.Model):
    ...
    objects = ActiveManager()  # replaces default manager
</code></pre>

    <ul>
        <li>Now <code>User.objects.all()</code> hides deleted entries.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-raw-sql">Performing Raw SQL Queries in Django Models</h3>
<ol>

    <li><b>Why Use Raw SQL in Django?</b></li>
    <br/>
    <ul>
        <li>Django’s ORM is very powerful, but sometimes you need direct SQL because:</li>
        <ul>
            <li>a query is too complex for ORM</li>
            <li>you want database-specific optimization</li>
            <li>you want to call database functions or stored procedures</li>
            <li>you need full manual control over SQL</li>
        </ul>
        <br/>
        <li>Django allows raw SQL while keeping models safe and integrated.</li>
    </ul>
    <br/><br/>


    <li><b>Using <code>.raw()</code> for SELECT Queries</b></li>
    <br/>
    <ul>
        <li>Every model gets <code>Model.objects.raw()</code> for raw <code>SELECT</code> statements.</li>
        <li>Django will map the result rows into model instances.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py
from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
</code></pre>

<pre><code class="language-py line-numbers">posts = Post.objects.raw("SELECT * FROM blog_post")

for p in posts:
    print(p.title)
</code></pre>

    <ul>
        <li>The SQL must return all fields that the model requires.</li>
        <li>You can also select additional fields — Django will ignore them.</li>
    </ul>
    <br/><br/>


    <li><b>Using Parameters (Avoid SQL Injection!)</b></li>
    <br/>
    <ul>
        <li>Always use placeholders instead of string concatenation.</li>
        <li>Django uses the database's native param syntax (usually <code>%s</code>).</li>
    </ul>

<pre><code class="language-py line-numbers">title = "Hello"
posts = Post.objects.raw(
    "SELECT * FROM blog_post WHERE title = %s",
    [title]
)
</code></pre>

    <ul>
        <li>This is safe and recommended.</li>
    </ul>
    <br/><br/>


    <li><b>Executing Non-SELECT Queries with <code>connection.cursor()</code></b></li>
    <br/>
    <ul>
        <li>To execute <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, or custom SQL, use <code>cursor()</code>.</li>
        <li>You import it from:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import connection
</code></pre>

    <br/>

    <li><b>Example: Manual INSERT</b></li>

<pre><code class="language-py line-numbers">from django.db import connection

def insert_post(title, body):
    with connection.cursor() as cursor:
        cursor.execute(
            "INSERT INTO blog_post (title, body) VALUES (%s, %s)",
            [title, body]
        )
</code></pre>

    <br/>

    <li><b>Example: Manual UPDATE</b></li>

<pre><code class="language-py line-numbers">with connection.cursor() as cursor:
    cursor.execute(
        "UPDATE blog_post SET title = %s WHERE id = %s",
        ["New Title", 1]
    )
</code></pre>

    <br/>

    <li><b>Example: Manual DELETE</b></li>

<pre><code class="language-py line-numbers">with connection.cursor() as cursor:
    cursor.execute("DELETE FROM blog_post WHERE id = %s", [1])
</code></pre>

    <br/><br/>


    <li><b>Fetching Results Manually</b></li>
    <br/>
    <ul>
        <li>cursor can fetch rows manually:</li>
    </ul>

<pre><code class="language-py line-numbers">with connection.cursor() as cursor:
    cursor.execute("SELECT id, title FROM blog_post")
    rows = cursor.fetchall()

for row in rows:
    print(row)   # (id, title)
</code></pre>

    <br/><br/>


    <li><b>Using <code>dictfetchall()</code> for Dictionary Results</b></li>
    <br/>
    <ul>
        <li>Django doesn’t ship one, but the docs recommend writing your own helper.</li>
    </ul>

<pre><code class="language-py line-numbers">def dictfetchall(cursor):
    columns = [col[0] for col in cursor.description]
    return [
        dict(zip(columns, row))
        for row in cursor.fetchall()
    ]
</code></pre>

<pre><code class="language-py line-numbers">with connection.cursor() as cursor:
    cursor.execute("SELECT id, title FROM blog_post")
    results = dictfetchall(cursor)

for item in results:
    print(item["id"], item["title"])
</code></pre>

    <br/><br/>


    <li><b>Raw Query With Model Mapping + Extra Fields</b></li>
    <br/>
    <ul>
        <li>Django ignores extra fields unless you alias one of them as <code>pk</code> (primary key) with <code>AS</code>.</li>
    </ul>

<pre><code class="language-py line-numbers">posts = Post.objects.raw(
    "SELECT id, title, body, NOW() as retrieved_at FROM blog_post"
)

for p in posts:
    print(p.title)              # model field
    print(p.retrieved_at)       # extra attribute
</code></pre>

    <ul>
        <li>Django attaches unknown columns as attributes.</li>
    </ul>

    <br/><br/>


    <li><b>Running Raw SQL on a Specific Database (Multiple DBs)</b></li>
    <br/>

<pre><code class="language-py line-numbers">from django.db import connections

with connections["analytics"].cursor() as cursor:
    cursor.execute("SELECT COUNT(*) FROM stats_table")
    result = cursor.fetchone()
</code></pre>

    <br/><br/>


    <li><b>Using <code>Model.objects.raw()</code> With Complex Joins</b></li>
    <br/>

<pre><code class="language-py line-numbers">posts = Post.objects.raw("""
    SELECT p.*, COUNT(c.id) AS comment_count
    FROM blog_post p
    LEFT JOIN blog_comment c ON p.id = c.post_id
    GROUP BY p.id
""")
</code></pre>

    <ul>
        <li>You get model instances + an extra attribute <code>comment_count</code>.</li>
    </ul>

    <br/><br/><br/>


    <li><b>Warnings When Using Raw SQL</b></li>
    <br/>
    <ul>
        <li><b>NEVER</b> manually concatenate SQL strings — always use placeholders.</li>
        <br/>
        <li>Raw SQL bypasses type checking.</li>
        <br/>
        <li>Raw SQL bypasses database abstraction (not portable across databases).</li>
        <br/>
        <li>Raw <code>UPDATE</code> / <code>DELETE</code> do NOT trigger model signals (<code>pre_save</code>, <code>post_delete</code>, etc.).</li>
        <br/>
        <li>Raw queries do NOT use Django’s model validation.</li>
        <br/>
        <li>Retrieving model instances from <code>.raw()</code> bypasses QuerySet optimizations.</li>
    </ul>

    <br/><br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li>Django supports raw SQL through <code>.raw()</code> and <code>connection.cursor()</code>.</li>
        <br/>
        <li><code>.raw()</code> is used for <code>SELECT</code> queries that map to model instances.</li>
        <br/>
        <li><code>cursor()</code> is used for <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, and custom SQL.</li>
        <br/>
        <li>Query parameters should always use placeholders to avoid SQL injection.</li>
        <br/>
        <li>Raw SQL is powerful but should be used sparingly — prefer ORM when possible.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-transactions">Database Transactions in Django Models</h3>
<ol>

    <li><b>What Are Database Transactions?</b></li>
    <br/>
    <ul>
        <li>A <u>transaction</u> is a group of database operations that behave like a single unit.</li>
        <br/>
        <li>If any operation fails, the entire group is rolled back.</li>
        <br/>
        <li>Transactions guarantee the famous ACID properties:
            <ul>
                <li><u>A</u>tomicity – all or nothing</li>
                <li><u>C</u>onsistency – DB stays valid</li>
                <li><u>I</u>solation – transactions don’t interfere</li>
                <li><u>D</u>urability – committed data is saved</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Django’s Transaction API Overview</b></li>
    <br/>
    <ul>
        <li>Provided by <code>django.db.transaction</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import transaction
</code></pre>

    <ul>
        <li>Tools include:
            <ul>
                <li><code>transaction.atomic</code></li>
                <li><code>transaction.on_commit</code></li>
                <li><code>transaction.set_rollback()</code></li>
                <li><code>transaction.set_autocommit()</code></li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Using <code>transaction.atomic</code> (The Most Important Tool)</b></li>
    <br/>
    <ul>
        <li><code>atomic</code> makes a block of code run inside a single transaction.</li>
        <li>If an exception occurs, everything is <u>rolled back</u>.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import transaction

def create_order(user, product, qty):
    with transaction.atomic():
        order = Order.objects.create(user=user)
        OrderItem.objects.create(order=order, product=product, quantity=qty)
        product.stock -= qty
        product.save()
</code></pre>

    <ul>
        <li>If <code>product.save()</code> fails, <code>Order</code> and <code>OrderItem</code> are rolled back.</li>
    </ul>

    <br/><br/>


    <li><b>Using <code>atomic</code> as a Decorator</b></li>
<pre><code class="language-py line-numbers">@transaction.atomic
def add_post(title, body):
    Post.objects.create(title=title, body=body)
</code></pre>

    <br/><br/>


    <li><b>Nested <code>atomic()</code> Blocks</b></li>
    <br/>
    <ul>
        <li>Django uses <u>savepoints</u> to allow partial rollbacks inside a larger transaction.</li>
    </ul>

<pre><code class="language-py line-numbers">with transaction.atomic():
    # outer transaction
    Post.objects.create(title="Main")

    try:
        with transaction.atomic():
            # inner savepoint
            Comment.objects.create(text="Inner comment")
            raise ValueError("fail inner")   # only inner part rolls back
    except:
        pass

    Post.objects.create(title="Still saved")
</code></pre>

    <ul>
        <li>Only the inner block rolls back.</li>
        <li>The outer transaction continues.</li>
    </ul>

    <br/><br/>


    <li><b>Manually Controlling Savepoints</b></li>
<pre><code class="language-py line-numbers">sid = transaction.savepoint()
try:
    Product.objects.create(name="ABC")
    transaction.savepoint_commit(sid)
except:
    transaction.savepoint_rollback(sid)
</code></pre>

    <ul>
        <li>Rarely used — <code>atomic</code> is preferred.</li>
    </ul>

    <br/><br/>


    <li><b>Using <code>transaction.on_commit()</code></b></li>
    <br/>
    <ul>
        <li>Runs a callback <u>only after the transaction successfully commits</u>.</li>
        <li>Useful for:
            <ul>
                <li>sending emails</li>
                <li>queuing background tasks</li>
                <li>logging</li>
            </ul>
        </li>
        <li>Prevents actions from happening if a rollback occurs.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import transaction

@transaction.atomic
def register_user(user):
    user.save()

    transaction.on_commit(lambda: print("User created:", user.id))
</code></pre>

    <ul>
        <li>The print happens only if commit succeeds.</li>
    </ul>

    <br/><br/>


    <li><b>Autocommit Mode (Default)</b></li>
    <br/>
    <ul>
        <li>Django defaults to <code>autocommit=True</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import transaction

transaction.get_autocommit()   # True
</code></pre>

    <ul>
        <li>Each ORM call executes its own database query automatically.</li>
        <li>No transaction is kept open unless you use <code>atomic()</code>.</li>
    </ul>

    <br/><br/>


    <li><b>Disabling Autocommit (Advanced)</b></li>
    <br/>
    <ul>
        <li>You can disable autocommit, but it is rarely recommended.</li>
    </ul>

<pre><code class="language-py line-numbers">transaction.set_autocommit(False)

try:
    Product.objects.create(name="X")
    transaction.commit()
except:
    transaction.rollback()
</code></pre>

    <ul>
        <li>Use <code>atomic()</code> instead of this manual approach.</li>
    </ul>

    <br/><br/>


    <li><b>Marking a Transaction for Rollback</b></li>
    <br/>
    <ul>
        <li>You can force a rollback:</li>
    </ul>

<pre><code class="language-py line-numbers">with transaction.atomic():
    transaction.set_rollback(True)
</code></pre>

    <ul>
        <li>This simulates an error and causes the block to roll back.</li>
    </ul>

    <br/><br/>


    <li><b>Transactions in Views</b></li>
<pre><code class="language-py line-numbers">from django.db import transaction
from django.http import HttpResponse

@transaction.atomic
def my_view(request):
    Order.objects.create(...)
    return HttpResponse("Order placed!")
</code></pre>

    <ul>
        <li>Any error → rollback.</li>
    </ul>

    <br/><br/>


    <li><b>Handling Integrity Errors</b></li>
    <br/>
    <ul>
        <li>Violating database constraints raises <code>IntegrityError</code>.</li>
        <li>Example: duplicate unique fields.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import IntegrityError, transaction

try:
    with transaction.atomic():
        User.objects.create(username="same")
except IntegrityError:
    print("Duplicate username!")
</code></pre>

    <br/><br/>


    <li><b>Common Use Cases for Transactions</b></li>
    <ul>
            <li>financial operations (payments, transfers)</li>
            <li>inventory updates (e-commerce)</li>
            <li>multi-model creation (order + order items)</li>
            <li>batch updates</li>
            <li>importing large CSV files</li>
            <li>ensuring data integrity on error</li>
    </ul>

    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li>Transactions ensure database consistency.</li>
        <li><code>atomic()</code> is the most important and safest transaction tool.</li>
        <li>Use nested <code>atomic()</code> for savepoints.</li>
        <li><code>on_commit()</code> is useful for emails, tasks, and side effects.</li>
        <li>Django defaults to autocommit mode, but <code>atomic</code> gives full control.</li>
        <li>Use transactions for any multi-step database operation.</li>
        <li>Never rely on partially written data — wrap in <code>atomic</code>.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-multiple-databases">Using Multiple Databases in Django Models</h3>
<ol>

    <li><b>Why Use Multiple Databases?</b></li>
    <br/>
    <ul>
        <li>Django supports using more than one database in a single project.</li>
        <br/>
        <li>Common reasons include:</li>
        <ul>
            <li>Read/Write splitting (master → write, replica → read)</li>
            <li>Using a separate database for specific apps (analytics, logs)</li>
            <li>Migrating from one DB to another</li>
            <li>Isolating legacy systems</li>
            <li>Sharding different data sets</li>
        </ul>
    </ul>
    <br/><br/>


    <li><b>Defining Multiple Databases in</b> <code>settings.py</code></b></li>
    <br/>
    <ul>
        <li>You configure multiple database connections under <code>DATABASES</code>:</li>
    </ul>

<pre><code class="language-python line-numbers"># mysite/settings.py

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    },
    "analytics": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "analytics.sqlite3",
    },
}
</code></pre>

    <ul>
        <li>The key (<code>"analytics"</code>) becomes the database alias used throughout Django.</li>
    </ul>

    <br/><br/>


    <li><b>Running Migrations on a Specific Database</b></li>
<pre><code class="language-bash line-numbers">python3 manage.py migrate --database=analytics
</code></pre>

    <ul>
        <li>By default, migrations run against the <code>default</code> database.</li>
        <li>You choose where each model's tables should reside.</li>
    </ul>

    <br/><br/>


    <li><b>Saving an Object to a Specific Database</b></li>
    <br/>
    <ul>
        <li>You can specify which DB to write to using <code>using()</code>.</li>
    </ul>

<pre><code class="language-python line-numbers">post = Post(title="Hello", body="World")
post.save(using="analytics")
</code></pre>

    <br/><br/>


    <li><b>Querying a Specific Database</b></li>
<pre><code class="language-python line-numbers">Post.objects.using("analytics").all()
</code></pre>

    <ul>
        <li>Queries do not mix records across databases.</li>
    </ul>

    <br/><br/>


    <li><b>Deleting From a Specific Database</b></li>
<pre><code class="language-python line-numbers">post.delete(using="analytics")
</code></pre>

    <br/><br/>


    <li><b>Using Multiple Databases with Raw SQL</b></li>
<pre><code class="language-python line-numbers">from django.db import connections

with connections["analytics"].cursor() as cursor:
    cursor.execute("SELECT COUNT(*) FROM blog_post")
    count = cursor.fetchone()
</code></pre>

    <br/><br/>


    <li><b>Database Routers (Core of Multi-DB Architecture)</b></li>
    <br/>
    <ul>
        <li>A <u>database router</u> decides:
            <ul>
                <li>which DB to read from</li>
                <li>which DB to write to</li>
                <li>where to migrate models</li>
                <li>whether relations between databases are allowed</li>
            </ul>
        </li>
        <br/>
        <li>You implement routers in a separate Python file.</li>
    </ul>

<pre><code class="language-python line-numbers"># mysite/dbrouters.py

class AnalyticsRouter:
    app_label = "analytics_app"

    def db_for_read(self, model, **hints):
        if model._meta.app_label == self.app_label:
            return "analytics"
        return None

    def db_for_write(self, model, **hints):
        if model._meta.app_label == self.app_label:
            return "analytics"
        return None

    def allow_migrate(self, db, app_label, model_name=None, **hints):
        if app_label == self.app_label:
            return db == "analytics"
        return None
</code></pre>

    <ul>
        <li>This router sends all models of <code>analytics_app</code> to the <code>"analytics"</code> DB.</li>
    </ul>

    <br/><br/>


    <li><b>Activating Database Routers</b></li>
<pre><code class="language-python line-numbers"># mysite/settings.py

DATABASE_ROUTERS = ["mysite.dbrouters.AnalyticsRouter"]
</code></pre>

    <ul>
        <li>You can register multiple router classes.</li>
    </ul>

    <br/><br/>


    <li><b>Models and App Label for Routing</b></li>
    <br/>
    <ul>
        <li>Routers rely heavily on identifying which app a model belongs to:</li>
    </ul>

<pre><code class="language-python line-numbers">class Report(models.Model):
    ...

    class Meta:
        app_label = "analytics_app"
</code></pre>

    <ul>
        <li>Every app has an <code>app_label</code> automatically assigned from its app folder name.</li>
    </ul>

    <br/><br/>


    <li><b>Reading from One DB and Writing to Another</b></li>
    <br/>
    <ul>
        <li>You may need to read from replicas and write to the master DB:</li>
    </ul>

<pre><code class="language-python line-numbers">replicas = ["replica1", "replica2"]

def random_read_db():
    import random
    return random.choice(replicas)

Post.objects.using(random_read_db()).filter(...)
</code></pre>

    <br/><br/>


    <li><b>Transaction Management With Multiple Databases</b></li>
    <br/>
    <ul>
        <li>Important: <b>transactions do not span multiple databases</b> automatically!</li>
        <li>You must explicitly use <code>atomic()</code> per database:</li>
    </ul>

<pre><code class="language-python line-numbers">from django.db import transaction

with transaction.atomic(using="default"):
    # write to default DB
    ...

with transaction.atomic(using="analytics"):
    # write to analytics DB
    ...
</code></pre>

    <ul>
        <li><b>No automatic distributed transactions</b> (i.e., no two-phase commit).</li>
    </ul>

    <br/><br/>


    <li><b>Cross-Database Foreign Keys Are Not Allowed</b></li>
    <br/>
    <ul>
        <li>Django <b>does not allow</b> foreign keys between databases.</li>
        <li>If needed, you must handle relations manually (using integer fields, UUIDs, etc.).</li>
        <li>Routers can be configured to reject cross-database relationships:</li>
    </ul>

<pre><code class="language-python line-numbers">def allow_relation(self, obj1, obj2, **hints):
    if obj1._state.db == obj2._state.db:
        return True
    return False
</code></pre>

    <br/><br/>


    <li><b>Using Different Databases for Different Django Apps</b></li>
    <br/>
    <ul>
        <li>Example: <code>shop</code> app uses <code>default</code>, <code>analytics_app</code> uses <code>analytics</code> DB.</li>
    </ul>

<pre><code class="language-python line-numbers">class ShopRouter:
    def db_for_read(self, model, **hints):
        if model._meta.app_label == "analytics_app":
            return "analytics"
        return "default"
</code></pre>

    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-settings-databases">Understanding the <code>DATABASES</code> Setting in Django</h3>
<ol>

    <li><b>What Is the</b> <code>DATABASES</code> <b>Setting?</b></li>
    <ul>
        <br/>
        <li>The <code>DATABASES</code> setting in <code>settings.py</code> tells Django:</li>
        <ul>
            <li>which database(s) to connect to</li>
            <li>what driver/engine to use</li>
            <li>what credentials and host to use</li>
            <li>how to manage transactions</li>
        </ul>
        <br/>
        <li>Every Django project must define at least one database — the <code>default</code> database.</li>
    </ul>
    <br/><br/>


    <li><b>The Basic Structure of <code>DATABASES</code></b></li>
    <br/>

<pre><code class="language-python line-numbers"># settings.py

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    }
}
</code></pre>

    <ul>
        <li><code>DATABASES</code> is a dictionary.</li>
        <li>Each key (e.g., <code>"default"</code>) is the alias of a database connection.</li>
        <li>Each value is a dictionary containing configuration details.</li>
    </ul>

    <br/><br/>


    <li><b>Supported Database Engines</b></li>
    <br/>
    <ul>
        <li>Django ships with built-in support for several databases.</li>
    </ul>
    <br/>

    <table>
        <thead>
            <tr>
                <th>ENGINE</th>
                <th>Description</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>django.db.backends.sqlite3</code></td>
                <td>Default, file-based database (good for development).</td>
                <td><code>"NAME": BASE_DIR / "db.sqlite3"</code></td>
            </tr>
            <tr>
                <td><code>django.db.backends.postgresql</code></td>
                <td>PostgreSQL (recommended for production).</td>
                <td><code>"ENGINE": "django.db.backends.postgresql"</code></td>
            </tr>
            <tr>
                <td><code>django.db.backends.mysql</code></td>
                <td>MySQL or MariaDB.</td>
                <td><code>"ENGINE": "django.db.backends.mysql"</code></td>
            </tr>
            <tr>
                <td><code>django.db.backends.oracle</code></td>
                <td>Oracle database.</td>
                <td><code>"ENGINE": "django.db.backends.oracle"</code></td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Full Configuration Example (PostgreSQL)</b></li>
<pre><code class="language-python line-numbers">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.postgresql",
        "NAME": "mydatabase",
        "USER": "myuser",
        "PASSWORD": "mypassword",
        "HOST": "localhost",
        "PORT": "5432",
    }
}
</code></pre>

    <ul>
        <li>This is typical for production setups.</li>
    </ul>

    <br/><br/>


    <li><b>Explanation of All Common Options</b></li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Option</th>
                <th>Description</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>ENGINE</code></td>
                <td>Database backend to use.</td>
                <td><code>"django.db.backends.postgresql"</code></td>
            </tr>
            <tr>
                <td><code>NAME</code></td>
                <td>Database name (or file path for SQLite).</td>
                <td><code>"mydb"</code></td>
            </tr>
            <tr>
                <td><code>USER</code></td>
                <td>Database username.</td>
                <td><code>"dbuser"</code></td>
            </tr>
            <tr>
                <td><code>PASSWORD</code></td>
                <td>Password for the database user.</td>
                <td><code>"secret"</code></td>
            </tr>
            <tr>
                <td><code>HOST</code></td>
                <td>Database host (IP or domain).</td>
                <td><code>"127.0.0.1"</code></td>
            </tr>
            <tr>
                <td><code>PORT</code></td>
                <td>Database port number.</td>
                <td><code>"5432"</code></td>
            </tr>
            <tr>
                <td><code>OPTIONS</code></td>
                <td>Advanced backend-specific options.</td>
                <td><code>{"sslmode": "require"}</code></td>
            </tr>
            <tr>
                <td><code>ATOMIC_REQUESTS</code></td>
                <td>If True: each HTTP request is wrapped in a DB transaction.</td>
                <td><code>True</code></td>
            </tr>
            <tr>
                <td><code>AUTOCOMMIT</code></td>
                <td>True = auto commit transactions (recommended).</td>
                <td><code>True</code></td>
            </tr>
            <tr>
                <td><code>CONN_MAX_AGE</code></td>
                <td>Persistent DB connections (seconds or <code>None</code>).</td>
                <td><code>60</code></td>
            </tr>
            <tr>
                <td><code>TEST</code></td>
                <td>Overrides DB settings for testing.</td>
                <td><code>{"NAME": "testdb"}</code></td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>SQLite Special Case</b></li>
    <br/>
    <ul>
        <li>SQLite does not require username, password, host, or port.</li>
        <li>You simply specify a file path:</li>
    </ul>

<pre><code class="language-python line-numbers">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    }
}
</code></pre>

    <br/><br/>


    <li><b>Using Environment Variables (Best Practice!)</b></li>
    <br/>
    <ul>
        <li>Never hardcode database passwords into source code.</li>
        <li>Use environment variables instead.</li>
    </ul>

<pre><code class="language-python line-numbers">import os

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.postgresql",
        "NAME": os.environ["DB_NAME"],
        "USER": os.environ["DB_USER"],
        "PASSWORD": os.environ["DB_PASSWORD"],
        "HOST": os.environ["DB_HOST"],
        "PORT": os.environ["DB_PORT"],
    }
}
</code></pre>

    <br/><br/>


    <li><b>Multiple Databases</b></li>
    <br/>
    <ul>
        <li>You can define more than one database by adding more entries:</li>
    </ul>

<pre><code class="language-python line-numbers">DATABASES = {
    "default": {...},
    "analytics": {...},
    "legacy": {...},
}
</code></pre>

    <ul>
        <li>Use with <code>using()</code> and database routers.</li>
    </ul>

    <br/><br/>


    <li><b>Database Transactions and</b> <code>ATOMIC_REQUESTS</code></li>
    <br/>
    <ul>
        <li>If you set this:</li>
    </ul>

<pre><code class="language-python line-numbers">DATABASES = {
    "default": {
        ...
        "ATOMIC_REQUESTS": True,
    }
}
</code></pre>

    <ul>
        <li>Django will wrap <u>each HTTP request</u> in a database transaction.</li>
        <li>Useful for:
            <ul>
                <li>financial systems</li>
                <li>complex write operations</li>
            </ul>
        </li>
        <li>But can be expensive for high-traffic apps.</li>
    </ul>

    <br/><br/>


    <li><b>Persistent Connections</b> (<code>CONN_MAX_AGE</code>)</li>
    <br/>
    <ul>
        <li>By default, Django closes DB connections after each request.</li>
        <li>To reuse the same connection:</li>
    </ul>

<pre><code class="language-python line-numbers">CONN_MAX_AGE = 60       # keep connection for one minute
# CONN_MAX_AGE = None   # keep forever
</code></pre>

    <ul>
        <li>Improves performance for PostgreSQL/MySQL.</li>
    </ul>

    <br/><br/>


    <li><b>Testing Database Settings</b></li>
    <br/>
    <ul>
        <li>You can override DB settings for unit tests:</li>
    </ul>

<pre><code class="language-python line-numbers">DATABASES = {
    "default": {
        ...
        "TEST": {
            "NAME": "test_mysite"
        }
    }
}
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-models-model">Understanding <code>models.Model</code> in Django</h3>
<ol>

    <li><b>What Is</b> <code>models.Model</code>?</li>
    <br/>
    <ul>
        <li><code>models.Model</code> is the <u>base class</u> for all Django models. Every model you write in Django must inherit from it:</li>
<pre><code class="language-python line-numbers">from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
</code></pre>
    </ul>

    <br/>
    <ul>
        <li>This single line <code>class Post(models.Model)</code> tells Django:
            <ul>
                <li>Create a table for this model.</li>
                <li>Create fields (columns) based on attributes.</li>
                <li>Generate an ORM API for queries and operations.</li>
                <li>Add metadata (model name, app name, primary key, etc.).</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>How</b> <code>models.Model</code> <b>Creates a Database Table</b></li>
    <br/>
    <ul>
        <li>Django observes all subclasses of <code>Model</code>.</li>
        <li>When you run:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
python3 -m django migrate
</code></pre>

    <ul>
        <li>Django generates SQL such as:</li>
    </ul>

<pre><code class="language-sql line-numbers">CREATE TABLE app_post (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title VARCHAR(200) NOT NULL,
    body TEXT NOT NULL
);
</code></pre>

    <ul>
        <li>The mapping is:
            <ul>
                <li><b>Python class → SQL table</b></li>
                <li><b>Model fields → SQL columns</b></li>
                <li><b>Model instances → rows</b></li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Automatic Primary Key Field (<code>id</code>)</b></li>
    <br/>
    <ul>
        <li>If you do not define a primary key, Django adds one automatically:</li>
    </ul>

<pre><code class="language-python line-numbers">id = models.AutoField(primary_key=True)
</code></pre>

    <ul>
        <li>This auto-id increments for each row.</li>
        <li>You may override it:</li>
    </ul>

<pre><code class="language-python line-numbers">class User(models.Model):
    user_id = models.UUIDField(primary_key=True)
    username = models.CharField(max_length=50)
</code></pre>

    <br/><br/>


    <li><b>Defining Fields (Columns)</b></li>
    <br/>
    <ul>
        <li>All fields are defined using <code>models.&lt;FieldType&gt;</code>.</li>
        <li>Examples:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=100)
    price = models.DecimalField(max_digits=8, decimal_places=2)
    available = models.BooleanField(default=True)
    created_at = models.DateTimeField(auto_now_add=True)
</code></pre>

    <ul>
        <li>Each field tells Django:
            <ul>
                <li>What SQL type to use (<code>VARCHAR</code>, <code>TEXT</code>, <code>INTEGER</code>, <code>DATE</code>, etc.)</li>
                <li>Whether it is nullable, unique, indexed</li>
                <li>Default values</li>
                <li>Constraints</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Model Instances = Rows</b></li>
    <br/>
    <ul>
        <li>You create a row by instantiating a model:</li>
    </ul>

<pre><code class="language-python line-numbers">p = Product(name="Laptop", price=999.99)
p.save()       # INSERT into database
</code></pre>

    <ul>
        <li>Saving calls an <code>INSERT</code> statement.</li>
        <li>Updating an instance calls an <code>UPDATE</code>.</li>
    </ul>

<pre><code class="language-python line-numbers">p.price = 899.99
p.save()       # UPDATE in database
</code></pre>

    <ul>
        <li>ORM tracks the row by primary key (<code>p.id</code>).</li>
    </ul>

    <br/><br/>


    <li><b>Deleting Rows</b></li>
<pre><code class="language-python line-numbers">p = Product.objects.get(id=1)
p.delete()   # DELETE FROM table
</code></pre>

    <br/><br/>


    <li><b>Meta Class: Controlling Table Options</b></li>
    <br/>
    <ul>
        <li>Each model can define a nested <code>Meta</code> class.</li>
        <li>This controls Django’s behavior for the table:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=100)
    price = models.DecimalField(max_digits=8, decimal_places=2)

    class Meta:
        db_table = "store_products"
        ordering = ["name"]
        verbose_name = "Product"
        verbose_name_plural = "Products"
        indexes = [
            models.Index(fields=["name"]),
        ]
</code></pre>

    <ul>
        <li><b>Common Meta options</b>:</li>
        <ul>
            <li><code>db_table</code> → custom SQL table name</li>
            <li><code>ordering</code> → default sorting for QuerySets</li>
            <li><code>unique_together</code></li>
            <li><code>constraints</code></li>
            <li><code>indexes</code></li>
            <li><code>permissions</code></li>
        </ul>
    </ul>

    <br/><br/>


    <li><b>Model Methods: Custom Business Logic</b></li>
    <br/>
    <ul>
        <li>You can attach custom methods to a model:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    price = models.DecimalField(max_digits=8, decimal_places=2)

    def discounted_price(self, percent):
        return self.price * (1 - percent / 100)
</code></pre>

    <ul>
        <li>This keeps logic close to data.</li>
    </ul>

    <br/><br/>


    <li><b>String Representation (<code>__str__</code>)</b></li>
    <br/>
    <ul>
        <li>Add this to improve readability in Django Admin and shell:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=100)

    def __str__(self):
        return f"Product({self.name})"
</code></pre>

    <br/><br/>


    <li><b>Custom Save Logic (Overriding <code>save()</code>)</b></li>

<pre><code class="language-python line-numbers">class Order(models.Model):
    total = models.DecimalField(max_digits=10, decimal_places=2)

    def save(self, *args, **kwargs):
        print("Before saving...")
        super().save(*args, **kwargs)
        print("After saving...")
</code></pre>

    <ul>
        <li>You must call <code>super().save()</code> to actually write to DB.</li>
    </ul>

    <br/><br/>


    <li><b>Custom Delete Logic (Overriding <code>delete()</code>)</b></li>

<pre><code class="language-python line-numbers">def delete(self, *args, **kwargs):
    print("Deleting:", self)
    super().delete(*args, **kwargs)
</code></pre>

    <br/><br/>


    <li><b>Foreign Keys and Relations</b></li>
    <br/>
    <ul>
        <li>Relations are also fields:</li>
    </ul>

<pre><code class="language-python line-numbers">class Category(models.Model):
    name = models.CharField(max_length=50)

class Product(models.Model):
    category = models.ForeignKey(Category, on_delete=models.CASCADE)
</code></pre>

    <ul>
        <li>ORM automatically creates reverse relationships:</li>
    </ul>

<pre><code class="language-python line-numbers">cat = Category.objects.get(id=1)
cat.product_set.all()      # All products in the category
</code></pre>

    <br/><br/>


    <li><b>Model Managers</b></li>
    <br/>
    <ul>
        <li>Every model has at least one manager named <code>objects</code>.</li>
        <li>The manager is the entry point for creating queries:</li>
    </ul>

<pre><code class="language-python line-numbers">products = Product.objects.filter(price__lt=50)
</code></pre>

    <ul>
        <li>You can define custom managers to override query defaults.</li>
    </ul>

    <br/><br/>


    <li><b>Full Lifecycle of a Model Row</b></li>
    <br/>
    <ul>
        <li><b>Create</b>:</li>
    </ul>

<pre><code class="language-python line-numbers">obj = Product.objects.create(name="Pen", price=2)
</code></pre>

    <ul>
        <li><b>Retrieve</b>:</li>
    </ul>

<pre><code class="language-python line-numbers">obj = Product.objects.get(id=1)
</code></pre>

    <ul>
        <li><b>Update</b>:</li>
    </ul>

<pre><code class="language-python line-numbers">obj.price = 3
obj.save()
</code></pre>

    <ul>
        <li><b>Delete</b>:</li>
    </ul>

<pre><code class="language-python line-numbers">obj.delete()
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-models-meta">Understanding the <code>class Meta</code> Options in Django Models</h3>
<ol>

    <li><b>What Is the</b> <code>Meta</code> <b>Class?</b></li>
    <br/>
    <ul>
        <li>The inner <code>class Meta</code> inside a Django model is a special configuration class.</li>
        <br/>
        <li>It tells Django how to behave when generating:
            <ul>
                <li>database table names</li>
                <li>sorting rules</li>
                <li>indexes</li>
                <li>constraints</li>
                <li>permissions</li>
                <li>model names</li>
                <li>relationships between apps</li>
            </ul>
        </li>
        <br/>
        <li><code>Meta</code> does <u>not</u> affect Python logic — it affects <u>Django ORM behavior, database schema, and admin interface.</u></li>
    </ul>

    <br/><br/>


    <li><b>Basic Structure of <code>Meta</code></b></li>
<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=50)

    class Meta:
        ordering = ["name"]
</code></pre>

    <ul>
        <li>The <code>Meta</code> class must be inside the model and indented.</li>
        <li>All its attributes are optional.</li>
    </ul>

    <br/><br/>


    <li><b>Full List of Common Meta Options</b></li>

    <br/>
    <table>
        <thead>
            <tr>
                <th>Option</th>
                <th>Purpose</th>
            </tr>
        </thead>
        <tbody>
            <tr><td><code>db_table</code></td><td>Custom SQL table name</td></tr>
            <tr><td><code>ordering</code></td><td>Default ordering for QuerySets</td></tr>
            <tr><td><code>verbose_name</code></td><td>Human-readable singular name</td></tr>
            <tr><td><code>verbose_name_plural</code></td><td>Plural human-readable name</td></tr>
            <tr><td><code>indexes</code></td><td>Custom database indexes</td></tr>
            <tr><td><code>unique_together</code></td><td>Multi-field uniqueness constraint (legacy)</td></tr>
            <tr><td><code>constraints</code></td><td>Advanced database constraints</td></tr>
            <tr><td><code>permissions</code></td><td>Custom permission definitions</td></tr>
            <tr><td><code>default_related_name</code></td><td>Reverse relationship name</td></tr>
            <tr><td><code>app_label</code></td><td>Assign model to a different app</td></tr>
            <tr><td><code>managed</code></td><td>If False, Django will NOT create or modify the table</td></tr>
            <tr><td><code>get_latest_by</code></td><td>Field used by QuerySet.latest()</td></tr>
            <tr><td><code>ordering</code></td><td>Set default ordering (ASC/DESC)</td></tr>
            <tr><td><code>abstract</code></td><td>Create abstract base classes</td></tr>
            <tr><td><code>proxy</code></td><td>Create proxy models</td></tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>db_table — Custom Table Name</b></li>
    <br/>
    <ul>
        <li>By default Django names tables like <code>appname_modelname</code>.</li>
        <li>You can override this:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=50)

    class Meta:
        db_table = "ecommerce_products"
</code></pre>

    <ul>
        <li>The database table will now be called <code>ecommerce_products</code>.</li>
    </ul>

    <br/><br/>


    <li><b>ordering — Default QuerySet Order</b></li>
    <br/>
    <ul>
        <li>This determines how QuerySets are sorted <u>unless you override it</u>.</li>
    </ul>

<pre><code class="language-python line-numbers">class Post(models.Model):
    created_at = models.DateTimeField()

    class Meta:
        ordering = ["-created_at"]
</code></pre>

    <ul>
        <li><code>Post.objects.all()</code> will always be newest → oldest.</li>
        <li>Supports multiple fields.</li>
    </ul>

    <br/><br/>


    <li><b>verbose_name & verbose_name_plural</b></li>
    <br/>
    <ul>
        <li>Used by Django Admin for labels.</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    class Meta:
        verbose_name = "Product Item"
        verbose_name_plural = "Product Items"
</code></pre>

    <br/><br/>


    <li><b>indexes — Creating Database Indexes</b></li>
<pre><code class="language-python line-numbers">class User(models.Model):
    username = models.CharField(max_length=50)
    email = models.EmailField()

    class Meta:
        indexes = [
            models.Index(fields=["username"]),
            models.Index(fields=["email"]),
        ]
</code></pre>

    <ul>
        <li>Django will generate SQL for index creation.</li>
        <li>This improves query performance.</li>
    </ul>

    <br/><br/>


    <li><b>unique_together (Deprecated in Favor of <code>UniqueConstraint</code>)</b></li>
<pre><code class="language-python line-numbers">class Enrollment(models.Model):
    student = models.ForeignKey("Student", on_delete=models.CASCADE)
    course = models.ForeignKey("Course", on_delete=models.CASCADE)

    class Meta:
        unique_together = ["student", "course"]
</code></pre>

    <ul>
        <li>Ensures that one student cannot enroll in the same course twice.</li>
        <li>Use <code>constraints</code> instead in modern Django.</li>
    </ul>

    <br/><br/>


    <li><b>constraints — Advanced SQL Constraints</b></li>
<pre><code class="language-python line-numbers">from django.db import models

class Product(models.Model):
    price = models.DecimalField(max_digits=10, decimal_places=2)

    class Meta:
        constraints = [
            models.CheckConstraint(check=models.Q(price__gte=0), name="price_positive")
        ]
</code></pre>

    <ul>
        <li>Types of constraints:</li>
        <ul>
            <li><b>CheckConstraint</b></li>
            <li><b>UniqueConstraint</b></li>
            <li><b>ForeignKey constraints</b> are handled automatically</li>
        </ul>
    </ul>

    <br/><br/>


    <li><b>permissions — Custom Permissions</b></li>
<pre><code class="language-python line-numbers">class Report(models.Model):
    class Meta:
        permissions = [
            ("view_sensitive_data", "Can view sensitive data"),
            ("export_reports", "Can export reports"),
        ]
</code></pre>

    <ul>
        <li>Django creates these permissions in the database.</li>
        <li>Often used with the Admin interface.</li>
    </ul>

    <br/><br/>


    <li><b>default_related_name — Reverse Relation Name</b></li>
<pre><code class="language-python line-numbers">class Author(models.Model):
    class Meta:
        default_related_name = "authors"
</code></pre>

    <ul>
        <li>This affects reverse relationships used by ForeignKeys.</li>
    </ul>

    <br/><br/>


    <li><b>managed — Should Django Create This Table?</b></li>
<pre><code class="language-python line-numbers">class LegacyUser(models.Model):
    legacy_id = models.IntegerField()

    class Meta:
        managed = False
        db_table = "legacy_user_table"
</code></pre>

    <ul>
        <li>Use when working with a table that Django should NOT create or modify.</li>
        <li>Common for legacy databases.</li>
    </ul>

    <br/><br/>


    <li><b>get_latest_by — Field Used by <code>latest()</code></b></li>
<pre><code class="language-python line-numbers">class Event(models.Model):
    timestamp = models.DateTimeField()

    class Meta:
        get_latest_by = "timestamp"
</code></pre>

    <ul>
        <li>Now <code>Event.objects.latest()</code> works.</li>
    </ul>

    <br/><br/>


    <li><b>abstract — Create an Abstract Base Class</b></li>
<pre><code class="language-python line-numbers">class BaseTimestamp(models.Model):
    created = models.DateTimeField(auto_now_add=True)

    class Meta:
        abstract = True
</code></pre>

    <ul>
        <li>No table is created for abstract models.</li>
        <li>They serve as base classes for other models.</li>
    </ul>

    <br/><br/>


    <li><b>proxy — Create a Proxy Model</b></li>
<pre><code class="language-python line-numbers">class OrderedUser(User):
    class Meta:
        proxy = True
        ordering = ["username"]
</code></pre>

    <ul>
        <li>No new table created — same table, different Python class.</li>
        <li>Used to add methods or change default ordering.</li>
    </ul>

    <br/><br/>


    <li><b>app_label — Force a Model into a Different App</b></li>
    <br/>
    <ul>
        <li>Normally, Django determines an app by the folder name.</li>
        <li>You can override this:</li>
    </ul>

<pre><code class="language-python line-numbers">class Report(models.Model):
    class Meta:
        app_label = "analytics"
</code></pre>

    <ul>
        <li>Do this only when necessary (e.g., models in a shared folder).</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->

<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->

<!-- * * * * * * * * * * * * * * -->


<hr/>
<!-- * * * * * * * * * * * * * * -->

<footer>
    <p>&copy; 2025 Hwangfucius. All rights reserved.</p>
</footer>
</body>
<!-- * * * * * * * * * * * * * * -->
</html>
<!-- * * * * * * * * * * * * * * -->
