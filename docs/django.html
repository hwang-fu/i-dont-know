<!-- * * * * * * * * * * * * * * -->
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>django</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css">

    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"
            data-prismjs-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs/components/"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>

<style>
    html {
        scroll-behavior: smooth;
    }

    .back-to-top {
        position: fixed;
        right: 20px;
        bottom: 20px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #333;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        font-size: 22px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        opacity: 0.75;
        transition: opacity 0.2s ease, transform 0.2s ease;
        z-index: 999;
    }

    .back-to-top:hover {
        opacity: 1;
        transform: translateY(-2px);
    }

    .nav-icon {
        width: 48px;
        height: 48px;
        object-fit: contain;
        vertical-align: middle;
        margin-left: 0.3rem;
    }

    table {
        border-collapse: collapse;
        width: 100%;
        font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", serif;
        font-size: 14px;
    }

    th {
        background-color: #f5f5f5;
        text-align: left;
        font-weight: 600;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px 12px;
    }

    tr:nth-child(even) {
        background-color: #fafafa;
    }

    tr:hover {
        background-color: #f0f8ff;
    }

    .comment {
        color: grey;
    }

    .token.keyword {
        font-weight: 500;
    }

    .red-underline {
        text-decoration-line: underline;
        text-decoration-color: red;
        text-decoration-thickness: 2px;
        text-underline-offset: 2px;
    }

    body {
        font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", "Times New Roman", Georgia, serif;
        font-variant-ligatures: none;
    }

    ul > li {
        list-style-type: disc;
    }

    code {
        color: #24292e;
        background-color: #f6f8fa;
        border: 1px solid #d0d7de;
        border-radius: .325rem;
        padding: .15rem .15rem;
        font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.725rem;
        line-height: 1.1;
    }


    pre {
        margin: 1rem 0;
        padding: .8rem 1rem;
        background-color: #f6f8fa;
        border: 1px solid #d0d7de;
        border-radius: .5rem;
        overflow: auto;
        tab-size: 4;
    }


    pre code {
        display: block;
        padding: 0;
        background: transparent;
        border: 0;
        color: #24292e;
        font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.875rem;
        line-height: 1.5;
        white-space: pre;
    }
</style>
</head>
<!-- * * * * * * * * * * * * * * -->
<body>
<a href="#" class="back-to-top" aria-label="Back to top">
    &#8593;
</a>
<!-- * * * * * * * * * * * * * * -->


<!-- * * * * * * * * * * * * * * -->
<hr/>
<nav id="toc" style="margin-bottom: 2rem;">
    <h2> <img src="resources/django.png" alt="Logo" class="nav-icon"/> Documentation Index</h2>
    <ol style="line-height: 1.8;">
        <li><a href="#django-intro">Introduction</a></li>
        <li><a href="#django-project-vs-app">Project vs App</a></li>
        <li><a href="#django-manage-py"><code>manage.py</code></a></li>
        <li><a href="#django-settings-basic">Basic Settings</a></li>
        <li><a href="#django-urls-py"><code>urls.py</code></a></li>
        <li><a href="#django-wsgi-py"><code>wsgi.py</code></a></li>
        <li><a href="#django-asgi-py"><code>asgi.py</code></a></li>
        <li><a href="#django-file-structure">File Structures</a></li>
        <li><a href="#django-models">Models</a></li>
        <li><a href="#django-orm">Object–Relational Mapper (ORM)</a></li>
        <li><a href="#django-model-making-quries">Models Making Queries</a></li>
        <li><a href="#django-model-filter-pattern">Model Filter Pattern</a></li>
        <li><a href="#django-model-aggregation">Models Aggregation</a></li>
        <li><a href="#django-model-research">Models Research</a></li>
        <li><a href="#django-model-managers">Models Managers</a></li>
        <li><a href="#django-raw-sql">Performaing Raw SQL Queries</a></li>
        <li><a href="#django-transactions">Database Transactions in Django</a></li>
        <li><a href="#django-multiple-databases">Using Multiple Databases</a></li>
        <li><a href="#django-settings-databses">Understanding the <code>DATABASES</code> Setting</a></li>
        <li><a href="#django-models-model">Understanding the <code>models.Model</code></a></li>
        <li><a href="#django-models-meta">Understanding the <code>class Meta</code> Options in Django <code>models.Model</code></a></li>
        <li><a href="#django-models-tablespaces">Tablespaces in Django Models</a></li>
        <li><a href="#django-db-access-optimization">Database Access Optimization</a></li>
        <li><a href="#django-db-instrumentation">Database Instrumentation</a></li>
        <li><a href="#django-db-fixtures">Database Fixtures</a></li>
        <li><a href="#django-url-dispatcher">URL Dispatcher</a></li>
        <li><a href="#django-views-beginner">Views for Beginners</a></li>
        <li><a href="#django-views">Views</a></li>
        <li><a href="#django-httpresponse"><code>HttpResponse</code> in Django</a></li>
        <li><a href="#django-writing-views">Writing Views</a></li>
        <li><a href="#django-views-decorators">View Decorators</a></li>
        <li><a href="#django-file-uploads">File Uploads</a></li>
        <li><a href="#django-shortcut-http-functions">Shortcut HTTP Functions</a></li>
        <li><a href="#django-generic-views">Generic Views</a></li>
        <li><a href="#django-middleware">Middleware</a></li>
        <li><a href="#django-sessions">Sessions</a></li>
        <li><a href="#django-template">Template</a></li>
        <li><a href="#django-url-mapping">URL Mapping</a></li>
        <li><a href="#django-shell">Django Shell</a></li>
        <li><a href="#django-admin-interface">Admin Interface</a></li>
        <li><a href="#django-admin-create-user">Admin Create User</a></li>
        <li><a href="#django-admin-include-models">Admin Include Models</a></li>
        <li><a href="#django-admin-display-fields">Admin Display Fields</a></li>
        <li><a href="#django-admin-update-objects">Admin Update Objects</a></li>
    </ol>
</nav>
<hr/>
<!-- * * * * * * * * * * * * * * -->


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-intro">Introduction to Django</h3>
<ol>

    <li><b>What Is Django?</b></li>
    <br/>
    <ul>
        <li>Django is a high-level <code>Python</code> <u>web framework</u> designed for productivity and clean architecture.</li>
        <br/>
        <li>Its key philosophy is <u>batteries included</u>:
            <ul>
                <li>ORM (database abstraction)</li>
                <li>Admin interface</li>
                <li>Authentication &amp; authorization</li>
                <li>Routing</li>
                <li>Templating</li>
                <li>Session &amp; cookie management</li>
                <li>Security middleware</li>
            </ul>
        </li>
        <br/>
        <li>It follows the <b>MVT</b> pattern (Model–View–Template).</li>
    </ul>
    <br/><br/>


    <li><b>MVT Architecture (Model–View–Template)</b></li>
    <br/>
    <ul>
        <li>Django’s architecture is similar to MVC, but naming differs slightly:</li>
        <br/>
    </ul>

    <table>
        <thead>
            <tr>
                <th>Django Term</th>
                <th>Role</th>
                <th>Equivalent in MVC</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>Model</code></td>
                <td>Data representation and database interaction</td>
                <td>Model</td>
            </tr>
            <tr>
                <td><code>View</code></td>
                <td>Business logic and request handling</td>
                <td>Controller</td>
            </tr>
            <tr>
                <td><code>Template</code></td>
                <td>HTML presentation layer</td>
                <td>View</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Installing Django</b></li>
    <br/>
    <ul>
        <li>You can install Django globally or inside a virtual environment.</li>
    </ul>

<pre><code class="language-bash line-numbers">pip install django
</code></pre>

    <ul>
        <li>Check version:</li>
    </ul>

<pre><code class="language-bash line-numbers">django-admin --version
</code></pre>

    <br/><br/>


    <li><b>Create a Django Project</b></li>
    <br/>
    <ul>
        <li>Use <code>django-admin</code> to scaffold a new project:</li>
    </ul>

<pre><code class="language-bash line-numbers">django-admin startproject mysite
cd mysite
</code></pre>

    <ul>
        <li>File structure:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    ├── asgi.py
    └── wsgi.py
</code></pre>

    <br/><br/>


    <li><b>Running the Development Server</b></li>
    <br/>
    <ul>
        <li>Start the built-in web server:</li>
    </ul>

<pre><code class="language-bash line-numbers">python manage.py runserver
</code></pre>

    <ul>
        <li>Your site is now available at <code>http://127.0.0.1:8000/</code>.</li>
    </ul>

    <br/><br/>


    <li><b>Create Your First App</b></li>
    <br/>
    <ul>
        <li>A Django “project” can contain multiple “apps”.</li>
        <li>Apps are modular components that encapsulate one feature.</li>
    </ul>

<pre><code class="language-bash line-numbers">python manage.py startapp blog
</code></pre>

    <ul>
        <li>App structure:</li>
    </ul>

<pre><code class="language-bash line-numbers">blog/
├── admin.py
├── apps.py
├── models.py
├── tests.py
├── views.py
└── migrations/
</code></pre>

    <br/><br/>


    <li><b>Defining a Model (Database Layer)</b></li>
    <br/>
    <ul>
        <li>Models represent database tables.</li>
        <li>Django automatically generates SQL from model definitions.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
</code></pre>

    <ul>
        <li>Create database tables:</li>
    </ul>

<pre><code class="language-bash line-numbers">python manage.py makemigrations
python manage.py migrate
</code></pre>

    <br/><br/>


    <li><b>Creating a View (Business Logic)</b></li>
    <br/>
    <ul>
        <li>A Django view handles incoming requests and returns a response.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.http import HttpResponse

def hello(request):
    return HttpResponse("Hello, Django!")
</code></pre>

    <br/><br/>


    <li><b>URL Routing</b></li>
    <br/>
    <ul>
        <li>You must map URLs to views.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path("hello/", views.hello),
]
</code></pre>

    <ul>
        <li>Include app routes in the project’s main URL config:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),
]
</code></pre>

    <br/><br/>


    <li><b>Django Template System</b></li>
    <br/>
    <ul>
        <li>Templates generate HTML dynamically.</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/home.html --&gt;
&lt;h1&gt;Welcome to My Blog&lt;/h1&gt;
&lt;p&gt;This is rendered from a Django template.&lt;/p&gt;
</code></pre>

    <ul>
        <li>Rendering the template from a view:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.shortcuts import render

def home(request):
    return render(request, "blog/home.html")
</code></pre>

    <br/><br/>


    <li><b>The Django Admin</b></li>
    <br/>
    <ul>
        <li>Django includes an auto-generated admin interface.</li>
        <li>Register your model:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/admin.py

from django.contrib import admin
from .models import Post

admin.site.register(Post)
</code></pre>

    <ul>
        <li>Create an admin account:</li>
    </ul>

<pre><code class="language-bash line-numbers">python manage.py createsuperuser
</code></pre>

    <ul>
        <li>Log in at <code>http://127.0.0.1:8000/admin/</code>.</li>
    </ul>

    <br/><br/>


    <li><b>Django ORM: Querying the Database</b></li>
    <br/>
    <ul>
        <li>You can interact with the database using Python objects instead of raw SQL.</li>
    </ul>

<pre><code class="language-py line-numbers">from blog.models import Post

# Create
Post.objects.create(title="Hello", body="Content here")

# Read
posts = Post.objects.all()

# Filter
latest = Post.objects.filter(title__icontains="hello")
</code></pre>

    <br/><br/>


    <li><b>Common Django Features (Built-In)</b></li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Feature</th>
                <th>Description</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Authentication</td>
                <td>User accounts, login, permissions</td>
                <td><code>from django.contrib.auth.models import User</code></td>
            </tr>
            <tr>
                <td>Admin</td>
                <td>Automatic admin site</td>
                <td><code>/admin/</code></td>
            </tr>
            <tr>
                <td>ORM</td>
                <td>Database abstraction</td>
                <td><code>Model.objects.filter(...)</code></td>
            </tr>
            <tr>
                <td>Templates</td>
                <td>HTML rendering system</td>
                <td><code>render(request, "home.html")</code></td>
            </tr>
            <tr>
                <td>Forms</td>
                <td>Built-in HTML form processing &amp; validation</td>
                <td><code>forms.Form</code></td>
            </tr>
            <tr>
                <td>Security Middleware</td>
                <td>CSRF, XSS protection, secure cookies</td>
                <td><code>django.middleware.csrf.CsrfViewMiddleware</code></td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li>Django is a full-featured web framework following the MVT pattern.</li>
        <li>It includes built-in tools for models, routing, admin, templates, and security.</li>
        <li>Projects consist of modular “apps”, each handling a separate feature.</li>
        <li>The ORM allows you to work with databases using Python classes.</li>
        <li>Django is ideal for fast development, enterprise apps, APIs, and dashboards.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-project-vs-app">Project vs App in Django</h3>
<ol>

    <li>Beginners are often confused by the difference between <b>Django Project</b> and <b>Django App</b></li>
    <br/><br/>


    <li><b>What Is a Django Project?</b></li>
    <br/>
    <ul>
        <li>A <b>Django project</b> is the <u>entire web application</u> that you are building.</li>
        <li>It contains:
            <ul>
                <li>global configuration</li>
                <li>settings</li>
                <li>URL routing</li>
                <li>WSGI/ASGI configuration</li>
                <li>one or many Django apps</li>
            </ul>
        </li>
        <li>You create a project using:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m django startproject mysite
</code></pre>

    <ul>
        <li>Project structure looks like this:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py      # Global Django settings (DEBUG, DB, middleware, etc.)
    ├── urls.py          # Root URL dispatcher
    ├── wsgi.py          # For production servers
    └── asgi.py          # For async servers
</code></pre>

    <ul>
        <li>The project is the container for your whole website.</li>
        <li>It does NOT contain business logic by itself — apps do.</li>
    </ul>
    <br/><br/>


    <li><b>What Is a Django App?</b></li>
    <br/>
    <ul>
        <li>A <b>Django app</b> is a <u>modular component</u> that provides one specific piece of functionality.</li>
        <li>Examples of apps:
            <ul>
                <li><code>blog</code></li>
                <li><code>users</code></li>
                <li><code>payments</code></li>
                <li><code>dashboard</code></li>
            </ul>
        </li>
        <li>You create an app using:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py startapp blog
</code></pre>

    <ul>
        <li>App structure looks like:</li>
    </ul>

<pre><code class="language-bash line-numbers">blog/
├── admin.py        # Admin interface setup
├── apps.py         # App configuration class
├── models.py       # Database models
├── views.py        # Request handlers (Controller logic)
├── tests.py        # Unit tests
└── migrations/     # Database migrations
</code></pre>

    <ul>
        <li>An app contains <u>actual features</u> of your site.</li>
        <li>A single project can contain many apps.</li>
        <li>You can reuse apps between projects.</li>
    </ul>
    <br/><br/>


    <li><b>Project vs App — Conceptual Difference</b></li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Aspect</th>
                <th>Django Project</th>
                <th>Django App</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Purpose</td>
                <td>Overall configuration and container</td>
                <td>Specific feature or module</td>
            </tr>
            <tr>
                <td>Number</td>
                <td>One per website</td>
                <td>Many per project</td>
            </tr>
            <tr>
                <td>Reusable?</td>
                <td>No</td>
                <td>Yes, apps can be placed on PyPI</td>
            </tr>
            <tr>
                <td>Created by</td>
                <td><code>startproject</code></td>
                <td><code>startapp</code></td>
            </tr>
            <tr>
                <td>Main Files</td>
                <td><code>settings.py</code>, <code>urls.py</code></td>
                <td><code>models.py</code>, <code>views.py</code>, <code>admin.py</code></td>
            </tr>
            <tr>
                <td>Scope</td>
                <td>Entire website</td>
                <td>Narrow, focused feature</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>When Should You Create a New App?</b></li>
    <br/>
    <ul>
        <li>Create a new app when you add a <u>new feature</u> that:
            <ul>
                <li>has its own set of models</li>
                <li>has its own views and logic</li>
                <li>could logically be reused elsewhere</li>
                <li>is independent of other parts of the project</li>
            </ul>
        </li>
    </ul>

    <ul>
        <li>Examples:</li>
        <ul>
            <li>Add authentication → create <code>accounts</code> app</li>
            <li>Add blog → create <code>blog</code> app</li>
            <li>Add payment system → create <code>payments</code> app</li>
        </ul>
    </ul>

    <ul>
        <li>Do NOT create an app for:</li>
        <ul>
            <li>small isolated functions</li>
            <li>just one template</li>
            <li>configuration-only changes</li>
        </ul>
    </ul>
    <br/><br/>


    <li><b>How an App Integrates Into a Project</b></li>
    <br/>
    <ul>
        <li>After creating an app, you must add it to <code>INSTALLED_APPS</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/settings.py

INSTALLED_APPS = [
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.sessions",
    "django.contrib.messages",
    "django.contrib.staticfiles",
    "blog",   # your new app
]
</code></pre>

    <ul>
        <li>This tells Django to load:
            <ul>
                <li>models</li>
                <li>migrations</li>
                <li>signals</li>
                <li>admin configuration</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Example: One Project, Multiple Apps</b></li>
    <br/>
    <ul>
        <li>A real-world project (e.g., Instagram clone) might contain:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── accounts/      # login, signup, profiles
├── posts/         # uploading + viewing posts
├── comments/      # comments on posts
├── notifications/ # user notifications
└── messages/      # direct messaging
</code></pre>

    <ul>
        <li>Each app focuses on a single, reusable part of the system.</li>
        <li>Apps communicate via imports and relationships.</li>
    </ul>

    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li>A <b>Django project</b> is the entire website — global configuration, settings, URLs, WSGI/ASGI.</li>
        <li>A <b>Django app</b> is a single feature inside the project — models, views, templates, logic.</li>
        <li>Projects contain many apps; apps are reusable; projects are not.</li>
        <li>You create projects using <code>startproject</code> and apps using <code>startapp</code>.</li>
        <li>Apps must be added to <code>INSTALLED_APPS</code> to work.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-manage-py"><code>manage.py</code> in Django</h3>
<ol>

    <li><b>What Is <code>manage.py</code>?</b></li>
    <br/>
    <ul>
        <li><code>manage.py</code> is a helper script created for every Django project.</li>
        <br/>
        <li>It is the main entry point to run project-related commands during development.</li>
        <br/>
        <li>It wraps Django&#39;s command-line utility and automatically:
            <ul>
                <li>sets the correct <code>DJANGO_SETTINGS_MODULE</code> for your project</li>
                <li>ensures commands run in the context of the current project</li>
            </ul>
        </li>
        <br/>
        <li>When you see commands like <code>python3 manage.py ...</code>, they all start from this script.</li>
    </ul>
    <br/><br/>


    <li><b>Creating a Project and Seeing <code>manage.py</code></b></li>
    <br/>
    <ul>
        <li>Assuming you work inside a virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate
python3 -m pip install django

python3 -m django startproject mysite
cd mysite
</code></pre>

    <ul>
        <li>Project structure:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── asgi.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py
</code></pre>

    <ul>
        <li><code>manage.py</code> sits at the <u>project root</u>, next to your app folders.</li>
    </ul>
    <br/><br/>


    <li><b>How</b> <code>manage.py</code> <b>Works Internally?</b></li>
    <br/>
    <ul>
        <li>A typical <code>manage.py</code> file looks like this (simplified):</li>
    </ul>

<pre><code class="language-py line-numbers">#!/usr/bin/env python3
import os
import sys

def main():
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")
    from django.core.management import execute_from_command_line
    execute_from_command_line(sys.argv)

if __name__ == "__main__":
    main()
</code></pre>

    <ul>
        <li><code>os.environ.setdefault(...)</code> sets which settings module to use.</li>
        <li><code>execute_from_command_line(sys.argv)</code> dispatches commands like <code>runserver</code>, <code>migrate</code>, etc.</li>
        <li>You normally never modify <code>manage.py</code> by hand.</li>
    </ul>
    <br/><br/>


    <li><b>Basic Usage Pattern</b></li>
    <br/>
    <ul>
        <li>All core development actions go through <code>manage.py</code>:</li>
    </ul>

<pre><code class="language-bash line-numbers"># Always inside the virtual environment
source .venv/bin/activate

# Basic pattern:
python3 manage.py &lt;command&gt; [options]
</code></pre>

    <ul>
        <li>Examples:</li>
        <ul>
            <li><code>python3 manage.py runserver</code></li>
            <li><code>python3 manage.py makemigrations</code></li>
            <li><code>python3 manage.py migrate</code></li>
            <li><code>python3 manage.py createsuperuser</code></li>
        </ul>
    </ul>
    <br/><br/>


    <li><b>Frequently Used manage.py Commands</b></li>
    <br/>
    <table>
        <thead>
            <tr>
                <th>Command</th>
                <th>Usage</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>runserver</code></td>
                <td><code>python3 manage.py runserver</code></td>
                <td>Start the development server.</td>
            </tr>
            <tr>
                <td><code>startapp</code></td>
                <td><code>python3 manage.py startapp blog</code></td>
                <td>Create a new Django app inside the project.</td>
            </tr>
            <tr>
                <td><code>makemigrations</code></td>
                <td><code>python3 manage.py makemigrations</code></td>
                <td>Generate migration files from model changes.</td>
            </tr>
            <tr>
                <td><code>migrate</code></td>
                <td><code>python3 manage.py migrate</code></td>
                <td>Apply migrations to the database.</td>
            </tr>
            <tr>
                <td><code>createsuperuser</code></td>
                <td><code>python3 manage.py createsuperuser</code></td>
                <td>Create an admin user for the Django admin site.</td>
            </tr>
            <tr>
                <td><code>shell</code></td>
                <td><code>python3 manage.py shell</code></td>
                <td>Open a Python shell with Django loaded.</td>
            </tr>
            <tr>
                <td><code>test</code></td>
                <td><code>python3 manage.py test</code></td>
                <td>Run your test suite.</td>
            </tr>
            <tr>
                <td><code>showmigrations</code></td>
                <td><code>python3 manage.py showmigrations</code></td>
                <td>List migrations and their applied status.</td>
            </tr>
            <tr>
                <td><code>sqlmigrate</code></td>
                <td><code>python3 manage.py sqlmigrate app_name 0001</code></td>
                <td>Show the raw SQL for a migration.</td>
            </tr>
            <tr>
                <td><code>check</code></td>
                <td><code>python3 manage.py check</code></td>
                <td>Run Django&#39;s system checks for common configuration issues.</td>
            </tr>
        </tbody>
    </table>
    <br/><br/>


    <li><b>Running the Development Server</b></li>
    <br/>
    <ul>
        <li>Use <code>runserver</code> to start a lightweight development server:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py runserver
</code></pre>

    <ul>
        <li>Specify a port if needed:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py runserver 8080
</code></pre>

    <ul>
        <li>By default, the server binds to <code>127.0.0.1:8000</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Creating Apps with manage.py</b></li>
    <br/>
    <ul>
        <li>Inside your project, you create apps via <code>startapp</code>:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py startapp blog
</code></pre>

    <ul>
        <li>This generates an app structure:</li>
    </ul>

<pre><code class="language-bash line-numbers">blog/
├── admin.py
├── apps.py
├── models.py
├── tests.py
├── views.py
└── migrations/
</code></pre>

    <ul>
        <li>Then you add <code>"blog"</code> to <code>INSTALLED_APPS</code> in <code>mysite/settings.py</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Managing Database Schema: makemigrations and migrate</b></li>
    <br/>
    <ul>
        <li>Whenever you change models, you must create and apply migrations:</li>
    </ul>

<pre><code class="language-bash line-numbers"># Generate migration files
python3 manage.py makemigrations

# Apply them to the database
python3 manage.py migrate
</code></pre>

    <ul>
        <li><code>makemigrations</code> looks at <code>models.py</code> and generates migration scripts.</li>
        <li><code>migrate</code> executes those scripts and updates the actual database schema.</li>
    </ul>
    <br/><br/>


    <li><b>Admin User and Auth Management</b></li>
    <br/>
    <ul>
        <li>To use Django&#39;s admin interface, you need a superuser:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py createsuperuser
</code></pre>

    <ul>
        <li>You will be prompted for:
            <ul>
                <li>username</li>
                <li>email</li>
                <li>password (twice)</li>
            </ul>
        </li>
        <li>After that, you can log in at <code>/admin/</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Django Shell for Interactive Work</b></li>
    <br/>
    <ul>
        <li>The <code>shell</code> command opens a Python shell where Django is already configured.</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py shell
</code></pre>

    <ul>
        <li>Example usage:</li>
    </ul>

<pre><code class="language-py line-numbers">from blog.models import Post

Post.objects.create(title="Hello", body="From the shell")
print(Post.objects.all())
</code></pre>

    <ul>
        <li>This is very convenient for quick experiments and debugging.</li>
    </ul>
    <br/><br/>


    <li><b>manage.py vs django-admin</b></li>
    <br/>
    <ul>
        <li>Django also provides a global command: <code>django-admin</code>.</li>
        <br/>
        <li>Difference:
            <ul>
                <li><code>django-admin</code>: Does not automatically know which project settings to use.</li>
                <li><code>manage.py</code>: Tied to a specific project and sets <code>DJANGO_SETTINGS_MODULE</code> for you.</li>
            </ul>
        </li>
        <br/>
        <li>In practice:
            <ul>
                <li>Use <code>python3 manage.py ...</code> inside a project directory.</li>
                <li>Use <code>django-admin</code> mainly to create new projects, or when you know what you are doing.</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li><code>manage.py</code> is the project-specific command-line entry point in Django.</li>
        <li>It loads the correct settings and dispatches commands like <code>runserver</code>, <code>migrate</code>, <code>startapp</code>, and more.</li>
        <li>You should run it with <code>python3</code> from inside an active virtual environment.</li>
        <li>Most of your everyday Django tasks go through <code>python3 manage.py &lt;command&gt;</code>.</li>
        <li>Once you understand <code>manage.py</code>, controlling a Django project from the terminal becomes straightforward and powerful.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-settings-basic">Basic Django Settings</h3>
<ol>

    <li>What Are Django Settings?</li>
    <br/>
    <ul>
        <li>Django settings configure how your project behaves.</li>
        <br/>
        <li>The main settings file is located in: <code>mysite/settings.py</code></li>
        <br/>
        <li>Django loads this file automatically when using:
            <ul>
                <li><code>python3 manage.py runserver</code></li>
                <li><code>python3 manage.py migrate</code></li>
                <li><code>python3 manage.py shell</code></li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Location of Settings</li>
    <br/>
    <ul>
        <li>Create project inside virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate
python3 -m pip install django

python3 -m django startproject mysite
cd mysite
</code></pre>

    <ul>
        <li>Project structure:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py   &lt;-- settings file
    ├── urls.py
    ├── asgi.py
    └── wsgi.py
</code></pre>

    <br/><br/>


    <li>Important Settings in <code>settings.py</code></li>
    <br/>

    <ol>
        <li><code>DEBUG</code></li>
        <br/>
        <ul>
            <li><code>DEBUG</code> enables error pages, auto-reload, and rich debugging output.</li>
            <li>Do <u>not</u> enable this in production.</li>
        </ul>

<pre><code class="language-py line-numbers">DEBUG = True
</code></pre>

        <ul>
            <li>In production:</li>
        </ul>

<pre><code class="language-py line-numbers">DEBUG = False
</code></pre>

        <br/><br/>


        <li><code>SECRET_KEY</code></li>
        <br/>
        <ul>
            <li>Used for cryptographic signing (sessions, CSRF tokens, etc.).</li>
            <li>Must remain secret in production.</li>
            <li>Auto-generated when the project is created.</li>
        </ul>

<pre><code class="language-py line-numbers">SECRET_KEY = "django-insecure-abcd1234..."
</code></pre>

        <br/><br/>


        <li><code>ALLOWED_HOSTS</code></li>
        <br/>
        <ul>
            <li>Controls which hosts are allowed to serve the project.</li>
            <li>Required when <code>DEBUG = False</code>.</li>
        </ul>

<pre><code class="language-py line-numbers">ALLOWED_HOSTS = ["127.0.0.1", "localhost"]
</code></pre>

        <ul>
            <li>In production you would add your domain, e.g.:</li>
        </ul>

<pre><code class="language-py line-numbers">ALLOWED_HOSTS = ["mywebsite.com"]
</code></pre>

        <br/><br/>


        <li><code>INSTALLED_APPS</code></li>
        <br/>
        <ul>
            <li>List of all apps activated for this project.</li>
            <li>Includes:
                <ul>
                    <li>Django default apps</li>
                    <li>Your own apps</li>
                    <li>Third-party apps</li>
                </ul>
            </li>
        </ul>

<pre><code class="language-py line-numbers">INSTALLED_APPS = [
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.sessions",
    "django.contrib.messages",
    "django.contrib.staticfiles",
    "blog",   # your app
]
</code></pre>

        <br/><br/>


        <li><code>MIDDLEWARE</code></li>
        <br/>
        <ul>
            <li>Middleware is a chain of hooks that process every request/response.</li>
            <li>Examples:
                <ul>
                    <li>SecurityMiddleware</li>
                    <li>AuthenticationMiddleware</li>
                    <li>CSRF middleware</li>
                </ul>
            </li>
        </ul>

<pre><code class="language-py line-numbers">MIDDLEWARE = [
    "django.middleware.security.SecurityMiddleware",
    "django.contrib.sessions.middleware.SessionMiddleware",
    "django.middleware.common.CommonMiddleware",
    "django.middleware.csrf.CsrfViewMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware",
    "django.contrib.messages.middleware.MessageMiddleware",
]
</code></pre>

        <br/><br/>


        <li><code>ROOT_URLCONF</code></li>
        <br/>
        <ul>
            <li>Points to the main URL routing module.</li>
        </ul>

<pre><code class="language-py line-numbers">ROOT_URLCONF = "mysite.urls"
</code></pre>

        <ul>
            <li>This file typically includes app URLs via <code>include()</code>.</li>
        </ul>

        <br/><br/>


        <li><code>TEMPLATES</code></li>
        <br/>
        <ul>
            <li>Configures Django’s template engine.</li>
            <li>Defines template directories, context processors, and backend engine.</li>
        </ul>

<pre><code class="language-py line-numbers">TEMPLATES = [
    {
        "BACKEND": "django.template.backends.django.DjangoTemplates",
        "DIRS": [],
        "APP_DIRS": True,
        "OPTIONS": {
            "context_processors": [
                "django.template.context_processors.debug",
                "django.template.context_processors.request",
                "django.contrib.auth.context_processors.auth",
                "django.contrib.messages.context_processors.messages",
            ],
        },
    },
]
</code></pre>

        <br/><br/>


        <li><code>DATABASES</code></li>
        <br/>
        <ul>
            <li>Default database is SQLite (easy for development).</li>
        </ul>

<pre><code class="language-py line-numbers">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    }
}
</code></pre>

        <ul>
            <li>For PostgreSQL:</li>
        </ul>

<pre><code class="language-py line-numbers">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.postgresql",
        "NAME": "mydb",
        "USER": "myuser",
        "PASSWORD": "mypassword",
        "HOST": "localhost",
        "PORT": "5432",
    }
}
</code></pre>

        <br/><br/>


        <li><code>AUTH_PASSWORD_VALIDATORS</code></li>
        <br/>
        <ul>
            <li>Controls password requirements for users.</li>
        </ul>

<pre><code class="language-py line-numbers">AUTH_PASSWORD_VALIDATORS = [
    {"NAME": "django.contrib.auth.password_validation.UserAttributeSimilarityValidator"},
    {"NAME": "django.contrib.auth.password_validation.MinimumLengthValidator"},
    {"NAME": "django.contrib.auth.password_validation.CommonPasswordValidator"},
    {"NAME": "django.contrib.auth.password_validation.NumericPasswordValidator"},
]
</code></pre>

        <br/><br/>


        <li><code>STATIC_URL</code> and <code>STATICFILES_DIRS</code></li>
        <br/>
        <ul>
            <li>Static files include CSS, JS, and images.</li>
        </ul>

<pre><code class="language-py line-numbers">STATIC_URL = "/static/"</code></pre>

        <ul>
            <li>Extra static directories (optional):</li>
        </ul>

<pre><code class="language-py line-numbers">STATICFILES_DIRS = [
    BASE_DIR / "static",
]
</code></pre>

        <br/><br/>


        <li><code>TIME_ZONE</code> and <code>LANGUAGE_CODE</code></li>
        <br/>
        <ul>
            <li>Controls default language and timezone.</li>
        </ul>

<pre><code class="language-py line-numbers">LANGUAGE_CODE = "en-us"
TIME_ZONE = "UTC"
USE_TZ = True
</code></pre>

        <ul>
            <li>Examples:</li>
            <ul>
                <li>German: <code>"de"</code></li>
                <li>Chinese: <code>"zh-hans"</code></li>
                <li>Beijing timezone: <code>"Asia/Shanghai"</code></li>
            </ul>
        </ul>

    </ol>

    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-urls-py">URL Routing with <code>urls.py</code> in Django</h3>
<ol>

    <li>Django uses a URL Routing System to Map Incoming Browser Requests to Specific View Functions</li>
    <br/>
    <ul>
        <li>This routing logic is defined inside one or more <code>urls.py</code> files.</li>
        <br/>
        <li>The main <code>urls.py</code> lives in the project folder (e.g., <code>mysite/urls.py</code>).</li>
        <br/>
        <li>Each app can also have its own <code>urls.py</code> file for modular routing.</li>
    </ul>
    <br/><br/>


    <li>Default Project-Level <code>urls.py</code></li>
    <br/>
    <ul>
        <li>After creating a Django project, your project’s <code>urls.py</code> contains:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path

urlpatterns = [
    path("admin/", admin.site.urls),
]
</code></pre>

    <ul>
        <li><code>urlpatterns</code> is a list mapping URLs to views or included routes.</li>
        <li><code>path()</code> is the most common function for defining routes.</li>
    </ul>
    <br/><br/>


    <li><b>Adding Routes in Project-Level</b> <code>urls.py</code></li>
    <br/>
    <ul>
        <li>Let’s say we have a simple view in <code>blog/views.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.http import HttpResponse

def hello(request):
    return HttpResponse("Hello from blog!")
</code></pre>

    <ul>
        <li>We can route to it directly from the project’s <code>urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path
from blog.views import hello

urlpatterns = [
    path("admin/", admin.site.urls),
    path("hello/", hello),
]
</code></pre>

    <ul>
        <li>This exposes the view at: <code>http://127.0.0.1:8000/hello/</code>.</li>
    </ul>

    <br/><br/>


    <li>Using Application-Level <code>urls.py</code> (Recommended)</li>
    <br/>
    <ul>
        <li>Each app should have its own <code>urls.py</code> for better organization.</li>
        <li>Create a <code>urls.py</code> inside the <code>blog</code> app:</li>
    </ul>

<pre><code class="language-bash line-numbers">blog/
├── __init__.py
├── admin.py
├── apps.py
├── models.py
├── views.py
└── urls.py   &lt;-- create this file
</code></pre>

    <ul>
        <li>Inside <code>blog/urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path("hello/", views.hello),
]
</code></pre>

    <ul>
        <li>Now include it in the project-level <code>urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),
]
</code></pre>

    <ul>
        <li>This exposes the view at: <code>http://127.0.0.1:8000/blog/hello/</code></li>
    </ul>

    <br/><br/>


    <li>Understanding the <code>path()</code> Syntax</li>
    <br/>
    <ul>
        <li><code>path(route, view, name=None)</code></li>
    </ul>

<pre><code class="language-py line-numbers">path("hello/", views.hello, name="hello")
</code></pre>

    <ul>
        <li><code>route</code> → URL pattern string (no domain)</li>
        <li><code>view</code> → the function/class handling the request</li>
        <li><code>name</code> → optional identifier for reverse URL lookups</li>
    </ul>

    <br/><br/>


    <li>URL Parameters and Converters</li>
    <br/>
    <ul>
        <li>Django allows dynamic URL segments via converters:</li>
    </ul>

<pre><code class="language-py line-numbers">path("post/&lt;int:id&gt;/", views.show_post)
</code></pre>

    <ul>
        <li>Supported converters:</li>
        <ul>
            <li><code>int</code> → integers</li>
            <li><code>str</code> → strings</li>
            <li><code>slug</code> → <code>a-z A-Z 0-9 - _</code></li>
            <li><code>uuid</code> → UUID strings</li>
            <li><code>path</code> → full path segments including <code>/</code></li>
        </ul>
    </ul>

    <br/>

    <ul>
        <li>Example view:</li>
    </ul>

<pre><code class="language-py line-numbers">def show_post(request, id):
    return HttpResponse(f"Post ID is {id}")
</code></pre>

    <br/><br/>


    <li>Using <code>include()</code> to Organize URL Structures</li>
    <br/>
    <ul>
        <li><code>include()</code> lets you split different URL patterns into app modules. This is crucial for large websites.</li>
    </ul>

<pre><code class="language-py line-numbers">urlpatterns = [
    path("blog/", include("blog.urls")),
    path("shop/", include("shop.urls")),
    path("api/", include("api.urls")),
]
</code></pre>

    <br/><br/>


    <li>Named URLs (Highly Recommended)</li>
    <br/>
    <ul>
        <li>Use the <code>name=</code> argument to reference routes safely:</li>
    </ul>

<pre><code class="language-py line-numbers">path("hello/", views.hello, name="hello")
</code></pre>

    <ul>
        <li>Then use <code>reverse()</code> or <code>{% url %}</code> in templates:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.urls import reverse
reverse("hello")   # returns "/hello/"
</code></pre>

<pre><code class="language-html line-numbers">&lt;a href="{% url 'hello' %}"&gt;Say Hello&lt;/a&gt;
</code></pre>

    <ul>
        <li>Named URLs make refactoring safer — paths can change, but names stay constant.</li>
    </ul>

    <br/><br/>


    <li>Using URL Namespaces</li>
    <br/>
    <ul>
        <li>Assign an <code>app_name</code> at the top of <code>blog/urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

app_name = "blog"

urlpatterns = [
    path("hello/", views.hello, name="hello"),
]
</code></pre>

    <ul>
        <li>Reverse the URL using a namespace:</li>
    </ul>

<pre><code class="language-html line-numbers">{% url 'blog:hello' %}</code></pre>
</ol>
<br/>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-wsgi-py">Understanding <code>wsgi.py</code> in Django</h3>
<ol>

    <li>What Is WSGI?</li>
    <br/>
    <ul>
        <li><b>WSGI</b> stands for <u>Web Server Gateway Interface</u>.</li>
        <br/>
        <li>It is a standard interface between a Python web application (like Django) and a production web server (like Gunicorn, uWSGI, Apache mod_wsgi)</li>
        <br/>
        <li>WSGI ensures that:
            <ul>
                <li>your Django project can run on any server that supports WSGI</li>
                <li>your Python code is separated from the web server implementation</li>
            </ul>
        </li>
        <br/>
        <li>In short: WSGI is the <u>bridge</u> between Django and the outside world in production environments.</li>
    </ul>
    <br/><br/>


    <li>Where Is <code>wsgi.py</code> Located?</li>
    <br/>
    <ul>
        <li>It is automatically created inside your project folder:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    ├── wsgi.py      &lt;-- here!
    └── asgi.py
</code></pre>

    <br/><br/>


    <li>What Does <code>wsgi.py</code> Contain?</li>
    <br/>
    <ul>
        <li>The file contains a small amount of boilerplate necessary for Django to run under WSGI servers.</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/wsgi.py

import os
from django.core.wsgi import get_wsgi_application

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

application = get_wsgi_application()
</code></pre>

    <ul>
        <li>Key parts:</li>
        <ul>
            <li><code>os.environ.setdefault()</code>: tells Django which settings module to load</li>
            <li><code>get_wsgi_application()</code>: creates a WSGI-compatible application object</li>
            <li><code>application</code>: the entry point the server will use</li>
        </ul>
        <br/>
        <li>This file rarely needs modification.</li>
    </ul>

    <br/><br/>


    <li>Why Do We Need <code>wsgi.py</code>?</li>
    <br/>
    <ul>
        <li>Django needs a standard interface to communicate with a production-ready server.</li>
        <br/>
        <li>WSGI:
            <ul>
                <li>handles HTTP requests</li>
                <li>passes them to Django</li>
                <li>returns Django’s HTTP responses to the server</li>
            </ul>
        </li>

        <br/>

        <li>Without WSGI, your Django project cannot run on servers like:
            <ul>
                <li>Gunicorn</li>
                <li>uWSGI</li>
                <li>Apache with mod_wsgi</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li>Relationship Between <code>manage.py</code> and <code>wsgi.py</code></li>
    <br/>
    <ul>
        <li><code>manage.py</code> is used for development commands:
            <ul>
                <li>runserver</li>
                <li>migrate</li>
                <li>createsuperuser</li>
            </ul>
        </li>
        <br/>
        <li><code>wsgi.py</code> is used for deploying your project to a real server.</li>
        <br/>
        <li>Both load the Django settings module.</li>
    </ul>

    <br/><br/>


    <li>Running Django in Production With WSGI</li>
    <br/>
    <ul>
        <li>Example using <u>Gunicorn</u> inside your virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate
python3 -m pip install gunicorn
gunicorn mysite.wsgi:application
</code></pre>

    <ul>
        <li>Gunicorn loads:
            <ul>
                <li>your project</li>
                <li>your Django settings</li>
                <li>the WSGI application object</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li>How WSGI Processes a Request (Step-by-Step)</li>
    <br/>
    <ol>
        <li>Browser sends an HTTP request → web server receives it</li>
        <li>Web server calls your WSGI application object</li>
        <li><code>wsgi.py</code> gives Django the request</li>
        <li>Django:
            <ul>
                <li>loads URL configuration</li>
                <li>dispatches to the correct view</li>
                <li>produces an HttpResponse</li>
            </ul>
        </li>
        <li>Response is passed back through WSGI to the server</li>
        <li>Server sends response to the browser</li>
    </ol>

    <br/><br/>


    <li>WSGI vs. ASGI</li>
    <br/>
    <ul>
        <li>Django also includes <code>asgi.py</code> for async servers.</li>
        <li>The difference:</li>
    </ul>

    <table>
        <thead>
            <tr>
                <th>Interface</th>
                <th>Purpose</th>
                <th>Typical Server</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>WSGI</code></td>
                <td>Traditional synchronous web apps</td>
                <td>Gunicorn, uWSGI, mod_wsgi</td>
            </tr>
            <tr>
                <td><code>ASGI</code></td>
                <td>Async features (WebSockets, HTTP/2)</td>
                <td>Uvicorn, Daphne</td>
            </tr>
        </tbody>
    </table>

    <br/>

    <ul>
        <li>If your app is basic HTTP — WSGI is enough.</li>
        <li>If you need WebSockets or async — use ASGI.</li>
    </ul>

    <br/><br/>


    <li>Do You Ever Edit <code>wsgi.py</code>?</li>
    <br/>
    <ul>
        <li>Most projects never change it.</li>
        <br/>
        <li>Possible edge cases:
            <ul>
                <li>adding environment variables</li>
                <li>overriding settings module</li>
                <li>custom logging setup</li>
            </ul>
        </li>
        <br/>
        <li>But for beginners → leave it untouched.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-asgi-py">Understanding <code>asgi.py</code> in Django</h3>
<ol>

    <li>What Is ASGI?</li>
    <br/>
    <ul>
        <li><code>ASGI</code> stands for <u>Asynchronous Server Gateway Interface</u>.</li>
        <br/>
        <li>ASGI is the spiritual successor to WSGI and enables:
            <ul>
                <li>asynchronous views</li>
                <li>WebSockets</li>
                <li>HTTP/2</li>
                <li>long-lived connections</li>
            </ul>
        </li>
        <br/>
        <li>ASGI makes Django capable of modern real-time features like:
            <ul>
                <li>chat systems</li>
                <li>live notifications</li>
                <li>live dashboards</li>
                <li>background tasks</li>
            </ul>
        </li>
        <br/>
        <li>While <code>wsgi.py</code> is for synchronous servers, <code>asgi.py</code> is for asynchronous servers.</li>
    </ul>
    <br/><br/>


    <li>Where Is <code>asgi.py</code> Located?</li>
    <br/>
    <ul>
        <li>It is created automatically in every new Django project:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    ├── asgi.py      &lt;-- here!
    └── wsgi.py
</code></pre>

    <br/><br/>


    <li>The Default <code>asgi.py</code> File</li>
    <br/>
    <ul>
        <li>Django generates the following code:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/asgi.py

import os
from django.core.asgi import get_asgi_application

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

application = get_asgi_application()
</code></pre>

    <ul>
        <li>This file:
            <ul>
                <li>sets up Django settings</li>
                <li>creates an ASGI-compatible application object</li>
                <li>exposes <code>application</code> for ASGI servers</li>
            </ul>
        </li>
        <br/>
        <li>Just like <code>wsgi.py</code>, you rarely need to modify it.</li>
    </ul>

    <br/><br/>


    <li>Why Does Django Need <code>asgi.py</code>?</li>
    <br/>
    <ul>
        <li>Modern web apps rely heavily on:
            <ul>
                <li>real-time communication</li>
                <li>live updates</li>
                <li>async I/O operations</li>
            </ul>
        </li>
        <li>ASGI makes Django compatible with:
            <ul>
                <li><b>WebSockets</b></li>
                <li><b>Async Views</b> using <code>async def</code></li>
                <li><b>Django Channels</b></li>
            </ul>
        </li>
        <br/>
        <li>ASGI is the future direction of Django for high-concurrency applications.</li>
    </ul>

    <br/><br/>


    <li>WSGI vs ASGI — Key Differences</li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Feature</th>
                <th>WSGI</th>
                <th>ASGI</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Type</td>
                <td>Synchronous</td>
                <td>Asynchronous + synchronous</td>
            </tr>
            <tr>
                <td>Supports WebSockets?</td>
                <td>No</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>Best Use Case</td>
                <td>Traditional web apps</td>
                <td>Real-time &amp; concurrent apps</td>
            </tr>
            <tr>
                <td>Typical Server</td>
                <td>Gunicorn, uWSGI</td>
                <td>Uvicorn, Daphne, Hypercorn</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li>Example: Running Django With an ASGI Server</li>
    <br/>
    <ul>
        <li>Inside a virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate

python3 -m pip install uvicorn

uvicorn mysite.asgi:application --reload
</code></pre>

    <ul>
        <li>You now run Django on an ASGI server.</li>
        <li>Supports both async and sync views.</li>
    </ul>

    <br/><br/>


    <li>Async Views in Django (ASGI Feature)</li>
    <br/>
    <ul>
        <li>You can write fully asynchronous views:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

import asyncio
from django.http import HttpResponse

async def slow_view(request):
    await asyncio.sleep(2)
    return HttpResponse("This view waited 2 seconds asynchronously!")
</code></pre>

    <ul>
        <li>Available only when Django runs under ASGI.</li>
    </ul>

    <br/><br/>


    <li>Using ASGI for WebSockets (Via Django Channels)</li>
    <br/>
    <ul>
        <li>ASGI enables WebSocket support through Django Channels:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m pip install channels
</code></pre>

    <ul>
        <li>You can create <code>routing.py</code> for WebSockets:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/routing.py

from django.urls import path
from channels.routing import ProtocolTypeRouter, URLRouter
from blog.consumers import ChatConsumer

application = ProtocolTypeRouter({
    "websocket": URLRouter([
        path("ws/chat/", ChatConsumer.as_asgi()),
    ]),
})
</code></pre>

    <ul>
        <li>ASGI is essential for Channels to function.</li>
    </ul>

    <br/><br/>


    <li>How ASGI Handles a Request (High Level)</li>
    <br/>
    <ul>
        <li>1. Browser sends an HTTP or WebSocket request</li>
        <li>2. ASGI server receives it (Uvicorn, Daphne, etc.)</li>
        <li>3. Server calls Django’s <code>asgi.py</code> application object</li>
        <li>4. Django routes request through middleware and URLs</li>
        <li>5. View processes request (sync or async)</li>
        <li>6. Response is returned through ASGI to the client</li>
    </ul>

    <br/><br/>


    <li>Do You Ever Edit <code>asgi.py</code>?</li>
    <br/>
    <ul>
        <li>Usually no — Django provides everything needed.</li>
        <li>You would modify it only to:
            <ul>
                <li>integrate Django Channels</li>
                <li>add additional ASGI middleware</li>
                <li>customize routing between protocols (HTTP / WebSocket)</li>
            </ul>
        </li>
    </ul>

    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-file-structure">Understanding Django Project &amp; App File Structure</h3>
<ol>

    <li>Create a Django Project (Inside Virtual Environment)</li>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate

python3 -m pip install django
python3 -m django startproject mysite
cd mysite
</code></pre>

    <br/><br/>


    <li>Django Project Directory Structure</li>
    <br/>
    <ul>
        <li>Your project folder <code>mysite/</code> contains:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
└── mysite/
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    ├── asgi.py
    └── wsgi.py
</code></pre>

    <br/>
    <ul>
        <li>Explanation of each file:</li>
    </ul>
    <br/>

    <table>
        <thead>
            <tr>
                <th>File / Folder</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>manage.py</code></td>
                <td>Main CLI tool for the project (e.g., <code>runserver</code>, <code>migrate</code>).</td>
            </tr>
            <tr>
                <td><code>mysite/</code> (inner folder)</td>
                <td>Actual project package (contains settings, URLs, ASGI/WSGI).</td>
            </tr>
            <tr>
                <td><code>__init__.py</code></td>
                <td>Makes the folder a Python package.</td>
            </tr>
            <tr>
                <td><code>settings.py</code></td>
                <td>Global configuration: database, installed apps, middleware, templates, static files, etc.</td>
            </tr>
            <tr>
                <td><code>urls.py</code></td>
                <td>Root URL routing file directing to app URLs.</td>
            </tr>
            <tr>
                <td><code>asgi.py</code></td>
                <td>Entry point for ASGI servers (async support).</td>
            </tr>
            <tr>
                <td><code>wsgi.py</code></td>
                <td>Entry point for WSGI servers (production).</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li>Creating an App Inside the Project</li>
<pre><code class="language-bash line-numbers">python3 manage.py startapp blog
</code></pre>

    <br/><br/>


    <li>Django App Directory Structure</li>
<pre><code class="language-bash line-numbers">blog/
├── admin.py
├── apps.py
├── models.py
├── tests.py
├── views.py
└── migrations/
    └── __init__.py
</code></pre>

    <ul>
        <li>Explanation of each file:</li>
    </ul>
    <br/>

    <table>
        <thead>
            <tr>
                <th>File / Folder</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>admin.py</code></td>
                <td>Define how models appear in Django Admin.</td>
            </tr>
            <tr>
                <td><code>apps.py</code></td>
                <td>Configuration class for your app (used internally by Django).</td>
            </tr>
            <tr>
                <td><code>models.py</code></td>
                <td>Define your database tables using Django Models.</td>
            </tr>
            <tr>
                <td><code>tests.py</code></td>
                <td>Unit tests for your app.</td>
            </tr>
            <tr>
                <td><code>views.py</code></td>
                <td>Your request handlers (functions or class-based views).</td>
            </tr>
            <tr>
                <td><code>migrations/</code></td>
                <td>Stores migration files for database schema changes.</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li>Where Do Templates and Static Files Go?</li>
    <ul>
        <li>You do NOT see templates or static folders by default.</li>
        <li>You must create them manually.</li>
    </ul>

    <br/><br/>



    <li>Recommended Structure for Templates</li>

<pre><code class="language-bash line-numbers">blog/
├── templates/
│   └── blog/
│       └── index.html
</code></pre>

    <ul>
        <li>The inner <code>blog/</code> folder prevents naming conflicts between apps.</li>
        <li>Important: the app name becomes a namespace.</li>
        <li>Django finds templates because <code>APP_DIRS</code> is enabled in <code>settings.py</code>.</li>
    </ul>

    <br/><br/>



    <li>Recommended Structure for Static Files</li>

<pre><code class="language-bash line-numbers">blog/
├── static/
│   └── blog/
│       ├── style.css
│       └── script.js
</code></pre>

    <ul>
        <li>Again, use <code>blog/</code> inside <code>static/</code> to avoid collisions.</li>
        <li>Django collects static files using <code>python3 manage.py collectstatic</code>.</li>
    </ul>

    <br/><br/>


    <li>How Project and App Work Together</li>
    <br/>
    <ul>
        <li>Your project should be configured to include the app:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/settings.py

INSTALLED_APPS = [
    ...
    "blog",
]
</code></pre>

    <ul>
        <li>Next, the project routes URLs to the app:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.urls import path, include

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),
]
</code></pre>

    <ul>
        <li>This makes your app accessible under <code>/blog/</code>.</li>
    </ul>

    <br/><br/>


    <li>Example of a Complete App Folder (Realistic)</li>
<pre><code class="language-bash line-numbers">blog/
├── admin.py
├── apps.py
├── migrations/
│   ├── __init__.py
│   └── 0001_initial.py
├── models.py
├── templates/
│   └── blog/
│       └── index.html
├── static/
│   └── blog/
│       ├── style.css
│       └── script.js
├── tests.py
└── views.py
</code></pre>

    <br/><br/>


    <li>Example of a Complete Project Folder</li>
<pre><code class="language-bash line-numbers">mysite/
├── manage.py
├── mysite/
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   ├── wsgi.py
│   └── asgi.py
└── blog/
    ├── admin.py
    ├── apps.py
    ├── migrations/
    ├── models.py
    ├── templates/
    ├── static/
    ├── tests.py
    └── views.py
</code></pre>

    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-models">Models in Django</h3>
<ol>

    <li>What Are Models?</li>
    <br/>
    <ul>
        <li>A Django <code>model</code> is a Python class that represents a database table.</li>
        <br/>
        <li>Each class attribute in the <code>model</code> corresponds to a column in the table.</li>
        <br/>
        <li>Django uses its built-in <u>Object–Relational Mapper (ORM)</u> to convert model classes into SQL queries.</li>
        <br/>
        <li>Models are defined inside the <code>models.py</code> of each app.</li>
        <br/>
        <li>You do not write SQL — Django auto-generates it during migration steps.</li>
    </ul>
    <br/><br/>


    <li>Typical Workflow With Models</li>
    <br/>
    <ul>
        <li>Create and activate a virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate
</code></pre>

    <br/>
    <ul>
        <li>Install Django:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m pip install django
</code></pre>

    <br/>
    <ul>
        <li>Create project and app:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m django startproject mysite
cd mysite
python3 -m django startapp blog
</code></pre>

    <br/>
    <ul>
        <li>Edit <code>models.py</code>, then run:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
python3 manage.py migrate
</code></pre>

    <ul>
        <li>You now have database tables ready for use.</li>
    </ul>
    <br/><br/>


    <li>Defining Your First Model</li>
    <br/>
    <ul>
        <li>All models inherit from <code>django.db.models.Model</code>.</li>
        <li>Field types define how data is stored in the database.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
</code></pre>

    <ul>
        <li><code>CharField</code> represents short strings</li>
        <li><code>TextField</code> represents long text</li>
        <li><code>DateTimeField(auto_now_add=True)</code> represents timestamp when created</li>
    </ul>
    <br/><br/>


    <li>Applying Migrations</li>
    <br/>
    <ul>
        <li>After modifying models, create migration scripts:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
</code></pre>

    <br/>
    <ul>
        <li>Apply them and update the database schema:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py migrate
</code></pre>

    <ul>
        <li>Django now creates the corresponding SQL tables.</li>
    </ul>
    <br/><br/>


    <li>Common Django Model Fields</li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Field Type</th>
                <th>Description</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>CharField</code></td>
                <td>Short strings</td>
                <td><code>CharField(max_length=100)</code></td>
            </tr>
            <tr>
                <td><code>TextField</code></td>
                <td>Large text</td>
                <td><code>TextField()</code></td>
            </tr>
            <tr>
                <td><code>IntegerField</code></td>
                <td>Integers</td>
                <td><code>IntegerField()</code></td>
            </tr>
            <tr>
                <td><code>DateTimeField</code></td>
                <td>Date and time values</td>
                <td><code>DateTimeField(auto_now_add=True)</code></td>
            </tr>
            <tr>
                <td><code>BooleanField</code></td>
                <td>True/False</td>
                <td><code>BooleanField(default=False)</code></td>
            </tr>
            <tr>
                <td><code>ForeignKey</code></td>
                <td>Many-to-one relationship</td>
                <td><code>ForeignKey(User, on_delete=models.CASCADE)</code></td>
            </tr>
            <tr>
                <td><code>FileField</code></td>
                <td>File uploads</td>
                <td><code>FileField(upload_to="uploads/")</code></td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li>Adding Relationships Between Models</li>
    <br/>
    <ul>
        <li>Django supports three common relational patterns:</li>
        <ul>
            <li><b>One-to-many</b> → <code>ForeignKey</code></li>
            <li><b>Many-to-many</b> → <code>ManyToManyField</code></li>
            <li><b>One-to-one</b> → <code>OneToOneField</code></li>
        </ul>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models
from django.contrib.auth.models import User

class Comment(models.Model):
    post = models.ForeignKey("Post", on_delete=models.CASCADE)
    author = models.ForeignKey(User, on_delete=models.CASCADE)
    text = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
</code></pre>

    <ul>
        <li><code>ForeignKey</code> links each comment to one post.</li>
        <li><code>on_delete=models.CASCADE</code> ensures comments disappear when a post is deleted.</li>
    </ul>
    <br/><br/>


    <li>Useful Model Methods</li>
    <br/>
    <ul>
        <li>You can add custom methods to models:</li>
    </ul>

<pre><code class="language-py line-numbers">class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()

    def __str__(self):
        return self.title

    def preview(self):
        return self.body[:50] + "..."
</code></pre>

    <ul>
        <li><code>__str__</code> improves admin display.</li>
        <li><code>preview</code> returns a short snippet of the body.</li>
    </ul>
    <br/><br/>


    <li>Querying Models Using the ORM</li>
    <br/>
    <ul>
        <li>Use the Django shell for experimenting:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py shell
</code></pre>

    <ul>
        <li>Example operations:</li>
    </ul>

<pre><code class="language-py line-numbers">from blog.models import Post

# Create
Post.objects.create(title="Hello", body="First post!")

# Read
Post.objects.all()

# Filter
Post.objects.filter(title__icontains="hello")

# Order
Post.objects.order_by("-created_at")
</code></pre>

    <br/><br/>


    <li>Meta Options (Model Configuration)</li>
    <br/>
    <ul>
        <li>The <code>Meta</code> class customizes model behavior.</li>
    </ul>

<pre><code class="language-py line-numbers">class Post(models.Model):
    title = models.CharField(max_length=200)

    class Meta:
        ordering = ["-id"]
        verbose_name = "Blog Post"
        verbose_name_plural = "Blog Posts"
</code></pre>

    <ul>
        <li><code>ordering</code> → default sort order</li>
        <li><code>verbose_name</code> → human-friendly name in admin</li>
    </ul>
    <br/><br/>


    <li>Registering Models in the Admin</li>
    <br/>
    <ul>
        <li>To manage models via Django Admin, you must register them:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/admin.py

from django.contrib import admin
from .models import Post, Comment

admin.site.register(Post)
admin.site.register(Comment)
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-orm">Object–Relational Mapper (ORM) in Django</h3>
<ol>

    <li>What Is the Django ORM?</li>
    <br/>
    <ul>
        <li>The Django ORM is a powerful system that allows you to interact with databases using <u>Python classes</u> instead of writing SQL manually.</li>
        <br/>
        <li>ORM converts Python model operations into SQL queries automatically.</li>
        <br/>
        <li>Supported databases:
            <ul>
                <li>SQLite (default)</li>
                <li>PostgreSQL</li>
                <li>MySQL</li>
                <li>MariaDB</li>
                <li>Oracle</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Prerequisite: Virtual Environment &amp; Project Setup</li>
    <br/>
    <ul>
        <li>Create and activate virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate
python3 -m pip install django
</code></pre>

    <ul>
        <li>Create project and app:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 -m django startproject mysite
cd mysite
python3 -m django startapp blog
</code></pre>

    <br/><br/>


    <li>Models and Tables</li>
    <br/>
    <ul>
        <li>Define a model (maps to a database table):</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models

class Post(models.Model):
    title      = models.CharField(max_length=200)
    body       = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
</code></pre>

    <ul>
        <li>Each attribute becomes a database column.</li>
        <li>Django creates the SQL table automatically through migrations.</li>
    </ul>

    <br/><br/>


    <li>Migrations: Create the Database Schema</li>
    <br/>
    <ul>
        <li>Generate migration scripts:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
</code></pre>

    <ul>
        <li>Apply migrations:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py migrate
</code></pre>

    <ul>
        <li>Your database now contains a <code>Post</code> table.</li>
    </ul>

    <br/><br/>


    <li>Creating Objects (INSERT)</li>
    <br/>
    <ul>
        <li>Use the model's manager <code>objects</code> to create records:</li>
    </ul>

<pre><code class="language-py line-numbers">from blog.models import Post

Post.objects.create(title="Hello", body="First post")
</code></pre>

    <ul>
        <li>This generates SQL like:</li>
    </ul>

<pre><code class="language-sql line-numbers">INSERT INTO blog_post (title, body, created_at) VALUES (...);
</code></pre>

    <ul>
        <li>But you do not write SQL — Django handles it.</li>
    </ul>
    <br/><br/>


    <li>Querying Objects (SELECT)</li>
    <br/>
    <ul>
        <li>Get all objects:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.all()
</code></pre>

    <ul>
        <li>Filter using conditions:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title__icontains="hello")
</code></pre>

    <ul>
        <li>Get a single object:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.get(id=1)
</code></pre>

    <ul>
        <li>If no object is found, <code>DoesNotExist</code> error is raised.</li>
    </ul>

    <br/><br/>


    <li>Common ORM Lookups</li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Lookup</th>
                <th>Example</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>exact</code></td>
                <td><code>title__exact="Hello"</code></td>
                <td>Exact match</td>
            </tr>
            <tr>
                <td><code>icontains</code></td>
                <td><code>title__icontains="hello"</code></td>
                <td>Case-insensitive substring match</td>
            </tr>
            <tr>
                <td><code>gt</code></td>
                <td><code>id__gt=3</code></td>
                <td>Greater than</td>
            </tr>
            <tr>
                <td><code>lt</code></td>
                <td><code>id__lt=10</code></td>
                <td>Less than</td>
            </tr>
            <tr>
                <td><code>in</code></td>
                <td><code>id__in=[1, 2, 3]</code></td>
                <td>Filter within a list</td>
            </tr>
            <tr>
                <td><code>startswith</code></td>
                <td><code>title__startswith="Django"</code></td>
                <td>Prefix match</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li>Updating Objects (UPDATE)</li>
    <br/>
    <ul>
        <li>Fetch an object, modify it, then save:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
post.title = "Updated title"
post.save()
</code></pre>

    <ul>
        <li>This triggers an <code>UPDATE</code> query.</li>
    </ul>

    <br/><br/>


    <li>Deleting Objects (DELETE)</li>
    <br/>
    <ul>
        <li>Delete a single object:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
post.delete()
</code></pre>

    <ul>
        <li>Delete multiple objects:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title__icontains="old").delete()
</code></pre>

    <br/><br/>


    <li>ORM and Relationships</li>
    <br/>
    <ul>
        <li>Django ORM supports relationships via fields:</li>
        <ul>
            <li><code>ForeignKey</code> → one-to-many</li>
            <li><code>ManyToManyField</code> → many-to-many</li>
            <li><code>OneToOneField</code> → one-to-one</li>
        </ul>
    </ul>

<pre><code class="language-py line-numbers">class Comment(models.Model):
    post = models.ForeignKey(Post, on_delete=models.CASCADE)
    text = models.TextField()
</code></pre>

    <ul>
        <li>Query related objects:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
comments = post.comment_set.all()
</code></pre>

    <br/><br/>


    <li>Advanced ORM Features</li>
    <br/>
    <ul>
        <li>Django ORM also supports:
            <ul>
                <li><b>aggregation</b> (Sum, Avg, Min, Max)</li>
                <li><b>annotations</b></li>
                <li><b>prefetch_related</b> and <b>select_related</b> for performance</li>
                <li><b>raw SQL</b> when needed</li>
            </ul>
        </li>
    </ul>

<pre><code class="language-py line-numbers">from django.db.models import Count

Post.objects.annotate(comment_count=Count("comment"))
</code></pre>

    <br/><br/>


    <li>Using Django Shell for ORM Testing</li>
    <br/>
    <ul>
        <li>Highly recommended for experimentation:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py shell
</code></pre>

<pre><code class="language-py line-numbers">from blog.models import Post

Post.objects.all()
Post.objects.create(title="New", body="Hello ORM!")
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-model-making-quries">Django ORM &mdash; Querying Models</h3>
<ol>

    <li>Context &amp; Basic Setup</li>
    <br/>
    <ul>
        <li>You have a Django project already set up.</li>
        <li>You have at least one app with some models.</li>
        <li>You are running commands in a virtual environment created via:</li>
    </ul>
<pre><code class="language-bash line-numbers">python3 -m venv .venv
source .venv/bin/activate  # on macOS/Linux
# .venv\Scripts\activate   # on Windows (PowerShell/cmd)</code></pre>
    <ul>
        <li>You use the Django shell to experiment with queries:</li>
    </ul>
<pre><code class="language-bash line-numbers">python3 manage.py shell</code></pre>
    <br/>
    <br/>


    <li>Example model used in this chapter (simplified):</li>
<pre><code class="language-python line-numbers">from django.db import models


class Author(models.Model):
    name = models.CharField(max_length=100)


class Book(models.Model):
    title = models.CharField(max_length=200)
    rating = models.IntegerField(default=0)
    published_at = models.DateField(null=True, blank=True)
    author = models.ForeignKey(
        Author,
        on_delete=models.CASCADE,
        related_name=&quot;books&quot;,
    )

    def __str__(self):
        return f&quot;{self.title} ({self.rating})&quot;
</code></pre>
        <ul><li>All queries in this chapter are based on:</li></ul>
<pre><code class="language-python line-numbers">from books.models import Book, Author</code></pre>
    <br/><br/>


    <li>Managers &amp; QuerySets</li>
    <br/>
    <ul>
        <li>Each model has a <b>manager</b>, by default called <code>objects</code>:
<pre><code class="language-python line-numbers">Book.objects</code></pre>
        </li>
        <br/>
        <li>Calling most methods on a manager returns a <code>QuerySet</code>:
<pre><code class="language-python line-numbers">qs = Book.objects.all()
type(qs)  # &lt;class &#39;django.db.models.query.QuerySet&#39;&gt;</code></pre>
        </li>
        <br/>
        <li><code>QuerySet</code>s are lazy:
            <ul>
                <li>No SQL is executed until the <code>QuerySet</code> is actually evaluated.</li>
                <li>Evaluation happens when you:
                    <ul>
                        <li>iterate over it: <code>for book in qs: ...</code></li>
                        <li>cast to list: <code>list(qs)</code></li>
                        <li>call methods like <code>len(qs)</code>, <code>bool(qs)</code>, <code>list(qs)</code></li>
                        <li>use aggregation methods: <code>count()</code>, <code>exists()</code>, etc.</li>
                    </ul>
                </li>
            </ul>
        </li>
        <br/>
        <li>Chaining QuerySets builds up SQL:
<pre><code class="language-python line-numbers">qs = Book.objects.filter(rating__gte=4).order_by(&quot;-published_at&quot;)</code></pre>
        </li>
    </ul>
    <br/><br/>


    <li>Basic Retrieval: <code>all()</code>, <code>get()</code>, <code>first()</code>, <code>last()</code></li>
    <br/>
    <ul>
        <li><code>all()</code> selects all rows:</li>
<pre><code class="language-python line-numbers">Book.objects.all()  # SELECT * FROM book;</code></pre>
        <br/>
        <br/>
        <li><code>get()</code> selects exactly one row, or raise an exception:</li>
<pre><code class="language-python line-numbers">book = Book.objects.get(pk=1)
book = Book.objects.get(title=&quot;Django Tutorial&quot;)</code></pre>
            <ul>
                <li>Raises <code>Book.DoesNotExist</code> if no match.</li>
                <li>Raises <code>Book.MultipleObjectsReturned</code> if more than one match.</li>
            </ul>
        <br/>
        <br/>
        <li><code>first()</code> / <code>last()</code> are convenient helpers:</li>
<pre><code class="language-python line-numbers">first_book = Book.objects.order_by(&quot;published_at&quot;).first()
last_book  = Book.objects.order_by(&quot;published_at&quot;).last()</code></pre>
            <ul>
                <li>Return a single object or <code>None</code> (no exceptions).</li>
            </ul>
        <br/>
        <br/>
        <li><code>latest()</code> / <code>earliest()</code> use a date field:
<pre><code class="language-python line-numbers">latest_book   = Book.objects.latest(&quot;published_at&quot;)
earliest_book = Book.objects.earliest(&quot;published_at&quot;)</code></pre>
        </li>
    </ul>
    <br/><br/>


    <li>Filtering: <code>filter()</code>, <code>exclude()</code>, field lookups</li>
    <br/>
    <ul>
        <li><code>filter()</code> keeps rows that match:</li>
<pre><code class="language-python line-numbers">Book.objects.filter(rating__gte=4)
Book.objects.filter(title__icontains=&quot;django&quot;)</code></pre>
        <br/>
        <li><code>exclude()</code> removes rows that match:</li>
<pre><code class="language-python line-numbers">Book.objects.exclude(rating__lt=3)</code></pre>
        <br/>
        <li>Field lookup syntax: <code>field__lookup=value</code>
<pre><code class="language-python line-numbers">Book.objects.filter(rating__gte=4)          # &gt;= 4
Book.objects.filter(rating__gt=4)           # &gt; 4
Book.objects.filter(rating__lte=2)          # &lt;= 2
Book.objects.filter(title__icontains=&quot;py&quot;) # case-insensitive substring
Book.objects.filter(published_at__isnull=True)
Book.objects.filter(pk__in=[1, 2, 3])
Book.objects.filter(rating__range=(3, 5))</code></pre>
        </li>
        <br/>
        <li>Some useful lookup types:</li>
        <br/>
<table>
    <thead>
        <tr>
            <th>Lookup</th>
            <th>Description</th>
            <th>Example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>exact</code>, <code>iexact</code></td>
            <td>Exact match (case-sensitive / case-insensitive)</td>
            <td><code>name__iexact="john"</code></td>
        </tr>
        <tr>
            <td><code>contains</code>, <code>icontains</code></td>
            <td>Substring match (case-sensitive / insensitive)</td>
            <td><code>title__icontains="django"</code></td>
        </tr>
        <tr>
            <td>
                <code>startswith</code>, <code>istartswith</code><br/>
                <code>endswith</code>, <code>iendswith</code>
            </td>
            <td>Prefix / suffix search (case-sensitive / insensitive)</td>
            <td><code>email__startswith="admin"</code></td>
        </tr>
        <tr>
            <td>
                <code>lt</code>, <code>lte</code><br/>
                <code>gt</code>, <code>gte</code>
            </td>
            <td>Less-than / greater-than comparisons</td>
            <td><code>price__gt=50</code></td>
        </tr>
        <tr>
            <td><code>in</code></td>
            <td>Membership in a list or queryset</td>
            <td><code>id__in=[1, 2, 3]</code></td>
        </tr>
        <tr>
            <td><code>range</code></td>
            <td>Value between two values (inclusive)</td>
            <td><code>created_at__range=("2024-01-01", "2024-12-31")</code></td>
        </tr>
        <tr>
            <td><code>isnull</code></td>
            <td>Field is NULL / NOT NULL</td>
            <td><code>deleted_at__isnull=True</code></td>
        </tr>
        <tr>
            <td><code>regex</code>, <code>iregex</code></td>
            <td>Regular expression match (DB backend dependent)</td>
            <td><code>username__iregex="^[a-z0-9_]+$"</code></td>
        </tr>
    </tbody>
</table>
    </ul>
    <br/><br/>


    <li>Combining Conditions: <code>Q</code> Objects (OR / complex logic)</li>
    <br/>
    <ul>
        <li>By default, multiple arguments to <code>filter()</code> are combined with <b>AND</b>:</li>
<pre><code class="language-python line-numbers">Book.objects.filter(rating__gte=4, title__icontains=&quot;django&quot;)</code></pre>
        <br/>
        <li>For more complex logic (OR, NOT, nested) use <code>Q</code> objects:</li>
<pre><code class="language-python line-numbers">from django.db.models import Q

# rating &gt;= 4 OR title contains &quot;django&quot;
Book.objects.filter(
    Q(rating__gte=4) | Q(title__icontains=&quot;django&quot;)
)

# rating &gt;= 4 AND NOT published_at IS NULL
Book.objects.filter(
    Q(rating__gte=4) &amp; ~Q(published_at__isnull=True)
)</code></pre>
        <li>Complex queries are usually a combination of <code>Q()</code> with <code>&amp;</code>, <code>|</code>, and <code>~</code>.</li>
    </ul>
    <br/><br/>


    <li>Sorting &amp; Limiting Results: <code>order_by()</code>, slicing</li>
    <br/>
    <ul>
        <li>Sort results with <code>order_by()</code>:</li>
<pre><code class="language-python line-numbers"># ascending
Book.objects.order_by(&quot;title&quot;)

# descending
Book.objects.order_by(&quot;-rating&quot;, &quot;title&quot;)</code></pre>
        <br/>
        <li>Limit results using slicing (translated to <code>LIMIT</code> / <code>OFFSET</code>):</li>
<pre><code class="language-python line-numbers">top_5 = Book.objects.order_by(&quot;-rating&quot;)[:5]
second_page = Book.objects.order_by(&quot;title&quot;)[5:10]</code></pre>
        <li><b>Important:</b> slicing returns a new <code>QuerySet</code>, it is still lazy until evaluated.</li>
    </ul>
    <br/><br/>


    <li>Only Certain Fields: <code>values()</code>, <code>values_list()</code>, <code>only()</code>, <code>defer()</code></li>
    <br/>
    <ul>
        <li><code>values()</code> returns dictionaries:</li>
<pre><code class="language-python line-numbers">qs = Book.objects.filter(rating__gte=4).values(&quot;title&quot;, &quot;rating&quot;)
list(qs)
# [&quot;{&#39;title&#39;: &#39;Django Guide&#39;, &#39;rating&#39;: 5}&quot;, ...]</code></pre>
        <br/>
        <li><code>values_list()</code> returns tuples (or flat list):</li>
<pre><code class="language-python line-numbers"># list of (title, rating)
Book.objects.values_list(&quot;title&quot;, &quot;rating&quot;)

# flat list of titles
Book.objects.values_list(&quot;title&quot;, flat=True)</code></pre>
        <br/>
        <li><code>only()</code> &amp; <code>defer()</code> controls which fields are loaded (useful for large models):</li>
<pre><code class="language-python line-numbers"># Only load title and rating, other fields deferred until accessed
qs = Book.objects.only(&quot;title&quot;, &quot;rating&quot;)

# Load everything except big_text_field
qs = Book.objects.defer(&quot;big_text_field&quot;)</code></pre>
    </ul>
    <br/><br/>


    <li>Relations: ForeignKey &amp; Reverse Relations</li>
    <br/>
    <ul>
        <li>Forward relation: from <code>Book</code> to <code>Author</code>:</li>
<pre><code class="language-python line-numbers">book = Book.objects.get(pk=1)
author = book.author              # follow ForeignKey</code></pre>
        <br/>
        <li>Reverse relation: from <code>Author</code> to <code>Book</code>:</li>
<pre><code class="language-python line-numbers">author = Author.objects.get(pk=1)

# default is author.book_set, but we used related_name=&quot;books&quot;
books = author.books.all()</code></pre>
        <br/>
        <li>Filter across relations using double underscores:</li>
<pre><code class="language-python line-numbers"># Books with author name &quot;Alice&quot;
Book.objects.filter(author__name=&quot;Alice&quot;)

# Authors who have at least one book with rating &gt;= 4
Author.objects.filter(books__rating__gte=4).distinct()</code></pre>
    </ul>
    <br/><br/>


    <li>Performance Helpers: <code>select_related()</code> &amp; <code>prefetch_related()</code></li>
    <br/>
    <ul>
        <li><b>Problem:</b> N+1 queries when accessing related objects in a loop.</li>
        <br/>
        <li><code>select_related()</code> performs <b>JOIN</b>
            and loads related <b>single-valued</b> objects in one query. Used for <code>ForeignKey</code>, <code>OneToOneField</code>.</li>
<pre><code class="language-python line-numbers"># Without select_related: 1 query for books, +1 per book for author
books = Book.objects.all()

# With select_related: 1 query total
books = Book.objects.select_related(&quot;author&quot;)

for book in books:
    print(book.title, book.author.name)</code></pre>
        <br/>
        <li><code>prefetch_related()</code> runs additional queries and joins results in Python. Used for <b>many-valued</b> relations: <code>ManyToManyField</code>, reverse <code>ForeignKey</code>, etc.</li>
<pre><code class="language-python line-numbers">authors = Author.objects.prefetch_related(&quot;books&quot;)

for author in authors:
    # does not hit DB per loop; books prefetched
    print(author.name, [b.title for b in author.books.all()])</code></pre>
    </ul>
    <br/><br/>


    <li>Aggregations &amp; Annotations: <code>aggregate()</code>, <code>annotate()</code>, <code>F</code></li>
    <br/>
    <ul>
        <li>Aggregations return a single result (dictionary):</li>
<pre><code class="language-python line-numbers">from django.db.models import Count, Avg, Max, Min

stats = Book.objects.aggregate(
    total=Count(&quot;id&quot;),
    avg_rating=Avg(&quot;rating&quot;),
    max_rating=Max(&quot;rating&quot;),
)
# {&quot;total&quot;: 42, &quot;avg_rating&quot;: 4.2, &quot;max_rating&quot;: 5}</code></pre>
        <br/>
        <li><code>annotate()</code> adds calculated fields to each row:</li>
<pre><code class="language-python line-numbers"># Number of books per author
authors = Author.objects.annotate(book_count=Count(&quot;books&quot;))

for a in authors:
    print(a.name, a.book_count)</code></pre>
        <br/>
        <li><code>F</code> expressions let you refer to field values in updates or filters:</li>
<pre><code class="language-python line-numbers">from django.db.models import F

# Books where rating is greater than the author id (nonsense, but as example)
Book.objects.filter(rating__gt=F(&quot;author__id&quot;))

# Increase rating by 1 for all books
Book.objects.update(rating=F(&quot;rating&quot;) + 1)</code></pre>
    </ul>
    <br/><br/>


    <li>Creating, Updating, Deleting: <code>create()</code>, <code>update()</code>, <code>delete()</code></li>
    <br/>
    <ul>
        <li>Create:</li>
<pre><code class="language-python line-numbers"># 1. Using .create()
book = Book.objects.create(
    title=&quot;New Django Book&quot;,
    rating=5,
    author=some_author,
)

# 2. Instance + .save()
book = Book(title=&quot;Another Book&quot;, rating=3, author=some_author)
book.save()</code></pre>
        <br/>
        <li>Bulk create for performance:</li>
<pre><code class="language-python line-numbers">Book.objects.bulk_create([
    Book(title=&quot;Book 1&quot;, rating=4, author=some_author),
    Book(title=&quot;Book 2&quot;, rating=5, author=some_author),
])</code></pre>
        <br/>
        <li>Update a set of rows in one query:</li>
<pre><code class="language-python line-numbers"># Set rating to 0 for all books without rating
Book.objects.filter(rating__isnull=True).update(rating=0)</code></pre>
        <br/>
        <li>Delete:</li>
<pre><code class="language-python line-numbers"># Delete one instance
book = Book.objects.get(pk=1)
book.delete()

# Delete many at once
Book.objects.filter(rating__lt=2).delete()</code></pre>
        <br/>
        <li><b>Important:</b> <code>bulk_create()</code> or <code>QuerySet.update()</code> do not call model <code>save()</code> or signals.</li>
    </ul>
    <br/><br/>


    <li>Special Helpers: <code>get_or_create()</code>, <code>update_or_create()</code></li>
    <br/>
    <ul>
        <li><code>get_or_create()</code> tries to <code>get()</code> an object; if not found, <code>create()</code> it, and returns a tuple <code>(obj, created)</code>.</li>
<pre><code class="language-python line-numbers">author, created = Author.objects.get_or_create(
    name=&quot;Alice&quot;,
)

if created:
    print(&quot;New author created&quot;)
else:
    print(&quot;Existing author reused&quot;)</code></pre>
        <br/>
        <li><code>update_or_create()</code>
            tries to find by lookup fields; if found, update fields, else creates new object. Also returns <code>(obj, created)</code>.</li>
<pre><code class="language-python line-numbers">book, created = Book.objects.update_or_create(
    title=&quot;Versioned Django&quot;,
    defaults={&quot;rating&quot;: 5, &quot;author&quot;: some_author},
)</code></pre>
    </ul>
    <br/><br/>


    <li>QuerySet Utility Methods: <code>count()</code>, <code>exists()</code>, <code>distinct()</code>, <code>reverse()</code></li>
    <br/>
    <ul>
        <li><code>count()</code> is efficient <code>SELECT COUNT(*)</code>:</li>
<pre><code class="language-python line-numbers">Book.objects.filter(rating__gte=4).count()</code></pre>
        <br/>
        <li><code>exists()</code> checks if any rows match, using <code>SELECT (1)</code> and <code>LIMIT 1</code>:</li>
<pre><code class="language-python line-numbers">Book.objects.filter(rating=5).exists()  # True / False</code></pre>
        <br/>
        <li><code>distinct()</code> removes duplicates:</li>
<pre><code class="language-python line-numbers"># all distinct ratings
ratings = Book.objects.values_list(&quot;rating&quot;, flat=True).distinct()</code></pre>
        <br/>
        <li><code>reverse()</code> reverses the ordering (useful after an <code>order_by()</code>):</li>
<pre><code class="language-python line-numbers">qs = Book.objects.order_by(&quot;title&quot;)
reversed_qs = qs.reverse()</code></pre>
    </ul>
    <br/><br/>


    <li>Custom Managers &amp; Custom QuerySet Methods</li>
    <br/>
    <ul>
        <li>You can add your own helper methods to make queries reusable and expressive.</li>
        <br/>
        <li>Custom <code>QuerySet</code>:</li>
<pre><code class="language-python line-numbers">from django.db import models


class BookQuerySet(models.QuerySet):
    def high_rated(self):
        return self.filter(rating__gte=4)

    def published(self):
        return self.filter(published_at__isnull=False)</code></pre>
        <br/>
        <li>Attach to a custom manager:</li>
<pre><code class="language-python line-numbers">class BookManager(models.Manager):
    def get_queryset(self):
        return BookQuerySet(self.model, using=self._db)

    def high_rated(self):
        return self.get_queryset().high_rated()</code></pre>
        <br/>
        <li>Use in your model:</li>
<pre><code class="language-python line-numbers">class Book(models.Model):
    # fields...
    objects = BookManager()</code></pre>
        <br/>
        <li>Now you can do:</li>
<pre><code class="language-python line-numbers">Book.objects.high_rated().published()</code></pre>
        <br/>
        <li>Pattern:
            <ul>
                <li>Put reusable filters into <code>QuerySet</code> methods.</li>
                <li>Use a manager returning that <code>QuerySet</code> so you can chain methods nicely.</li>
            </ul>
        </li>
    </ul>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-model-filter-pattern">Django Model Filter Pattern</h3>
<ol>

    <li>What Is the Django Model Filter Pattern?</li>
    <br/>
    <ul>
        <li>The Django ORM allows querying model objects using a powerful “lookup expression” system based on double-underscore (<code>__</code>) syntax.</li>
        <br/>
        <li>This pattern is used in methods such as:
            <ul>
                <li><code>filter()</code></li>
                <li><code>exclude()</code></li>
                <li><code>get()</code></li>
                <li><code>update()</code></li>
            </ul>
        </li>
        <br/>
        <li>Example of filtering users older than 18:</li>
<pre><code class="language-python line-numbers">User.objects.filter(age__gt=18)</code></pre>
        <br/>
        <li>The lookup expression (<code>age__gt</code>) tells Django how to construct SQL behind the scenes.</li>
    </ul>
    <br/><br/>


    <li>Basic Lookup Expressions</li>
    <br/>
    <ul>
        <li>Django supports many built-in lookups. Here are the most commonly used:</li>
        <br/>
        <table>
            <thead>
                <tr>
                    <th>Lookup</th>
                    <th>Meaning</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>field__exact</code></td>
                    <td>Exact match</td>
                </tr>
                <tr>
                    <td><code>field__iexact</code></td>
                    <td>Case‑insensitive exact match</td>
                </tr>
                <tr>
                    <td><code>field__contains</code></td>
                    <td>Substring match</td>
                </tr>
                <tr>
                    <td><code>field__icontains</code></td>
                    <td>Case‑insensitive substring</td>
                </tr>
                <tr>
                    <td><code>field__startswith</code></td>
                    <td>Starts-with substring</td>
                </tr>
                <tr>
                    <td><code>field__istartswith</code></td>
                    <td>Case-insensitive version</td>
                </tr>
                <tr>
                    <td><code>field__endswith</code></td>
                    <td>Ends-with substring</td>
                </tr>
                <tr>
                    <td><code>field__iendswith</code></td>
                    <td>Case-insensitive version</td>
                </tr>
            </tbody>
        </table>
        <br/>
        <li>Examples:</li>
<pre><code class="language-python line-numbers">Book.objects.filter(title__icontains="django")
User.objects.filter(email__endswith="@gmail.com")
</code></pre>
    </ul>
    <br/><br/>


    <li>Numeric and Comparison Lookups</li>
    <br/>
    <ul>
        <li>Django supports many SQL comparison operators:</li>
        <br/>
        <table>
            <thead>
                <tr>
                    <th>Lookup</th>
                    <th>Meaning</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>field__gt</code></td>
                    <td>Greater than</td>
                </tr>
                <tr>
                    <td><code>field__gte</code></td>
                    <td>Greater than or equal</td>
                </tr>
                <tr>
                    <td><code>field__lt</code></td>
                    <td>Less than</td>
                </tr>
                <tr>
                    <td><code>field__lte</code></td>
                    <td>Less than or equal</td>
                </tr>
                <tr>
                    <td><code>field__range</code></td>
                    <td>Between two values (inclusive)</td>
                </tr>
            </tbody>
        </table>
        <br/>
<pre><code class="language-python line-numbers">Product.objects.filter(price__gt=100)
Order.objects.filter(total__range=(50, 100))
</code></pre>
    </ul>
    <br/><br/>


    <li>Date and Time Lookups</li>
    <br/>
    <ul>
        <li>Special lookups for <code>DateField</code> and <code>DateTimeField</code>:</li>
        <br/>
        <table>
            <thead>
                <tr>
                    <th>Lookup</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>field__date</code></td>
                    <td>Extract date component</td>
                </tr>
                <tr>
                    <td><code>field__year</code></td>
                    <td>Matches by year</td>
                </tr>
                <tr>
                    <td><code>field__month</code></td>
                    <td>Matches by month</td>
                </tr>
                <tr>
                    <td><code>field__day</code></td>
                    <td>Matches by day</td>
                </tr>
                <tr>
                    <td><code>field__week_day</code></td>
                    <td>Matches by week day (1 = Sunday)</td>
                </tr>
                <tr>
                    <td><code>field__hour</code></td>
                    <td>Matches by hour</td>
                </tr>
                <tr>
                    <td><code>field__minute</code></td>
                    <td>Matches by minute</td>
                </tr>
            </tbody>
        </table>
        <br/>
        <li>Examples:</li>
<pre><code class="language-python line-numbers">Event.objects.filter(timestamp__year=2025)
Log.objects.filter(timestamp__date="2025-05-01")
</code></pre>
    </ul>
    <br/><br/>


    <li>Null and Boolean Lookups</li>
    <br/>
    <ul>
        <li>Check if a value is NULL:</li>
<pre><code class="language-python line-numbers">User.objects.filter(last_login__isnull=True)</code></pre>
        <br/>
        <li>Boolean fields can be filtered directly:</li>
<pre><code class="language-python line-numbers">Order.objects.filter(is_paid=True)</code></pre>
    </ul>
    <br/><br/>


    <li>Membership Lookups (IN, NOT IN)</li>
    <br/>
    <ul>
        <li>Check if a field is one of several values:</li>
<pre><code class="language-python line-numbers">Book.objects.filter(id__in=[1, 2, 3])
User.objects.exclude(role__in=["admin", "moderator"])
</code></pre>
        <br/>
        <li>Translates to SQL <code>IN (...)</code>.</li>
    </ul>
    <br/><br/>


    <li>Relational Lookups (Foreign Keys)</li>
    <br/>
    <ul>
        <li>Filters can traverse relationships using double underscores:</li>
<pre><code class="language-python line-numbers">Order.objects.filter(customer__email__icontains="gmail.com")
Book.objects.filter(author__age__gt=40)
</code></pre>
        <br/>
        <li>This performs SQL JOINs automatically.</li>
    </ul>
    <br/><br/>


    <li>Reverse Relationship Lookups</li>
    <br/>
    <ul>
        <li>Use the related name or modelname_set to filter backwards:</li>
<pre><code class="language-python line-numbers">Author.objects.filter(book__title__icontains="python")
# or using related_name="books"
Author.objects.filter(books__title__icontains="python")
</code></pre>
        <br/>
        <li>Reverse lookups return authors who have at least one matching book.</li>
    </ul>
    <br/><br/>


    <li>Advanced Lookups (Regex, F, Q)</li>
    <br/>
    <ul>
        <li>Django supports regular expressions:</li>
<pre><code class="language-python line-numbers">User.objects.filter(username__regex=r'^[A-Z].*')
</code></pre>
        <br/>
        <li>Case-insensitive regex:</li>
<pre><code class="language-python line-numbers">User.objects.filter(username__iregex=r'^admin')
</code></pre>
        <br/>
        <li>Using <code>Q</code> objects (OR queries):</li>
<pre><code class="language-python line-numbers">from django.db.models import Q

User.objects.filter(Q(age__gt=18) | Q(is_staff=True))
</code></pre>
        <br/>
        <li>Using <code>F</code> expressions (field-to-field comparisons):</li>
<pre><code class="language-python line-numbers">Product.objects.filter(stock__lt=F('min_stock'))
</code></pre>
    </ul>
    <br/><br/>


    <li>Chaining Filters</li>
    <br/>
    <ul>
        <li>You can chain multiple filters:</li>
<pre><code class="language-python line-numbers">Product.objects.filter(price__gt=10).filter(price__lt=100)
</code></pre>
        <br/>
        <li>This is equivalent to:</li>
<pre><code class="language-python line-numbers">Product.objects.filter(price__gt=10, price__lt=100)
</code></pre>
    </ul>
    <br/><br/>


    <li>Custom Lookups (Extending the Pattern)</li>
    <br/>
    <ul>
        <li>Django allows you to extend the lookup system by creating custom lookup classes.</li>
        <br/>
        <li>Example: create a <code>contains_number</code> lookup:</li>
<pre><code class="language-python line-numbers">from django.db.models import Lookup, CharField
from django.db.models.expressions import RawSQL

class ContainsNumber(Lookup):
    lookup_name = 'contains_number'

    def as_sql(self, compiler, connection):
        lhs, params = self.process_lhs(compiler, connection)
        return f"{lhs} ~ '[0-9]'", params

CharField.register_lookup(ContainsNumber)
</code></pre>
        <br/>
        <li>Usage:</li>
<pre><code class="language-python line-numbers">User.objects.filter(username__contains_number=True)
</code></pre>
        <br/>
        <li>You can register lookups globally for:
            <ul>
                <li><code>CharField</code></li>
                <li><code>IntegerField</code></li>
                <li><code>DateField</code></li>
                <li>any Django field type</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Filter vs Exclude vs Get</li>
    <br/>
    <ul>
        <li><code>filter()</code> returns a queryset (0..n records)</li>
        <br/>
        <li><code>exclude()</code> is the opposite of filter</li>
        <br/>
        <li><code>get()</code> returns exactly one object, raises error if not 1</li>
<pre><code class="language-python line-numbers">User.objects.get(id=1)
# Raises MultipleObjectsReturned or DoesNotExist
</code></pre>
    </ul>
    <br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-model-aggregation">Models Aggregation in Django (SUM, AVG, COUNT, MAX, MIN, etc.)</h3>
<ol>

    <li><b>What Is Aggregation?</b></li>
    <br/>
    <ul>
        <li><b>Aggregation</b> in Django means performing operations over a set of rows and returning a <u>single value</u>, such as:
            <ul>
                <li>COUNT</li>
                <li>SUM</li>
                <li>AVG</li>
                <li>MAX</li>
                <li>MIN</li>
            </ul>
        </li>
        <br/>
        <li>Django provides aggregation tools inside the ORM so you never need to write SQL manually.</li>
        <br/>
        <li>Aggregations use the <code>aggregate()</code> method and built-in functions from <code>django.db.models</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Example Model for This Chapter</b></li>
<pre><code class="language-py line-numbers"># shop/models.py

from django.db import models

class Product(models.Model):
    name = models.CharField(max_length=200)
    price = models.DecimalField(max_digits=8, decimal_places=2)
    stock = models.IntegerField()
    rating = models.FloatField()
</code></pre>

    <ul>
        <li>Make migrations inside a virtual environment:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
python3 manage.py migrate
</code></pre>

    <br/><br/>


    <li><b>Using <code>aggregate()</code></b></li>
    <br/>
    <ul>
        <li>The <code>aggregate()</code> method sends a single SQL query that returns a dictionary.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db.models import Count, Sum, Avg, Max, Min

Product.objects.aggregate(total_count=Count("id"))
</code></pre>

    <ul>
        <li>Returns:</li>
    </ul>

<pre><code class="language-py line-numbers">{'total_count': 42}
</code></pre>

    <br/><br/>


    <li><b>COUNT Aggregation</b></li>
<pre><code class="language-py line-numbers">from django.db.models import Count

Product.objects.aggregate(total_products=Count("id"))
</code></pre>

    <ul>
        <li>Equivalent to SQL: <code>SELECT COUNT(*) FROM product</code>.</li>
    </ul>

    <br/><br/>


    <li><b>SUM Aggregation</b></li>
<pre><code class="language-py line-numbers">Product.objects.aggregate(total_stock=Sum("stock"))
</code></pre>

    <ul>
        <li>Returns sum of stock across all products.</li>
    </ul>

    <br/><br/>


    <li><b>AVG Aggregation</b></li>
<pre><code class="language-py line-numbers">Product.objects.aggregate(average_price=Avg("price"))
</code></pre>

    <br/><br/>


    <li><b>MAX and MIN Aggregation</b></li>
<pre><code class="language-py line-numbers">Product.objects.aggregate(
    highest_price=Max("price"),
    lowest_price=Min("price")
)
</code></pre>

    <br/><br/>


    <li><b>Multiple Aggregations at Once</b></li>
<pre><code class="language-py line-numbers">Product.objects.aggregate(
    avg_price=Avg("price"),
    total_stock=Sum("stock"),
    max_rating=Max("rating")
)
</code></pre>

    <ul>
        <li>Runs a single SQL query, not multiple.</li>
    </ul>

    <br/><br/>


    <li><b>Using Expressions (F and ExpressionWrapper)</b></li>
<pre><code class="language-py line-numbers">from django.db.models import F, Sum

Product.objects.aggregate(
    total_value=Sum(F("price") * F("stock"))
)
</code></pre>

    <ul>
        <li>Calculates inventory total value (price × stock).</li>
        <li>Django converts expression into SQL automatically.</li>
    </ul>

    <br/><br/>


    <li><b>Aggregating With Filters (Filter then Aggregate)</b></li>
<pre><code class="language-py line-numbers">Product.objects
    .filter(rating__gte=4.5)
    .aggregate(high_rated_count=Count("id"))
</code></pre>

    <ul>
        <li>Useful for analytics dashboards.</li>
    </ul>

    <br/><br/>


    <li><b>Aggregation With Annotation (Per-row Aggregation)</b></li>
    <br/>
    <ul>
        <li><code>annotate()</code> computes aggregated values <u>per object</u> rather than for the whole table.</li>
        <br/>
        <li>This is powerful for grouping.</li>
    </ul>

    <br/><br/>


    <li><b>Example: Total orders per product</b></li>

<pre><code class="language-py line-numbers">from django.db.models import Sum

Product.objects.annotate(
    order_quantity=Sum("order__quantity")
)
</code></pre>

    <ul>
        <li>This gives each product an additional attribute <code>order_quantity</code>.</li>
    </ul>

    <br/><br/>


    <li><b>Grouping Data (Using <code>values()</code> + <code>annotate()</code>)</b></li>
    <br/>
    <ul>
        <li>Similar to SQL <code>GROUP BY</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">Product.objects.values("category").annotate(
    avg_price=Avg("price"),
    count=Count("id")
)
</code></pre>

    <ul>
        <li>Returns one row per category.</li>
    </ul>

    <br/><br/>


    <li><b>Distinct Aggregation</b></li>
    <br/>
    <ul>
        <li>You can count distinct values using <code>distinct=True</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">Product.objects.aggregate(
    unique_ratings=Count("rating", distinct=True)
)
</code></pre>

    <br/><br/>


    <li><b>Using Aggregation With Related Models</b></li>
<pre><code class="language-py line-numbers"># ForeignKey: Product → Category

Category.objects.annotate(
    total_products=Count("product")
)
</code></pre>

    <ul>
        <li>Adds a <code>total_products</code> field to each category.</li>
    </ul>

    <br/><br/>


    <li><b>Ordering Aggregated Results</b></li>
<pre><code class="language-py line-numbers">Category.objects.annotate(
    total_products=Count("product")
).order_by("-total_products")
</code></pre>

    <ul>
        <li>Sort categories by number of products.</li>
    </ul>

    <br/><br/>


    <li><b>Handling Null Values in Aggregation</b></li>
<pre><code class="language-py line-numbers">Product.objects.aggregate(
    avg_rating=Avg("rating")
)
</code></pre>

    <ul>
        <li>Django ignores <code>NULL</code> values automatically.</li>
    </ul>

    <br/><br/>


    <li><b>Raw SQL Equivalent</b></li>
    <br/>
    <ul>
        <li>Django translates aggregation into SQL such as:</li>
    </ul>

<pre><code class="language-sql line-numbers">SELECT AVG(price) AS avg_price FROM shop_product;
</code></pre>

    <ul>
        <li>This is handled by the ORM for you.</li>
    </ul>

    <br/>
</ol>
<br/>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-model-research">Models Research — Basic Searching in Django</h3>
<ol>

    <li><b>What Does It Mean?</b></li>
    <br/>
    <ul>
        <li>In this context, "Models Research" means <u>searching through your Django model data</u>.</li>
        <br/>
        <li>You often search when users type something into a search bar:
            <ul>
                <li>search blog posts</li>
                <li>filter products</li>
                <li>find users</li>
                <li>search comments</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Example Model for Demonstration</b></li>
<pre><code class="language-py line-numbers">from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return self.title
</code></pre>

    <br/><br/>


    <li><b>Basic Searching With <code>filter()</code></b></li>
    <br/>
    <ul>
        <li>The simplest form of searching uses <code>filter()</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title="Hello World")
</code></pre>

    <ul>
        <li>Django translates this into an SQL <code>WHERE</code> query automatically.</li>
    </ul>
    <br/><br/>


    <li><b>Useful Field Lookups for Searching</b></li>
    <br/>
    <ul>
        <li>Django provides many flexible "lookup" keywords:</li>
    </ul>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Lookup</th>
                <th>Example</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>icontains</code></td>
                <td><code>title__icontains="django"</code></td>
                <td>Case-insensitive substring search (very commonly used)</td>
            </tr>
            <tr>
                <td><code>contains</code></td>
                <td><code>title__contains="Django"</code></td>
                <td>Case-sensitive substring search</td>
            </tr>
            <tr>
                <td><code>startswith</code></td>
                <td><code>title__startswith="Hello"</code></td>
                <td>Search by prefix</td>
            </tr>
            <tr>
                <td><code>iexact</code></td>
                <td><code>title__iexact="hello"</code></td>
                <td>Case-insensitive exact match</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Using <code>Q</code> Objects for OR Conditions</b></li>
    <br/>
    <ul>
        <li>By default, multiple conditions in <code>filter()</code> use <b>AND</b>.</li>
        <li>To create an <b>OR</b> search, use <code>Q</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db.models import Q

Post.objects.filter(
    Q(title__icontains="django") | Q(body__icontains="django")
)
</code></pre>

    <ul>
        <li>This finds posts where either field contains the word "django".</li>
    </ul>
    <br/><br/>


    <li><b>Searching Across Multiple Fields</b></li>
    <br/>
    <ul>
        <li>A common search bar pattern:</li>
        <li>Query both <code>title</code> and <code>body</code> with the same user input.</li>
    </ul>

<pre><code class="language-py line-numbers">query = "hello"

Post.objects.filter(
    Q(title__icontains=query) |
    Q(body__icontains=query)
)
</code></pre>

    <ul>
        <li>This is the simplest “multi-field search”.</li>
    </ul>
    <br/><br/>


    <li><b>Handling Search Input From a Form</b></li>
<pre><code class="language-html line-numbers">&lt;form method="get"&gt;
    &lt;input type="text" name="q" placeholder="Search..." /&gt;
    &lt;button type="submit"&gt;Go&lt;/button&gt;
&lt;/form&gt;
</code></pre>

    <ul>
        <li>Then in the view:</li>
    </ul>

<pre><code class="language-py line-numbers">query = request.GET.get("q", "")

results = Post.objects.filter(
    Q(title__icontains=query) |
    Q(body__icontains=query)
)
</code></pre>

    <br/><br/>


    <li><b>Is SQL Injection Possible?</b></li>
    <br/>
    <ul>
        <li>No — Django ORM always escapes user input safely.</li>
        <li>This is safe even if the user types weird characters:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.filter(title__icontains=request.GET.get("q"))
</code></pre>

    <br/><br/>


    <li><b>Displaying Simple Search Results</b></li>
<pre><code class="language-html line-numbers">&lt;h2&gt;Results for "{{ q }}"&lt;/h2&gt;

{% for post in results %}
    &lt;div&gt;
        &lt;h3&gt;{{ post.title }}&lt;/h3&gt;
        &lt;p&gt;{{ post.body|truncatechars:150 }}&lt;/p&gt;
    &lt;/div&gt;
{% empty %}
    &lt;p&gt;No matching posts found.&lt;/p&gt;
{% endfor %}
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-model-managers">Model Managers in Django</h3>
<ol>

    <li><b>What Is a Model Manager?</b></li>
    <br/>
    <ul>
        <li>Every Django model has at least one <u>Manager</u> which acts as the main interface between your model and the database.</li>
        <br/>
        <li>The default manager for every model is <code>objects</code>.
            <br/>Example:
            <pre><code class="language-py">Post.objects.all()</code></pre>
        </li>
    </ul>
    <br/><br/>


    <li><b>Default Manager: <code>objects</code></b></li>
    <br/>
    <ul>
        <li>Every model automatically gets:</li>
    </ul>

<pre><code class="language-py line-numbers">class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()

# Default manager
Post.objects.all()
</code></pre>

    <ul>
        <li>But you can <u>add additional managers</u> or <u>replace the default</u>.</li>
    </ul>

    <br/><br/>


    <li><b>Creating a Custom Manager</b></li>
<pre><code class="language-py line-numbers">from django.db import models

class PublishedManager(models.Manager):
    def get_queryset(self):
        return super().get_queryset().filter(is_published=True)
</code></pre>

    <ul>
        <li>This manager redefines <code>get_queryset()</code> to show only published posts.</li>
    </ul>

    <br/>
    <br/>

    <ul>
        <li>Attach it to your model:</li>
    </ul>

<pre><code class="language-py line-numbers">class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    is_published = models.BooleanField(default=False)

    objects = models.Manager()           # default manager
    published = PublishedManager()       # custom manager
</code></pre>

    <br/>

    <ul>
        <li>Using the managers:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.all()        # returns all posts
Post.published.all()      # returns only published posts
</code></pre>

    <br/><br/>


    <li><b>Adding Helper Methods to a Manager</b></li>
    <br/>
    <ul>
        <li>You can define custom helper methods to simplify complex queries.</li>
    </ul>

<pre><code class="language-py line-numbers">class PostManager(models.Manager):
    def recent(self):
        return self.get_queryset().order_by("-created_at")[:5]

class Post(models.Model):
    ...
    objects = PostManager()
</code></pre>

    <ul>
        <li>Use it like:</li>
    </ul>

<pre><code class="language-py line-numbers">Post.objects.recent()</code></pre>

    <br/><br/>


    <li><b>Multiple Managers on One Model</b></li>
<pre><code class="language-py line-numbers">class Post(models.Model):
    ...
    objects = models.Manager()           # default
    published = PublishedManager()       # custom
    recent = PostManager()               # custom
</code></pre>

    <ul>
        <li>You can use:</li>
    </ul>
<pre><code class="language-py">Post.published.all()</code></pre>
<pre><code class="language-py">Post.recent.recent()</code></pre>

    <br/><br/>


    <li><b>Using Managers With ForeignKeys (related_name)</b></li>
<pre><code class="language-py line-numbers">class Comment(models.Model):
    post = models.ForeignKey(Post, on_delete=models.CASCADE, related_name="comments")
    text = models.TextField()
</code></pre>

    <ul>
        <li>Django automatically creates a related manager:</li>
    </ul>

<pre><code class="language-py line-numbers">post = Post.objects.get(id=1)
post.comments.all()               # reverse manager
</code></pre>

    <ul>
        <li>This is used heavily in relationships.</li>
    </ul>

    <br/><br/>


    <li><b>The Modern Way: Custom QuerySet + Manager</b></li>
    <br/>

    <ul>
        <li><b>Step 1 — Create a custom QuerySet</b></li>

    <pre><code class="language-py line-numbers">class PostQuerySet(models.QuerySet):
        def published(self):
            return self.filter(is_published=True)

        def recent(self):
            return self.order_by("-created_at")[:5]
    </code></pre>

        <br/>

        <li><b>Step 2 — Attach it to a Manager</b></li>

    <pre><code class="language-py line-numbers">class PostManager(models.Manager):
        def get_queryset(self):
            return PostQuerySet(self.model, using=self._db)

        def published(self):
            return self.get_queryset().published()

        def recent(self):
            return self.get_queryset().recent()
    </code></pre>

        <br/>

        <li><b>Step 3 — Attach Manager to Model</b></li>

    <pre><code class="language-py line-numbers">class Post(models.Model):
        ...
        objects = PostManager()
    </code></pre>

        <br/>

        <ul>
            <li>Now you can chain methods:</li>
        </ul>

    <pre><code class="language-py line-numbers">Post.objects.published().recent()</code></pre>

        <ul>
            <li>This is much more powerful than plain Managers.</li>
        </ul>
    </ul>

    <br/><br/>


    <li><b>Replacing the Default Manager</b></li>
    <br/>
    <ul>
        <li>Sometimes you want the default QuerySet to always be filtered.</li>
        <li>Example: hide soft-deleted items by default.</li>
    </ul>

<pre><code class="language-py line-numbers">class ActiveManager(models.Manager):
    def get_queryset(self):
        return super().get_queryset().filter(is_deleted=False)

class User(models.Model):
    ...
    objects = ActiveManager()  # replaces default manager
</code></pre>

    <ul>
        <li>Now <code>User.objects.all()</code> hides deleted entries.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-raw-sql">Performing Raw SQL Queries in Django Models</h3>
<ol>

    <li><b>Why Use Raw SQL in Django?</b></li>
    <br/>
    <ul>
        <li>Django’s ORM is very powerful, but sometimes you need direct SQL because:</li>
        <ul>
            <li>a query is too complex for ORM</li>
            <li>you want database-specific optimization</li>
            <li>you want to call database functions or stored procedures</li>
            <li>you need full manual control over SQL</li>
        </ul>
        <br/>
        <li>Django allows raw SQL while keeping models safe and integrated.</li>
    </ul>
    <br/><br/>


    <li><b>Using <code>.raw()</code> for SELECT Queries</b></li>
    <br/>
    <ul>
        <li>Every model gets <code>Model.objects.raw()</code> for raw <code>SELECT</code> statements.</li>
        <li>Django will map the result rows into model instances.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py
from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
</code></pre>

<pre><code class="language-py line-numbers">posts = Post.objects.raw("SELECT * FROM blog_post")

for p in posts:
    print(p.title)
</code></pre>

    <ul>
        <li>The SQL must return all fields that the model requires.</li>
        <li>You can also select additional fields — Django will ignore them.</li>
    </ul>
    <br/><br/>


    <li><b>Using Parameters (Avoid SQL Injection!)</b></li>
    <br/>
    <ul>
        <li>Always use placeholders instead of string concatenation.</li>
        <li>Django uses the database's native param syntax (usually <code>%s</code>).</li>
    </ul>

<pre><code class="language-py line-numbers">title = "Hello"
posts = Post.objects.raw(
    "SELECT * FROM blog_post WHERE title = %s",
    [title]
)
</code></pre>

    <ul>
        <li>This is safe and recommended.</li>
    </ul>
    <br/><br/>


    <li><b>Executing Non-SELECT Queries with <code>connection.cursor()</code></b></li>
    <br/>
    <ul>
        <li>To execute <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, or custom SQL, use <code>cursor()</code>.</li>
        <li>You import it from:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import connection
</code></pre>

    <br/>

    <li><b>Example: Manual INSERT</b></li>

<pre><code class="language-py line-numbers">from django.db import connection

def insert_post(title, body):
    with connection.cursor() as cursor:
        cursor.execute(
            "INSERT INTO blog_post (title, body) VALUES (%s, %s)",
            [title, body]
        )
</code></pre>

    <br/>

    <li><b>Example: Manual UPDATE</b></li>

<pre><code class="language-py line-numbers">with connection.cursor() as cursor:
    cursor.execute(
        "UPDATE blog_post SET title = %s WHERE id = %s",
        ["New Title", 1]
    )
</code></pre>

    <br/>

    <li><b>Example: Manual DELETE</b></li>

<pre><code class="language-py line-numbers">with connection.cursor() as cursor:
    cursor.execute("DELETE FROM blog_post WHERE id = %s", [1])
</code></pre>

    <br/><br/>


    <li><b>Fetching Results Manually</b></li>
    <br/>
    <ul>
        <li>cursor can fetch rows manually:</li>
    </ul>

<pre><code class="language-py line-numbers">with connection.cursor() as cursor:
    cursor.execute("SELECT id, title FROM blog_post")
    rows = cursor.fetchall()

for row in rows:
    print(row)   # (id, title)
</code></pre>

    <br/><br/>


    <li><b>Using <code>dictfetchall()</code> for Dictionary Results</b></li>
    <br/>
    <ul>
        <li>Django doesn’t ship one, but the docs recommend writing your own helper.</li>
    </ul>

<pre><code class="language-py line-numbers">def dictfetchall(cursor):
    columns = [col[0] for col in cursor.description]
    return [
        dict(zip(columns, row))
        for row in cursor.fetchall()
    ]
</code></pre>

<pre><code class="language-py line-numbers">with connection.cursor() as cursor:
    cursor.execute("SELECT id, title FROM blog_post")
    results = dictfetchall(cursor)

for item in results:
    print(item["id"], item["title"])
</code></pre>

    <br/><br/>


    <li><b>Raw Query With Model Mapping + Extra Fields</b></li>
    <br/>
    <ul>
        <li>Django ignores extra fields unless you alias one of them as <code>pk</code> (primary key) with <code>AS</code>.</li>
    </ul>

<pre><code class="language-py line-numbers">posts = Post.objects.raw(
    "SELECT id, title, body, NOW() as retrieved_at FROM blog_post"
)

for p in posts:
    print(p.title)              # model field
    print(p.retrieved_at)       # extra attribute
</code></pre>

    <ul>
        <li>Django attaches unknown columns as attributes.</li>
    </ul>

    <br/><br/>


    <li><b>Running Raw SQL on a Specific Database (Multiple DBs)</b></li>
    <br/>

<pre><code class="language-py line-numbers">from django.db import connections

with connections["analytics"].cursor() as cursor:
    cursor.execute("SELECT COUNT(*) FROM stats_table")
    result = cursor.fetchone()
</code></pre>

    <br/><br/>


    <li><b>Using <code>Model.objects.raw()</code> With Complex Joins</b></li>
    <br/>

<pre><code class="language-py line-numbers">posts = Post.objects.raw("""
    SELECT p.*, COUNT(c.id) AS comment_count
    FROM blog_post p
    LEFT JOIN blog_comment c ON p.id = c.post_id
    GROUP BY p.id
""")
</code></pre>

    <ul>
        <li>You get model instances + an extra attribute <code>comment_count</code>.</li>
    </ul>

    <br/><br/><br/>


    <li><b>Warnings When Using Raw SQL</b></li>
    <br/>
    <ul>
        <li><b>NEVER</b> manually concatenate SQL strings — always use placeholders.</li>
        <br/>
        <li>Raw SQL bypasses type checking.</li>
        <br/>
        <li>Raw SQL bypasses database abstraction (not portable across databases).</li>
        <br/>
        <li>Raw <code>UPDATE</code> / <code>DELETE</code> do NOT trigger model signals (<code>pre_save</code>, <code>post_delete</code>, etc.).</li>
        <br/>
        <li>Raw queries do NOT use Django’s model validation.</li>
        <br/>
        <li>Retrieving model instances from <code>.raw()</code> bypasses QuerySet optimizations.</li>
    </ul>

    <br/><br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li>Django supports raw SQL through <code>.raw()</code> and <code>connection.cursor()</code>.</li>
        <br/>
        <li><code>.raw()</code> is used for <code>SELECT</code> queries that map to model instances.</li>
        <br/>
        <li><code>cursor()</code> is used for <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, and custom SQL.</li>
        <br/>
        <li>Query parameters should always use placeholders to avoid SQL injection.</li>
        <br/>
        <li>Raw SQL is powerful but should be used sparingly — prefer ORM when possible.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-transactions">Database Transactions in Django Models</h3>
<ol>

    <li>What Are Database Transactions?</li>
    <br/>
    <ul>
        <li>A <u>transaction</u> is a group of database operations that behave like a single unit.</li>
        <br/>
        <li>If any operation fails, the entire group is rolled back.</li>
        <br/>
        <li>Transactions guarantee the famous ACID properties:
            <ul>
                <li><u>A</u>tomicity – all or nothing</li>
                <li><u>C</u>onsistency – DB stays valid</li>
                <li><u>I</u>solation – transactions don’t interfere</li>
                <li><u>D</u>urability – committed data is saved</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Django’s Transaction API Overview</li>
    <br/>
    <ul>
        <li>Provided by <code>django.db.transaction</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import transaction
</code></pre>

    <ul>
        <li>Tools include:
            <ul>
                <li><code>transaction.atomic</code></li>
                <li><code>transaction.on_commit</code></li>
                <li><code>transaction.set_rollback()</code></li>
                <li><code>transaction.set_autocommit()</code></li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li>Using <code>transaction.atomic</code> (The Most Important Tool)</li>
    <br/>
    <ul>
        <li><code>atomic</code> makes a block of code run inside a single transaction.</li>
        <li>If an exception occurs, everything is <u>rolled back</u>.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import transaction

def create_order(user, product, qty):
    with transaction.atomic():
        order = Order.objects.create(user=user)
        OrderItem.objects.create(order=order, product=product, quantity=qty)
        product.stock -= qty
        product.save()
</code></pre>

    <ul>
        <li>If <code>product.save()</code> fails, <code>Order</code> and <code>OrderItem</code> are rolled back.</li>
    </ul>

    <br/><br/>


    <li>Using <code>atomic</code> as a Decorator</li>
<pre><code class="language-py line-numbers">@transaction.atomic
def add_post(title, body):
    Post.objects.create(title=title, body=body)
</code></pre>

    <br/><br/>


    <li>Nested <code>atomic()</code> Blocks</li>
    <br/>
    <ul>
        <li>Django uses <u>savepoints</u> to allow partial rollbacks inside a larger transaction.</li>
    </ul>

<pre><code class="language-py line-numbers">with transaction.atomic():
    # outer transaction
    Post.objects.create(title="Main")

    try:
        with transaction.atomic():
            # inner savepoint
            Comment.objects.create(text="Inner comment")
            raise ValueError("fail inner")   # only inner part rolls back
    except:
        pass

    Post.objects.create(title="Still saved")
</code></pre>

    <ul>
        <li>Only the inner block rolls back.</li>
        <li>The outer transaction continues.</li>
    </ul>

    <br/><br/>


    <li>Manually Controlling Savepoints</li>
<pre><code class="language-py line-numbers">sid = transaction.savepoint()
try:
    Product.objects.create(name="ABC")
    transaction.savepoint_commit(sid)
except:
    transaction.savepoint_rollback(sid)
</code></pre>

    <ul>
        <li>Rarely used — <code>atomic</code> is preferred.</li>
    </ul>

    <br/><br/>


    <li>Using <code>transaction.on_commit()</code></li>
    <br/>
    <ul>
        <li>It registers a callback, and runs the callback <u>only after the transaction successfully commits</u>.</li>
        <li>Useful for:
            <ul>
                <li>sending emails</li>
                <li>queuing background tasks</li>
                <li>logging</li>
            </ul>
        </li>
        <li>Prevents actions from happening if a rollback occurs.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import transaction

@transaction.atomic
def register_user(user):
    user.save()
    transaction.on_commit(lambda: print("User created:", user.id))
</code></pre>

    <ul>
        <li>The print happens only if commit succeeds.</li>
    </ul>

    <br/><br/>


    <li>Autocommit Mode (Default)</li>
    <br/>
    <ul>
        <li>Django defaults to <code>autocommit=True</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import transaction

transaction.get_autocommit()   # True
</code></pre>

    <ul>
        <li>Each ORM call executes its own database query automatically.</li>
        <li>No transaction is kept open unless you use <code>atomic()</code>.</li>
    </ul>

    <br/><br/>


    <li>Disabling Autocommit (Advanced)</li>
    <br/>
    <ul>
        <li>You can disable autocommit, but it is rarely recommended.</li>
    </ul>

<pre><code class="language-py line-numbers">transaction.set_autocommit(False)

try:
    Product.objects.create(name="X")
    transaction.commit()
except:
    transaction.rollback()
</code></pre>

    <ul>
        <li>Use <code>atomic()</code> instead of this manual approach.</li>
    </ul>

    <br/><br/>


    <li>Marking a Transaction for Rollback</li>
    <br/>
    <ul>
        <li>You can force a rollback:</li>
    </ul>

<pre><code class="language-py line-numbers">with transaction.atomic():
    transaction.set_rollback(True)
</code></pre>

    <ul>
        <li>This simulates an error and causes the block to roll back.</li>
    </ul>

    <br/><br/>


    <li>Transactions in Views</li>
<pre><code class="language-py line-numbers">from django.db import transaction
from django.http import HttpResponse

@transaction.atomic
def my_view(request):
    Order.objects.create(...)
    return HttpResponse("Order placed!")
</code></pre>

    <ul>
        <li>Any error → rollback.</li>
    </ul>

    <br/><br/>


    <li>Handling Integrity Errors</li>
    <br/>
    <ul>
        <li>Violating database constraints raises <code>IntegrityError</code>.</li>
        <li>Example: duplicate unique fields.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.db import IntegrityError, transaction

try:
    with transaction.atomic():
        User.objects.create(username="same")
except IntegrityError:
    print("Duplicate username!")
</code></pre>

    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-multiple-databases">Using Multiple Databases in Django Models</h3>
<ol>

    <li>Why Use Multiple Databases?</li>
    <br/>
    <ul>
        <li>Django supports using more than one database in a single project.</li>
        <br/>
        <li>Common reasons include:</li>
        <ul>
            <li>Read/Write splitting (master → write, replica → read)</li>
            <li>Using a separate database for specific apps (analytics, logs)</li>
            <li>Migrating from one DB to another</li>
            <li>Isolating legacy systems</li>
            <li>Sharding different data sets</li>
        </ul>
    </ul>
    <br/><br/>


    <li>Defining Multiple Databases in <code>settings.py</code></li>
    <br/>
    <ul>
        <li>You configure multiple database connections under <code>DATABASES</code>:</li>
    </ul>

<pre><code class="language-python line-numbers"># mysite/settings.py

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    },
    "analytics": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "analytics.sqlite3",
    },
}
</code></pre>

    <ul>
        <li>The key (<code>"analytics"</code>) becomes the database alias used throughout Django.</li>
    </ul>

    <br/><br/>


    <li>Running Migrations on a Specific Database</li>
<pre><code class="language-bash line-numbers">python3 manage.py migrate --database=analytics
</code></pre>

    <ul>
        <li>By default, migrations run against the <code>default</code> database.</li>
        <li>You choose where each model's tables should reside.</li>
    </ul>

    <br/><br/>


    <li>Saving an Object to a Specific Database</li>
    <br/>
    <ul>
        <li>You can specify which DB to write to using <code>using()</code>.</li>
    </ul>

<pre><code class="language-python line-numbers">post = Post(title="Hello", body="World")
post.save(using="analytics")
</code></pre>

    <br/><br/>


    <li>Querying a Specific Database</li>
<pre><code class="language-python line-numbers">Post.objects.using("analytics").all()
</code></pre>

    <ul>
        <li>Queries do not mix records across databases.</li>
    </ul>

    <br/><br/>


    <li>Deleting From a Specific Database</li>
<pre><code class="language-python line-numbers">post.delete(using="analytics")
</code></pre>

    <br/><br/>


    <li>Using Multiple Databases with Raw SQL</li>
<pre><code class="language-python line-numbers">from django.db import connections

with connections["analytics"].cursor() as cursor:
    cursor.execute("SELECT COUNT(*) FROM blog_post")
    count = cursor.fetchone()
</code></pre>

    <br/><br/>


    <li>Database Routers (Core of Multi-DB Architecture)</li>
    <br/>
    <ul>
        <li>A <u>database router</u> decides:
            <ul>
                <li>which DB to read from</li>
                <li>which DB to write to</li>
                <li>where to migrate models</li>
                <li>whether relations between databases are allowed</li>
            </ul>
        </li>
        <br/>
        <li>You implement routers in a separate Python file.</li>
    </ul>

<pre><code class="language-python line-numbers"># mysite/dbrouters.py

class AnalyticsRouter:
    app_label = "analytics_app"

    def db_for_read(self, model, **hints):
        if model._meta.app_label == self.app_label:
            return "analytics"
        return None

    def db_for_write(self, model, **hints):
        if model._meta.app_label == self.app_label:
            return "analytics"
        return None

    def allow_migrate(self, db, app_label, model_name=None, **hints):
        if app_label == self.app_label:
            return db == "analytics"
        return None
</code></pre>

    <ul>
        <li>This router sends all models of <code>analytics_app</code> to the <code>"analytics"</code> DB.</li>
    </ul>

    <br/><br/>


    <li>Activating Database Routers</li>
<pre><code class="language-python line-numbers"># mysite/settings.py

DATABASE_ROUTERS = ["mysite.dbrouters.AnalyticsRouter"]
</code></pre>

    <ul>
        <li>You can register multiple router classes.</li>
    </ul>

    <br/><br/>


    <li>Models and App Label for Routing</li>
    <br/>
    <ul>
        <li>Routers rely heavily on identifying which app a model belongs to:</li>
    </ul>

<pre><code class="language-python line-numbers">class Report(models.Model):
    ...

    class Meta:
        app_label = "analytics_app"
</code></pre>

    <ul>
        <li>Every app has an <code>app_label</code> automatically assigned from its app folder name.</li>
    </ul>

    <br/><br/>


    <li>Reading from One DB and Writing to Another</li>
    <br/>
    <ul>
        <li>You may need to read from replicas and write to the master DB:</li>
    </ul>

<pre><code class="language-python line-numbers">replicas = ["replica1", "replica2"]

def random_read_db():
    import random
    return random.choice(replicas)

Post.objects.using(random_read_db()).filter(...)
</code></pre>

    <br/><br/>


    <li>Transaction Management With Multiple Databases</li>
    <br/>
    <ul>
        <li>Important: transactions do <u>not</u> span multiple databases automatically!</li>
        <li>You must explicitly use <code>atomic()</code> per database:</li>
    </ul>

<pre><code class="language-python line-numbers">from django.db import transaction

with transaction.atomic(using="default"):
    # write to default DB
    ...

with transaction.atomic(using="analytics"):
    # write to analytics DB
    ...
</code></pre>

    <ul>
        <li>No automatic distributed transactions (i.e., no two-phase commit).</li>
    </ul>

    <br/><br/>


    <li>Cross-Database Foreign Keys Are Not Allowed</li>
    <br/>
    <ul>
        <li>Django does <u>not</u> allow foreign keys between databases.</li>
        <li>If needed, you must handle relations manually (using integer fields, UUIDs, etc.).</li>
        <li>Routers can be configured to reject cross-database relationships:</li>
    </ul>

<pre><code class="language-python line-numbers">def allow_relation(self, obj1, obj2, **hints):
    if obj1._state.db == obj2._state.db:
        return True
    return False
</code></pre>

    <br/><br/>


    <li>Using Different Databases for Different Django Apps</li>
    <br/>
    <ul>
        <li>Example: <code>shop</code> app uses <code>default</code>, <code>analytics_app</code> uses <code>analytics</code> DB.</li>
    </ul>

<pre><code class="language-python line-numbers">class ShopRouter:
    def db_for_read(self, model, **hints):
        if model._meta.app_label == "analytics_app":
            return "analytics"
        return "default"
</code></pre>

    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-settings-databases">Understanding the <code>DATABASES</code> Setting in Django</h3>
<ol>

    <li><b>What Is the</b> <code>DATABASES</code> <b>Setting?</b></li>
    <ul>
        <br/>
        <li>The <code>DATABASES</code> setting in <code>settings.py</code> tells Django:</li>
        <ul>
            <li>which database(s) to connect to</li>
            <li>what driver/engine to use</li>
            <li>what credentials and host to use</li>
            <li>how to manage transactions</li>
        </ul>
        <br/>
        <li>Every Django project must define at least one database — the <code>default</code> database.</li>
    </ul>
    <br/><br/>


    <li><b>The Basic Structure of <code>DATABASES</code></b></li>
    <br/>

<pre><code class="language-python line-numbers"># settings.py

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    }
}
</code></pre>

    <ul>
        <li><code>DATABASES</code> is a dictionary.</li>
        <li>Each key (e.g., <code>"default"</code>) is the alias of a database connection.</li>
        <li>Each value is a dictionary containing configuration details.</li>
    </ul>

    <br/><br/>


    <li><b>Supported Database Engines</b></li>
    <br/>
    <ul>
        <li>Django ships with built-in support for several databases.</li>
    </ul>
    <br/>

    <table>
        <thead>
            <tr>
                <th>ENGINE</th>
                <th>Description</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>django.db.backends.sqlite3</code></td>
                <td>Default, file-based database (good for development).</td>
                <td><code>"NAME": BASE_DIR / "db.sqlite3"</code></td>
            </tr>
            <tr>
                <td><code>django.db.backends.postgresql</code></td>
                <td>PostgreSQL (recommended for production).</td>
                <td><code>"ENGINE": "django.db.backends.postgresql"</code></td>
            </tr>
            <tr>
                <td><code>django.db.backends.mysql</code></td>
                <td>MySQL or MariaDB.</td>
                <td><code>"ENGINE": "django.db.backends.mysql"</code></td>
            </tr>
            <tr>
                <td><code>django.db.backends.oracle</code></td>
                <td>Oracle database.</td>
                <td><code>"ENGINE": "django.db.backends.oracle"</code></td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>Full Configuration Example (PostgreSQL)</b></li>
<pre><code class="language-python line-numbers">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.postgresql",
        "NAME": "mydatabase",
        "USER": "myuser",
        "PASSWORD": "mypassword",
        "HOST": "localhost",
        "PORT": "5432",
    }
}
</code></pre>

    <ul>
        <li>This is typical for production setups.</li>
    </ul>

    <br/><br/>


    <li><b>Explanation of All Common Options</b></li>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Option</th>
                <th>Description</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>ENGINE</code></td>
                <td>Database backend to use.</td>
                <td><code>"django.db.backends.postgresql"</code></td>
            </tr>
            <tr>
                <td><code>NAME</code></td>
                <td>Database name (or file path for SQLite).</td>
                <td><code>"mydb"</code></td>
            </tr>
            <tr>
                <td><code>USER</code></td>
                <td>Database username.</td>
                <td><code>"dbuser"</code></td>
            </tr>
            <tr>
                <td><code>PASSWORD</code></td>
                <td>Password for the database user.</td>
                <td><code>"secret"</code></td>
            </tr>
            <tr>
                <td><code>HOST</code></td>
                <td>Database host (IP or domain).</td>
                <td><code>"127.0.0.1"</code></td>
            </tr>
            <tr>
                <td><code>PORT</code></td>
                <td>Database port number.</td>
                <td><code>"5432"</code></td>
            </tr>
            <tr>
                <td><code>OPTIONS</code></td>
                <td>Advanced backend-specific options.</td>
                <td><code>{"sslmode": "require"}</code></td>
            </tr>
            <tr>
                <td><code>ATOMIC_REQUESTS</code></td>
                <td>If True: each HTTP request is wrapped in a DB transaction.</td>
                <td><code>True</code></td>
            </tr>
            <tr>
                <td><code>AUTOCOMMIT</code></td>
                <td>True = auto commit transactions (recommended).</td>
                <td><code>True</code></td>
            </tr>
            <tr>
                <td><code>CONN_MAX_AGE</code></td>
                <td>Persistent DB connections (seconds or <code>None</code>).</td>
                <td><code>60</code></td>
            </tr>
            <tr>
                <td><code>TEST</code></td>
                <td>Overrides DB settings for testing.</td>
                <td><code>{"NAME": "testdb"}</code></td>
            </tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>SQLite Special Case</b></li>
    <br/>
    <ul>
        <li>SQLite does not require username, password, host, or port.</li>
        <li>You simply specify a file path:</li>
    </ul>

<pre><code class="language-python line-numbers">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    }
}
</code></pre>

    <br/><br/>


    <li><b>Using Environment Variables (Best Practice!)</b></li>
    <br/>
    <ul>
        <li>Never hardcode database passwords into source code.</li>
        <li>Use environment variables instead.</li>
    </ul>

<pre><code class="language-python line-numbers">import os

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.postgresql",
        "NAME": os.environ["DB_NAME"],
        "USER": os.environ["DB_USER"],
        "PASSWORD": os.environ["DB_PASSWORD"],
        "HOST": os.environ["DB_HOST"],
        "PORT": os.environ["DB_PORT"],
    }
}
</code></pre>

    <br/><br/>


    <li><b>Multiple Databases</b></li>
    <br/>
    <ul>
        <li>You can define more than one database by adding more entries:</li>
    </ul>

<pre><code class="language-python line-numbers">DATABASES = {
    "default": {...},
    "analytics": {...},
    "legacy": {...},
}
</code></pre>

    <ul>
        <li>Use with <code>using()</code> and database routers.</li>
    </ul>

    <br/><br/>


    <li><b>Database Transactions and</b> <code>ATOMIC_REQUESTS</code></li>
    <br/>
    <ul>
        <li>If you set this:</li>
    </ul>

<pre><code class="language-python line-numbers">DATABASES = {
    "default": {
        ...
        "ATOMIC_REQUESTS": True,
    }
}
</code></pre>

    <ul>
        <li>Django will wrap <u>each HTTP request</u> in a database transaction.</li>
        <li>Useful for:
            <ul>
                <li>financial systems</li>
                <li>complex write operations</li>
            </ul>
        </li>
        <li>But can be expensive for high-traffic apps.</li>
    </ul>

    <br/><br/>


    <li><b>Persistent Connections</b> (<code>CONN_MAX_AGE</code>)</li>
    <br/>
    <ul>
        <li>By default, Django closes DB connections after each request.</li>
        <li>To reuse the same connection:</li>
    </ul>

<pre><code class="language-python line-numbers">CONN_MAX_AGE = 60       # keep connection for one minute
# CONN_MAX_AGE = None   # keep forever
</code></pre>

    <ul>
        <li>Improves performance for PostgreSQL/MySQL.</li>
    </ul>

    <br/><br/>


    <li><b>Testing Database Settings</b></li>
    <br/>
    <ul>
        <li>You can override DB settings for unit tests:</li>
    </ul>

<pre><code class="language-python line-numbers">DATABASES = {
    "default": {
        ...
        "TEST": {
            "NAME": "test_mysite"
        }
    }
}
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-models-model">Understanding <code>models.Model</code> in Django</h3>
<ol>

    <li><b>What Is</b> <code>models.Model</code>?</li>
    <br/>
    <ul>
        <li><code>models.Model</code> is the <u>base class</u> for all Django models. Every model you write in Django must inherit from it:</li>
<pre><code class="language-python line-numbers">from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
</code></pre>
    </ul>

    <br/>
    <ul>
        <li>This single line <code>class Post(models.Model)</code> tells Django:
            <ul>
                <li>Create a table for this model.</li>
                <li>Create fields (columns) based on attributes.</li>
                <li>Generate an ORM API for queries and operations.</li>
                <li>Add metadata (model name, app name, primary key, etc.).</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>How</b> <code>models.Model</code> <b>Creates a Database Table</b></li>
    <br/>
    <ul>
        <li>Django observes all subclasses of <code>Model</code>.</li>
        <li>When you run:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py makemigrations
python3 -m django migrate
</code></pre>

    <ul>
        <li>Django generates SQL such as:</li>
    </ul>

<pre><code class="language-sql line-numbers">CREATE TABLE app_post (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title VARCHAR(200) NOT NULL,
    body TEXT NOT NULL
);
</code></pre>

    <ul>
        <li>The mapping is:
            <ul>
                <li><b>Python class → SQL table</b></li>
                <li><b>Model fields → SQL columns</b></li>
                <li><b>Model instances → rows</b></li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Automatic Primary Key Field (<code>id</code>)</b></li>
    <br/>
    <ul>
        <li>If you do not define a primary key, Django adds one automatically:</li>
    </ul>

<pre><code class="language-python line-numbers">id = models.AutoField(primary_key=True)
</code></pre>

    <ul>
        <li>This auto-id increments for each row.</li>
        <li>You may override it:</li>
    </ul>

<pre><code class="language-python line-numbers">class User(models.Model):
    user_id = models.UUIDField(primary_key=True)
    username = models.CharField(max_length=50)
</code></pre>

    <br/><br/>


    <li><b>Defining Fields (Columns)</b></li>
    <br/>
    <ul>
        <li>All fields are defined using <code>models.&lt;FieldType&gt;</code>.</li>
        <li>Examples:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=100)
    price = models.DecimalField(max_digits=8, decimal_places=2)
    available = models.BooleanField(default=True)
    created_at = models.DateTimeField(auto_now_add=True)
</code></pre>

    <ul>
        <li>Each field tells Django:
            <ul>
                <li>What SQL type to use (<code>VARCHAR</code>, <code>TEXT</code>, <code>INTEGER</code>, <code>DATE</code>, etc.)</li>
                <li>Whether it is nullable, unique, indexed</li>
                <li>Default values</li>
                <li>Constraints</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Model Instances = Rows</b></li>
    <br/>
    <ul>
        <li>You create a row by instantiating a model:</li>
    </ul>

<pre><code class="language-python line-numbers">p = Product(name="Laptop", price=999.99)
p.save()       # INSERT into database
</code></pre>

    <ul>
        <li>Saving calls an <code>INSERT</code> statement.</li>
        <li>Updating an instance calls an <code>UPDATE</code>.</li>
    </ul>

<pre><code class="language-python line-numbers">p.price = 899.99
p.save()       # UPDATE in database
</code></pre>

    <ul>
        <li>ORM tracks the row by primary key (<code>p.id</code>).</li>
    </ul>

    <br/><br/>


    <li><b>Deleting Rows</b></li>
<pre><code class="language-python line-numbers">p = Product.objects.get(id=1)
p.delete()   # DELETE FROM table
</code></pre>

    <br/><br/>


    <li><b>Meta Class: Controlling Table Options</b></li>
    <br/>
    <ul>
        <li>Each model can define a nested <code>Meta</code> class.</li>
        <li>This controls Django’s behavior for the table:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=100)
    price = models.DecimalField(max_digits=8, decimal_places=2)

    class Meta:
        db_table = "store_products"
        ordering = ["name"]
        verbose_name = "Product"
        verbose_name_plural = "Products"
        indexes = [
            models.Index(fields=["name"]),
        ]
</code></pre>

    <ul>
        <li><b>Common Meta options</b>:</li>
        <ul>
            <li><code>db_table</code> → custom SQL table name</li>
            <li><code>ordering</code> → default sorting for QuerySets</li>
            <li><code>unique_together</code></li>
            <li><code>constraints</code></li>
            <li><code>indexes</code></li>
            <li><code>permissions</code></li>
        </ul>
    </ul>

    <br/><br/>


    <li><b>Model Methods: Custom Business Logic</b></li>
    <br/>
    <ul>
        <li>You can attach custom methods to a model:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    price = models.DecimalField(max_digits=8, decimal_places=2)

    def discounted_price(self, percent):
        return self.price * (1 - percent / 100)
</code></pre>

    <ul>
        <li>This keeps logic close to data.</li>
    </ul>

    <br/><br/>


    <li><b>String Representation (<code>__str__</code>)</b></li>
    <br/>
    <ul>
        <li>Add this to improve readability in Django Admin and shell:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=100)

    def __str__(self):
        return f"Product({self.name})"
</code></pre>

    <br/><br/>


    <li><b>Custom Save Logic (Overriding <code>save()</code>)</b></li>

<pre><code class="language-python line-numbers">class Order(models.Model):
    total = models.DecimalField(max_digits=10, decimal_places=2)

    def save(self, *args, **kwargs):
        print("Before saving...")
        super().save(*args, **kwargs)
        print("After saving...")
</code></pre>

    <ul>
        <li>You must call <code>super().save()</code> to actually write to DB.</li>
    </ul>

    <br/><br/>


    <li><b>Custom Delete Logic (Overriding <code>delete()</code>)</b></li>

<pre><code class="language-python line-numbers">def delete(self, *args, **kwargs):
    print("Deleting:", self)
    super().delete(*args, **kwargs)
</code></pre>

    <br/><br/>


    <li><b>Foreign Keys and Relations</b></li>
    <br/>
    <ul>
        <li>Relations are also fields:</li>
    </ul>

<pre><code class="language-python line-numbers">class Category(models.Model):
    name = models.CharField(max_length=50)

class Product(models.Model):
    category = models.ForeignKey(Category, on_delete=models.CASCADE)
</code></pre>

    <ul>
        <li>ORM automatically creates reverse relationships:</li>
    </ul>

<pre><code class="language-python line-numbers">cat = Category.objects.get(id=1)
cat.product_set.all()      # All products in the category
</code></pre>

    <br/><br/>


    <li><b>Model Managers</b></li>
    <br/>
    <ul>
        <li>Every model has at least one manager named <code>objects</code>.</li>
        <li>The manager is the entry point for creating queries:</li>
    </ul>

<pre><code class="language-python line-numbers">products = Product.objects.filter(price__lt=50)
</code></pre>

    <ul>
        <li>You can define custom managers to override query defaults.</li>
    </ul>

    <br/><br/>


    <li><b>Full Lifecycle of a Model Row</b></li>
    <br/>
    <ul>
        <li><b>Create</b>:</li>
    </ul>

<pre><code class="language-python line-numbers">obj = Product.objects.create(name="Pen", price=2)
</code></pre>

    <ul>
        <li><b>Retrieve</b>:</li>
    </ul>

<pre><code class="language-python line-numbers">obj = Product.objects.get(id=1)
</code></pre>

    <ul>
        <li><b>Update</b>:</li>
    </ul>

<pre><code class="language-python line-numbers">obj.price = 3
obj.save()
</code></pre>

    <ul>
        <li><b>Delete</b>:</li>
    </ul>

<pre><code class="language-python line-numbers">obj.delete()
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-models-meta">Understanding the <code>class Meta</code> Options in Django Models</h3>
<ol>

    <li><b>What Is the</b> <code>Meta</code> <b>Class?</b></li>
    <br/>
    <ul>
        <li>The inner <code>class Meta</code> inside a Django model is a special configuration class.</li>
        <br/>
        <li>It tells Django how to behave when generating:
            <ul>
                <li>database table names</li>
                <li>sorting rules</li>
                <li>indexes</li>
                <li>constraints</li>
                <li>permissions</li>
                <li>model names</li>
                <li>relationships between apps</li>
            </ul>
        </li>
        <br/>
        <li><code>Meta</code> does <u>not</u> affect Python logic — it affects <u>Django ORM behavior, database schema, and admin interface.</u></li>
    </ul>

    <br/><br/>


    <li><b>Basic Structure of <code>Meta</code></b></li>
<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=50)

    class Meta:
        ordering = ["name"]
</code></pre>

    <ul>
        <li>The <code>Meta</code> class must be inside the model and indented.</li>
        <li>All its attributes are optional.</li>
    </ul>

    <br/><br/>


    <li><b>Full List of Common Meta Options</b></li>

    <br/>
    <table>
        <thead>
            <tr>
                <th>Option</th>
                <th>Purpose</th>
            </tr>
        </thead>
        <tbody>
            <tr><td><code>db_table</code></td><td>Custom SQL table name</td></tr>
            <tr><td><code>ordering</code></td><td>Default ordering for QuerySets</td></tr>
            <tr><td><code>verbose_name</code></td><td>Human-readable singular name</td></tr>
            <tr><td><code>verbose_name_plural</code></td><td>Plural human-readable name</td></tr>
            <tr><td><code>indexes</code></td><td>Custom database indexes</td></tr>
            <tr><td><code>unique_together</code></td><td>Multi-field uniqueness constraint (legacy)</td></tr>
            <tr><td><code>constraints</code></td><td>Advanced database constraints</td></tr>
            <tr><td><code>permissions</code></td><td>Custom permission definitions</td></tr>
            <tr><td><code>default_related_name</code></td><td>Reverse relationship name</td></tr>
            <tr><td><code>app_label</code></td><td>Assign model to a different app</td></tr>
            <tr><td><code>managed</code></td><td>If False, Django will NOT create or modify the table</td></tr>
            <tr><td><code>get_latest_by</code></td><td>Field used by QuerySet.latest()</td></tr>
            <tr><td><code>ordering</code></td><td>Set default ordering (ASC/DESC)</td></tr>
            <tr><td><code>abstract</code></td><td>Create abstract base classes</td></tr>
            <tr><td><code>proxy</code></td><td>Create proxy models</td></tr>
        </tbody>
    </table>

    <br/><br/>


    <li><b>db_table — Custom Table Name</b></li>
    <br/>
    <ul>
        <li>By default Django names tables like <code>appname_modelname</code>.</li>
        <li>You can override this:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=50)

    class Meta:
        db_table = "ecommerce_products"
</code></pre>

    <ul>
        <li>The database table will now be called <code>ecommerce_products</code>.</li>
    </ul>

    <br/><br/>


    <li><b>ordering — Default QuerySet Order</b></li>
    <br/>
    <ul>
        <li>This determines how QuerySets are sorted <u>unless you override it</u>.</li>
    </ul>

<pre><code class="language-python line-numbers">class Post(models.Model):
    created_at = models.DateTimeField()

    class Meta:
        ordering = ["-created_at"]
</code></pre>

    <ul>
        <li><code>Post.objects.all()</code> will always be newest → oldest.</li>
        <li>Supports multiple fields.</li>
    </ul>

    <br/><br/>


    <li><b>verbose_name & verbose_name_plural</b></li>
    <br/>
    <ul>
        <li>Used by Django Admin for labels.</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    class Meta:
        verbose_name = "Product Item"
        verbose_name_plural = "Product Items"
</code></pre>

    <br/><br/>


    <li><b>indexes — Creating Database Indexes</b></li>
<pre><code class="language-python line-numbers">class User(models.Model):
    username = models.CharField(max_length=50)
    email = models.EmailField()

    class Meta:
        indexes = [
            models.Index(fields=["username"]),
            models.Index(fields=["email"]),
        ]
</code></pre>

    <ul>
        <li>Django will generate SQL for index creation.</li>
        <li>This improves query performance.</li>
    </ul>

    <br/><br/>


    <li><b>unique_together (Deprecated in Favor of <code>UniqueConstraint</code>)</b></li>
<pre><code class="language-python line-numbers">class Enrollment(models.Model):
    student = models.ForeignKey("Student", on_delete=models.CASCADE)
    course = models.ForeignKey("Course", on_delete=models.CASCADE)

    class Meta:
        unique_together = ["student", "course"]
</code></pre>

    <ul>
        <li>Ensures that one student cannot enroll in the same course twice.</li>
        <li>Use <code>constraints</code> instead in modern Django.</li>
    </ul>

    <br/><br/>


    <li><b>constraints — Advanced SQL Constraints</b></li>
<pre><code class="language-python line-numbers">from django.db import models

class Product(models.Model):
    price = models.DecimalField(max_digits=10, decimal_places=2)

    class Meta:
        constraints = [
            models.CheckConstraint(check=models.Q(price__gte=0), name="price_positive")
        ]
</code></pre>

    <ul>
        <li>Types of constraints:</li>
        <ul>
            <li><b>CheckConstraint</b></li>
            <li><b>UniqueConstraint</b></li>
            <li><b>ForeignKey constraints</b> are handled automatically</li>
        </ul>
    </ul>

    <br/><br/>


    <li><b>permissions — Custom Permissions</b></li>
<pre><code class="language-python line-numbers">class Report(models.Model):
    class Meta:
        permissions = [
            ("view_sensitive_data", "Can view sensitive data"),
            ("export_reports", "Can export reports"),
        ]
</code></pre>

    <ul>
        <li>Django creates these permissions in the database.</li>
        <li>Often used with the Admin interface.</li>
    </ul>

    <br/><br/>


    <li><b>default_related_name — Reverse Relation Name</b></li>
<pre><code class="language-python line-numbers">class Author(models.Model):
    class Meta:
        default_related_name = "authors"
</code></pre>

    <ul>
        <li>This affects reverse relationships used by ForeignKeys.</li>
    </ul>

    <br/><br/>


    <li><b>managed — Should Django Create This Table?</b></li>
<pre><code class="language-python line-numbers">class LegacyUser(models.Model):
    legacy_id = models.IntegerField()

    class Meta:
        managed = False
        db_table = "legacy_user_table"
</code></pre>

    <ul>
        <li>Use when working with a table that Django should NOT create or modify.</li>
        <li>Common for legacy databases.</li>
    </ul>

    <br/><br/>


    <li><b>get_latest_by — Field Used by <code>latest()</code></b></li>
<pre><code class="language-python line-numbers">class Event(models.Model):
    timestamp = models.DateTimeField()

    class Meta:
        get_latest_by = "timestamp"
</code></pre>

    <ul>
        <li>Now <code>Event.objects.latest()</code> works.</li>
    </ul>

    <br/><br/>


    <li><b>abstract — Create an Abstract Base Class</b></li>
<pre><code class="language-python line-numbers">class BaseTimestamp(models.Model):
    created = models.DateTimeField(auto_now_add=True)

    class Meta:
        abstract = True
</code></pre>

    <ul>
        <li>No table is created for abstract models.</li>
        <li>They serve as base classes for other models.</li>
    </ul>

    <br/><br/>


    <li><b>proxy — Create a Proxy Model</b></li>
<pre><code class="language-python line-numbers">class OrderedUser(User):
    class Meta:
        proxy = True
        ordering = ["username"]
</code></pre>

    <ul>
        <li>No new table created — same table, different Python class.</li>
        <li>Used to add methods or change default ordering.</li>
    </ul>

    <br/><br/>


    <li><b>app_label — Force a Model into a Different App</b></li>
    <br/>
    <ul>
        <li>Normally, Django determines an app by the folder name.</li>
        <li>You can override this:</li>
    </ul>

<pre><code class="language-python line-numbers">class Report(models.Model):
    class Meta:
        app_label = "analytics"
</code></pre>

    <ul>
        <li>Do this only when necessary (e.g., models in a shared folder).</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-models-tablespaces">Understanding Tablespaces in Django Models</h3>
<ol>

    <li><b>What Are Tablespaces?</b></li>
    <br/>
    <ul>
        <li>A <u>tablespace</u> is a storage location inside a database where tables and indexes can be placed.</li>
        <br/>
        <li>They are supported by some database systems such as:
            <ul>
                <li><b>PostgreSQL</b></li>
                <li><b>Oracle</b></li>
            </ul>
        </li>
        <br/>
        <li>SQLite and MySQL do <u>not</u> support them in the same way, so tablespace features may be limited.</li>
        <br/>
        <li>In Django, you can tell the ORM where to store the:
            <ul>
                <li>table itself</li>
                <li>indexes for the table</li>
            </ul>
        </li>
        <br/>
        <li>This is primarily useful in enterprise environments where DBAs organize storage across disks for:
            <ul>
                <li>performance optimization</li>
                <li>backup strategies</li>
                <li>clustered or distributed setups</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Basic Syntax for Using Tablespaces</b></li>
    <br/>
    <ul>
        <li>You define tablespaces inside the model’s <code>Meta</code> class:</li>
    </ul>

<pre><code class="language-python line-numbers">class Report(models.Model):
    name = models.CharField(max_length=100)

    class Meta:
        db_tablespace = "report_tablespace"
        default_related_name = "reports"
</code></pre>

    <ul>
        <li><code>db_tablespace</code> tells Django where to store this model's table.</li>
    </ul>

    <br/><br/>


    <li><b>How to Set Tablespaces for Indexes</b></li>
    <br/>
    <ul>
        <li>Django also allows placing indexes in separate tablespaces:</li>
    </ul>

<pre><code class="language-python line-numbers">class Report(models.Model):
    title = models.CharField(max_length=200)

    class Meta:
        db_tablespace = "ts_reports"
        indexes = [
            models.Index(fields=["title"], db_tablespace="ts_indexes"),
        ]
</code></pre>

    <ul>
        <li>Now:
            <ul>
                <li>The table goes into <code>ts_reports</code></li>
                <li>The index goes into <code>ts_indexes</code></li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Setting Tablespaces for All Models in an App</b></li>
    <br/>
    <ul>
        <li>You can define tablespaces globally inside <code>settings.py</code>:</li>
    </ul>

<pre><code class="language-python line-numbers">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.postgresql",
        "NAME": "mydb",
        "USER": "myuser",
    }
}

DEFAULT_TABLESPACE = "mysite_default_ts"
DEFAULT_INDEX_TABLESPACE = "mysite_index_ts"
</code></pre>

    <ul>
        <li>Saves you from setting tablespaces on each model manually.</li>
        <li>Model-level configuration overrides global defaults.</li>
    </ul>

    <br/><br/>


    <li><b>Full Example: Table + Index Tablespaces</b></li>
<pre><code class="language-python line-numbers">class Document(models.Model):
    title = models.CharField(max_length=255)
    uploaded_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        db_tablespace = "docs_ts"
        indexes = [
            models.Index(
                fields=["uploaded_at"],
                name="upload_time_idx",
                db_tablespace="docs_idx_ts",
            ),
        ]
</code></pre>

    <ul>
        <li>This is how you split data storage vs index storage.</li>
    </ul>

    <br/><br/>


    <li><b>Checking Tablespaces in Generated SQL</b></li>
    <br/>
    <ul>
        <li>You can inspect SQL using:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py sqlmigrate appname 0001
</code></pre>

    <ul>
        <li>Example SQL (PostgreSQL):</li>
    </ul>

<pre><code class="language-sql line-numbers">CREATE TABLE "app_document" (
    "id" serial NOT NULL PRIMARY KEY,
    "title" varchar(255) NOT NULL,
    "uploaded_at" timestamp with time zone NOT NULL
) TABLESPACE docs_ts;

CREATE INDEX upload_time_idx
    ON "app_document" ("uploaded_at")
    TABLESPACE docs_idx_ts;
</code></pre>

    <ul>
        <li>This confirms Django applied your tablespace configuration.</li>
    </ul>

    <br/><br/>


    <li><b>What Happens if Your Database Doesn’t Support Tablespaces?</b></li>
    <br/>
    <ul>
        <li>Django will silently ignore <code>db_tablespace</code> for databases that don't support it.</li>
        <li>This means:</li>
        <ul>
            <li>SQLite → ignored</li>
            <li>MySQL → mostly ignored</li>
            <li>PostgreSQL → fully used</li>
            <li>Oracle → fully used</li>
        </ul>
        <li>Django ensures migrations remain portable.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-db-access-optimization">Database Access Optimization in Django</h3>
<ol>

    <li><b>Why Database Optimization Matters</b></li>
    <br/>
    <ul>
        <li>Django’s ORM is powerful, but databases are often the slowest part of your application.</li>
        <br/>
        <li>Optimization prevents:
            <ul>
                <li>N+1 query problems</li>
                <li>excessive round-trips to the database</li>
                <li>slow pages during heavy load</li>
                <li>unnecessary joins</li>
                <li>full-table scans and index misses</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Django Debug Toolbar (Essential Tool)</b></li>
    <br/>
    <ul>
        <li>Before optimizing, you must first <u>measure</u>.</li>
        <li>Install:</li>
<pre><code class="language-bash line-numbers">python3 -m pip install django-debug-toolbar
</code></pre>
    </ul>

    <ul>
        <li>This tool shows:
            <ul>
                <li>number of queries</li>
                <li>execution time</li>
                <li>duplicated queries</li>
                <li>stack traces of query sources</li>
            </ul>
        </li>
        <li><b>Always profile before optimizing.</b></li>
    </ul>

    <br/><br/>


    <li><b>Use</b> <code>select_related()</code> <b>for ForeignKey and OneToOne</b></li>
    <br/>
    <ul>
        <li>By default, Django loads related objects lazily:</li>
<pre><code class="language-python line-numbers">for book in Book.objects.all():
    print(book.author.name)
</code></pre>
    </ul>

    <br/>

    <ul>
        <li>This causes an <u>N+1 query problem</u>:
            <ul>
                <li>1 query to fetch books</li>
                <li>N queries to fetch each book’s author</li>
            </ul>
        </li>
        <br/>
        <li>Solve it using <code>select_related()</code>:</li>
    </ul>

<pre><code class="language-python line-numbers">books = Book.objects.select_related("author")
for book in books:
    print(book.author.name)
</code></pre>

    <ul>
        <li>Now Django performs <u>ONE JOIN query only</u></li>
    </ul>

    <br/><br/>


    <li><b>Use</b> <code>prefetch_related()</code> <b>for Many-to-Many and Reverse Relations</b></li>
    <br/>
    <ul>
        <li>ForeignKey = use <code>select_related</code></li>
        <li>ManyToMany or related sets = use <code>prefetch_related</code></li>
    </ul>

<pre><code class="language-python line-numbers">authors = Author.objects.prefetch_related("books")

for author in authors:
    print(author.books.all())
</code></pre>

    <ul>
        <li>Saves massive numbers of DB hits.</li>
        <li>Django performs 2 queries total:
            <ul>
                <li>Authors</li>
                <li>Books</li>
            </ul>
        </li>
        <li>Then combines data in Python memory.</li>
    </ul>

    <br/><br/>


    <li><b>Avoid Loading Unneeded Fields</b> (<code>values()</code> &amp; <code>only()</code>)</li>

    <br/>
    <ul>
        <li>Use <code>.values()</code> for lightweight dict-style queries:</li>
    </ul>

<pre><code class="language-python line-numbers">products = Product.objects.values("id", "name")
</code></pre>

    <ul>
        <li>Prevents Django from loading big fields like TextField or JSONField.</li>
    </ul>

    <br/>
    <ul>
        <li>Use <code>.only()</code> to load partial model fields:</li>
    </ul>

<pre><code class="language-python line-numbers">users = User.objects.only("id", "username")
</code></pre>

    <ul>
        <li>Django fetches missing fields lazily only when accessed.</li>
    </ul>

    <br/><br/>


    <li><b>Avoid</b> <code>.count()</code> <b>on QuerySets Without Filtering</b></li>
    <br/>

<pre><code class="language-python line-numbers">total = Product.objects.count()  # efficient
</code></pre>

    <ul>
        <li>But avoid:</li>
    </ul>

<pre><code class="language-python line-numbers">len(Product.objects.all())   # loads EVERYTHING into memory → slow!
</code></pre>

    <ul>
        <li>Use <code>count()</code> instead.</li>
    </ul>

    <br/><br/>


    <li><b>Use Indexes for Fast Filtering</b></li>
    <br/>
    <ul>
        <li>Indexes greatly speed up <code>WHERE</code> queries.</li>
        <li>You can define indexes in <code>Meta</code>:</li>
    </ul>

<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=200)
    class Meta:
        indexes = [
            models.Index(fields=["name"]),
        ]
</code></pre>

    <ul>
        <li>Also remember:</li>
        <li><code>unique=True</code> automatically creates an index.</li>
    </ul>

    <br/><br/>


    <li><b>Use</b> <code>exists()</code> <b>Instead of Fetching Objects</b></li>
    <br/>

<pre><code class="language-python line-numbers">if User.objects.filter(email=email).exists():
    ...
</code></pre>

    <ul>
        <li>This generates:</li>
    </ul>

<pre><code class="language-sql line-numbers">SELECT (1) AS a FROM user WHERE email=... LIMIT 1;
</code></pre>

    <ul>
        <li>Much faster than doing <code>.get()</code> or loading a full queryset.</li>
    </ul>

    <br/><br/>


    <li><b>Avoid Query Inside a Loop</b></li>
    <br/>
    <ul>
        <li>Do NOT do:</li>
    </ul>

<pre><code class="language-python line-numbers">for user in User.objects.all():
    print(Order.objects.filter(user=user).count())
</code></pre>

    <ul>
        <li>This is a classic N+1 query.</li>
    </ul>

    <br/>
    <ul>
        <li>Instead:</li>
    </ul>

<pre><code class="language-python line-numbers">users = User.objects.prefetch_related("order_set")
</code></pre>

    <br/><br/>


    <li><b>Use<b> <code>bulk_create()</code> </b>for Inserting Many Rows</b></li>
    <br/>

<pre><code class="language-python line-numbers">objs = [Log(msg=f"Item {i}") for i in range(1000)]
Log.objects.bulk_create(objs, batch_size=200)
</code></pre>

    <ul>
        <li>Much faster than saving one by one.</li>
    </ul>

    <br/><br/>


    <li><b>Use</b> <code>bulk_update()</code> <b>for Batch Updates</b></li>
    <br/>

<pre><code class="language-python line-numbers">products = Product.objects.filter(on_sale=True)
for p in products:
    p.discount = 10

Product.objects.bulk_update(products, ["discount"])
</code></pre>

    <ul>
        <li>Reduces 1000 updates into a few SQL queries.</li>
    </ul>

    <br/><br/>


    <li><b>Use</b> <code>iterator()</code> <b>for Large QuerySets</b></li>
    <br/>
    <ul>
        <li>Prevents Django from loading a large queryset into memory at once.</li>
    </ul>

<pre><code class="language-python line-numbers">for row in BigTable.objects.iterator():
    process(row)
</code></pre>

    <ul>
        <li>Uses server-side cursors for streaming results.</li>
    </ul>

    <br/><br/>


    <li><b>Cache Aggressive Queries</b></li>
    <ul>
        <li>Examples of expensive DB calls:</li>
        <ul>
            <li>homepage category list</li>
            <li>statistics / counts</li>
            <li>dashboard summaries</li>
        </ul>
        <li>Use Django Cache Framework:</li>
    </ul>

<pre><code class="language-python line-numbers">from django.core.cache import cache

data = cache.get("stats")
if data is None:
    data = calculate_stats()
    cache.set("stats", data, timeout=3600)
</code></pre>

    <ul>
        <li>Database hits drop dramatically.</li>
    </ul>

    <br/><br/>


    <li><b>Use Raw SQL Only When Needed</b></li>
    <ul>
        <li>Sometimes ORM cannot generate optimal SQL.</li>
        <li>Then use:</li>
    </ul>

<pre><code class="language-python line-numbers">from django.db import connection

cursor = connection.cursor()
cursor.execute("SELECT COUNT(*) FROM app_table")
</code></pre>

    <ul>
        <li>But only use this when profiling proves ORM cannot optimize.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-db-instrumentation">Database Instrumentation in Django</h3>
<ol>

    <li><b>What Is Database Instrumentation?</b></li>
    <br/>
    <ul>
        <li><u>Database instrumentation</u> means collecting detailed information about how your Django application interacts with the database.</li>
        <br/>
        <li>It includes:
            <ul>
                <li>logging every database query</li>
                <li>measuring execution time</li>
                <li>tracking slow queries</li>
                <li>monitoring connections and transactions</li>
                <li>debugging ORM behavior</li>
            </ul>
        </li>
        <br/>
        <li>The purpose is to <u>analyze, debug, and optimize</u> database usage.</li>
        <br/>
        <li>Instrumentation is essential when:
            <ul>
                <li>your application grows</li>
                <li>performance becomes important</li>
                <li>you suspect inefficient ORM calls</li>
                <li>you need insight into query patterns</li>
                <li>you want to detect N+1 problems</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>The Building Block: </b><code>django.db.connection.queries</code></li>
    <br/>
    <ul>
        <li>Django stores executed queries when <code>DEBUG = True</code>:</li>
    </ul>

<pre><code class="language-python line-numbers">from django.db import connection

print(connection.queries)
</code></pre>

    <ul>
        <li>The output is a list of dictionaries like:</li>
    </ul>

<pre><code class="language-python line-numbers">[
    {
        "sql": "SELECT ...",
        "time": "0.001",
    },
]
</code></pre>

    <ul>
        <li>Useful for inspecting ORM behavior.</li>
        <li>Only works in <u>DEBUG mode</u>.</li>
    </ul>

    <br/><br/>


    <li><b>Measuring Query Time in Views</b></li>
    <br/>
    <ul>
        <li>You can measure the cost of a code block:</li>
    </ul>

<pre><code class="language-python line-numbers">from django.db import connection, reset_queries
import time

def view(request):
    reset_queries()
    start = time.time()

    # Your ORM logic here
    users = User.objects.select_related("profile").all()

    total_time = time.time() - start
    print("Queries:", len(connection.queries))
    print("Time:", total_time)

    return HttpResponse("OK")
</code></pre>

    <ul>
        <li>This is a simple form of instrumentation suitable for debugging locally.</li>
    </ul>

    <br/><br/>


    <li><b>Using</b> <code>django-debug-toolbar</code> <b>for Query Profiling</b></li>
    <br/>
    <ul>
        <li>One of the most powerful instrumentation tools.</li>
        <li>Install:</li>
<pre><code class="language-bash line-numbers">python3 -m pip install django-debug-toolbar
</code></pre>
    </ul>

    <ul>
        <li>It shows:
            <ul>
                <li>Total number of queries per page</li>
                <li>SQL text for each query</li>
                <li>Execution time</li>
                <li>Duplicated queries</li>
                <li>N+1 detection</li>
                <li>Stack trace for each ORM call</li>
            </ul>
        </li>
        <li>It is an essential tool for database instrumentation during development.</li>
    </ul>

    <br/><br/>


    <li><b>Using Logging to Capture SQL Queries</b></li>
    <br/>
    <ul>
        <li>You can log all queries using Django’s built-in logging system.</li>
        <li>In <code>settings.py</code>:</li>
    </ul>

<pre><code class="language-python line-numbers">LOGGING = {
    "version": 1,
    "handlers": {
        "console": {
            "class": "logging.StreamHandler",
        },
    },
    "loggers": {
        "django.db.backends": {
            "handlers": ["console"],
            "level": "DEBUG",
        },
    },
}
</code></pre>

    <ul>
        <li>This prints every executed SQL query to your console.</li>
        <li>You can instrument production behavior by redirecting to log files.</li>
    </ul>

    <br/><br/>


    <li><b>Using</b> <code>QuerySet.explain()</code> <b>to Analyze SQL Execution Plans</b></li>

    <br/>
    <ul>
        <li>Modern Django versions let you inspect the database’s execution plan:</li>
    </ul>

<pre><code class="language-python line-numbers">qs = User.objects.filter(email__icontains="gmail.com")
print(qs.explain())
</code></pre>

    <ul>
        <li>The output depends on the database (PostgreSQL, MySQL, etc.).</li>
        <li>Use this to detect:
            <ul>
                <li>missing indexes</li>
                <li>full table scans</li>
                <li>bad join strategies</li>
                <li>sort vs index usage</li>
            </ul>
        </li>
        <li>This is <b>critical for optimizing slow queries</b>.</li>
    </ul>

    <br/><br/>


    <li><b>Tracking Connection Usage</b></li>

<pre><code class="language-python line-numbers">from django.db import connection

print("Connection open:", connection.connection is not None)
print("In transaction:", connection.in_atomic_block)
</code></pre>

    <ul>
        <li>Useful for debugging transaction behavior.</li>
        <li>When using multiple databases, you can inspect:</li>
    </ul>

<pre><code class="language-python line-numbers">from django.db import connections

print(connections["default"].queries)
print(connections["analytics"].queries)
</code></pre>

    <br/><br/>


    <li><b>Using Database-Level Monitoring Tools</b></li>
    <ul>
        <li>For production systems, database-native tools provide deeper instrumentation:</li>
        <ul>
            <li><b>PostgreSQL</b>: pg_stat_statements</li>
            <li><b>MySQL</b>: performance_schema</li>
            <li><b>Oracle</b>: AWR, STATSPACK</li>
        </ul>
        <li>Django queries automatically show up in these tools.</li>
        <li>Examples:
            <ul>
                <li>Most frequent queries</li>
                <li>Slowest queries</li>
                <li>Query cache hit ratios</li>
                <li>Full-table scans</li>
            </ul>
        </li>
    </ul>

    <br/><br/>


    <li><b>Instrumenting ORM Internals With Signals</b></li>
    <ul>
        <li>Django provides signals for tracking model lifecycle:</li>
        <ul>
            <li><code>pre_save</code></li>
            <li><code>post_save</code></li>
            <li><code>pre_delete</code></li>
            <li><code>post_delete</code></li>
            <li><code>pre_migrate</code></li>
            <li><code>post_migrate</code></li>
        </ul>
        <li>You can instrument database changes globally:</li>
    </ul>

<pre><code class="language-python line-numbers">from django.db.models.signals import post_save
from django.dispatch import receiver

@receiver(post_save)
def log_save(sender, instance, created, **kwargs):
    if created:
        print(f"Created row in table: {sender.__name__}")
    else:
        print(f"Updated row in table: {sender.__name__}")
</code></pre>

    <ul>
        <li>Useful for auditing or debugging behavior.</li>
    </ul>

    <br/><br/>


    <li><b>Instrumenting Transactions</b></li>
<pre><code class="language-python line-numbers">from django.db import transaction

with transaction.atomic():
    print("In transaction:", connection.in_atomic_block)
</code></pre>

    <ul>
        <li>Useful for verifying nested transactions and savepoints.</li>
    </ul>

    <br/><br/>


    <li><b>Middleware for Query Profiling</b></li>
    <br/>
    <ul>
        <li>You can instrument DB activity across each request:</li>
    </ul>

<pre><code class="language-python line-numbers">from django.db import connection

class QueryCountMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        num_before = len(connection.queries)
        response = self.get_response(request)
        num_after = len(connection.queries)
        print("Queries this request:", num_after - num_before)
        return response
</code></pre>

    <ul>
        <li>This reports query load per page.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-db-fixtures">Understanding Database Fixtures in Django</h3>
<ol>

    <li><b>What Are Fixtures in Django?</b></li>
    <br/>
    <ul>
        <li>A <u>fixture</u> is a file containing serialized data that Django can load into the database.</li>
        <br/>
        <li>They are commonly used for:
            <ul>
                <li><b>initial data</b> for a new project</li>
                <li><b>test data</b> for development</li>
                <li><b>sample content</b> for demos</li>
                <li><b>migrating static data</b> between environments</li>
            </ul>
        </li>
        <br/>
        <li>Fixtures allow you to store and version-control database content as files (JSON, XML, YAML).</li>
        <br/>
        <li>They integrate deeply with Django’s ORM and the <code>loaddata</code> / <code>dumpdata</code> commands.</li>
    </ul>

    <br/><br/>


    <li><b>Supported Fixture Formats</b></li>
    <br/>
    <ul>
        <li>Django supports the following formats:</li>
    </ul>
    <br/>

    <table>
        <thead>
            <tr>
                <th>Format</th>
                <th>Extension</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>JSON</td>
                <td><code>.json</code></td>
                <td>Most common, human-readable</td>
            </tr>
            <tr>
                <td>YAML</td>
                <td><code>.yaml</code> / <code>.yml</code></td>
                <td>Requires PyYAML</td>
            </tr>
            <tr>
                <td>XML</td>
                <td><code>.xml</code></td>
                <td>Verbose, rarely used today</td>
            </tr>
        </tbody>
    </table>

    <br/>
    <ul>
        <li>JSON is the recommended format due to clarity and compatibility.</li>
    </ul>

    <br/><br/>


    <li><b>Where to Store Fixture Files</b></li>
    <br/>
    <ul>
        <li>Django automatically searches for fixtures inside:</li>
    </ul>

<pre><code class="language-text line-numbers">
your_app/
    fixtures/
        mydata.json
</code></pre>

    <ul>
        <li>You can have multiple fixture directories across apps.</li>
        <li>You may also specify additional directories in <code>settings.py</code>:</li>
    </ul>

<pre><code class="language-python line-numbers">FIXTURE_DIRS = [
    BASE_DIR / "project_fixtures",
]
</code></pre>

    <br/><br/>


    <li><b>Fixture File Structure (JSON Example)</b></li>
    <br/>
    <ul>
        <li>A fixture describes objects as dictionaries:</li>
    </ul>

<pre><code class="language-json line-numbers">[
  {
    "model": "shop.product",
    "pk": 1,
    "fields": {
      "name": "Laptop",
      "price": "1299.99",
      "in_stock": true
    }
  },
  {
    "model": "shop.product",
    "pk": 2,
    "fields": {
      "name": "Mouse",
      "price": "29.99",
      "in_stock": true
    }
  }
]
</code></pre>

    <ul>
        <li>Structure:</li>
        <ul>
            <li><code>model</code>: "<b>app_label.model_name</b>"</li>
            <li><code>pk</code>: primary key</li>
            <li><code>fields</code>: key-value mapping of model fields</li>
        </ul>
        <li>This format mirrors Django model structure exactly.</li>
    </ul>

    <br/><br/>


    <li><b>Loading Fixtures into the Database</b></li>
    <br/>
    <ul>
        <li>Use the <code>loaddata</code> command:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py loaddata mydata.json
</code></pre>

    <ul>
        <li>Django will automatically search for the fixture in all known paths.</li>
        <li>You may specify a database if you have multiple DBs:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py loaddata mydata.json --database=analytics
</code></pre>

    <ul>
        <li>Fixtures are loaded using the model’s <b>save()</b> behavior (signals fire!).</li>
    </ul>

    <br/><br/>


    <li><b>Dumping Existing Database Data to Fixtures</b></li>

<pre><code class="language-bash line-numbers">python3 manage.py dumpdata shop.Product &gt; products.json
</code></pre>

    <ul>
        <li>To dump <u>all</u> data:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py dumpdata &gt; all.json
</code></pre>

    <ul>
        <li>To dump without admin metadata:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py dumpdata --exclude auth.permission --exclude contenttypes &gt; data.json
</code></pre>

    <br/><br/>


    <li><b>Dumping Data for Specific App or Model</b></li>
<pre><code class="language-bash line-numbers">python3 manage.py dumpdata shop --indent 4
</code></pre>

    <ul>
        <li>This dumps only models inside the <code>shop</code> app.</li>
        <li><code>--indent</code> beautifies the JSON.</li>
    </ul>

    <br/><br/>


    <li><b>Understanding the</b> <code>loaddata</code> <b>Search Path</b></li>
    <br/>
    <ul>
        <li>Django searches in this order:</li>
    </ul>

<pre><code class="language-text line-numbers">
1. App's fixtures/ directories
2. Directories listed in FIXTURE_DIRS
3. Absolute or relative paths given directly
</code></pre>

    <ul>
        <li>You can also pass a direct filesystem path:</li>
    </ul>

<pre><code class="language-bash line-numbers">python3 manage.py loaddata /tmp/data/initial.json
</code></pre>

    <br/><br/>


    <li><b>Common Fixture Use Cases</b></li>
    <br/>
    <ul>
        <li><b>Initial Project Data</b></li>
        <ul>
            <li>Default user roles</li>
            <li>Country lists</li>
            <li>Currency lists</li>
            <li>Prepopulated category structures</li>
        </ul>

        <br/>

        <li><b>Test/Development Data</b></li>
        <ul>
            <li>Fake users</li>
            <li>Fake products</li>
            <li>Fake blog posts</li>
        </ul>

        <br/>

        <li><b>Migration of Static Data Between Environments</b></li>
        <ul>
            <li>Dev → Test → Staging → Production</li>
        </ul>
    </ul>

    <br/><br/>


    <li><b>Using Fixtures in Tests</b></li>
    <br/>
    <ul>
        <li>You can load fixtures automatically for a test case:</li>
    </ul>

<pre><code class="language-python line-numbers">from django.test import TestCase

class ProductTests(TestCase):
    fixtures = ["products.json"]

    def test_count(self):
        self.assertEqual(Product.objects.count(), 10)
</code></pre>

    <ul>
        <li>Django loads fixtures before each test, inside a transaction.</li>
    </ul>

    <br/><br/>


    <li><b>Relational Data in Fixtures</b></li>
    <br/>
    <ul>
        <li>Foreign keys are stored using primary key references:</li>
    </ul>

<pre><code class="language-json line-numbers">[
  {
    "model": "shop.order",
    "pk": 1,
    "fields": { "user": 5, "product": 2 }
  }
]
</code></pre>

    <ul>
        <li>You must ensure referenced objects appear somewhere in the fixture set.</li>
    </ul>

    <br/><br/>


    <li><b>Handling Natural Keys (Better for Human-Readable Fixtures)</b></li>
    <br/>
    <ul>
        <li>To avoid hard-coded PKs, you can define natural keys:</li>
    </ul>

<pre><code class="language-python line-numbers">class User(models.Model):
    username = models.CharField(max_length=50, unique=True)

    def natural_key(self):
        return (self.username,)
</code></pre>

    <ul>
        <li>Now fixture entries can reference objects by username:</li>
    </ul>

<pre><code class="language-json line-numbers">[
  {
    "model": "auth.user",
    "fields": { "username": "alice" }
  }
]
</code></pre>

    <ul>
        <li>Useful for fixtures that must live for years.</li>
    </ul>

    <br/><br/>


    <li><b>Best Practices for Fixtures</b></li>
    <br/>
    <ul>
        <li><b>1. Keep fixtures small</b></li>
        <ul>
            <li>Large fixtures slow down <code>loaddata</code> and tests.</li>
        </ul>
        <br/>

        <li><b>2. Use indent for readability</b></li>
        <ul>
            <li><code>--indent 4</code> when dumping JSON.</li>
        </ul>
        <br/>

        <li><b>3. Split fixtures by domain</b></li>
        <ul>
            <li><code>products.json</code>, <code>users.json</code>, <code>orders.json</code></li>
        </ul>
        <br/>

        <li><b>4. Version control fixtures</b></li>
        <ul>
            <li>They are just static text files.</li>
        </ul>
        <br/>

        <li><b>5. Use factories for dynamic test data</b></li>
        <ul>
            <li>Fixtures are good for static data, not dynamic.</li>
        </ul>
    </ul>

    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li>Fixtures serialize data for loading and exporting database content.</li>
        <li>Located in <code>fixtures/</code> directories or <code>FIXTURE_DIRS</code>.</li>
        <li>Loaded using <code>loaddata</code>, created using <code>dumpdata</code>.</li>
        <li>Excellent for:
            <ul>
                <li>initial data</li>
                <li>demos</li>
                <li>development</li>
                <li>test environments</li>
            </ul>
        </li>
        <li>Support JSON, YAML, and XML.</li>
        <li>Work seamlessly with Django’s ORM, including signals.</li>
        <li>Best used for stable and predictable data structures.</li>
    </ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-url-dispatcher">URL Dispatcher in Django</h3>
<ol>

    <li><b>What Is the URL Dispatcher?</b></li>
    <br/>
    <ul>
        <li>The <b>URL dispatcher</b> is the core mechanism in Django that decides <u>which view</u> should handle an incoming HTTP request.</li>
        <br/>
        <li>When the browser requests a URL (for example <code>/blog/hello/</code>), Django:
            <ul>
                <li>reads the path part of the URL</li>
                <li>matches it against <code>urlpatterns</code> in one or more <code>urls.py</code> files</li>
                <li>calls the first matching view function or class-based view</li>
            </ul>
        </li>
        <br/>
        <li>The dispatcher is configured by:
            <ul>
                <li><code>ROOT_URLCONF</code> in <code>settings.py</code></li>
                <li>top-level <code>urls.py</code> in the project</li>
                <li>app-level <code>urls.py</code> files, included via <code>include()</code></li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Request Flow: From Browser to View</b></li>
    <br/>
    <ul>
        <li>A high-level flow for a request to <code>/blog/hello/</code>:</li>
    </ul>

<pre><code class="language-text line-numbers">Browser  --&gt;  Django (WSGI/ASGI)  --&gt;  ROOT_URLCONF (mysite/urls.py)
                                         |
                                         V
                                  urlpatterns list
                                         |
                                         V
                               include("blog.urls") for "blog/"
                                         |
                                         V
                                blog/urls.py: path("hello/", views.hello)
                                         |
                                         V
                                   views.hello(request)
</code></pre>

    <ul>
        <li>Django:
            <ul>
                <li>reads <code>ROOT_URLCONF</code> (usually <code>"mysite.urls"</code>) from <code>settings.py</code></li>
                <li>imports <code>mysite/urls.py</code></li>
                <li>iterates over <code>urlpatterns</code> in order until one pattern matches</li>
                <li>calls the associated view with <code>request</code> and any captured arguments</li>
                <li>if nothing matches, returns a 404 response</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Basic URL Patterns with</b> <code>path()</code></li>
    <br/>
    <ul>
        <li>Most routes are defined via the <code>path()</code> helper.</li>
        <li>Project-level <code>urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path
from blog import views

urlpatterns = [
    path("admin/", admin.site.urls),
    path("hello/", views.hello),   # maps /hello/ to views.hello
]
</code></pre>

    <br/>

    <ul>
        <li>View example:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.http import HttpResponse

def hello(request):
    return HttpResponse("Hello from the URL dispatcher!")
</code></pre>

    <ul>
        <li>Now <code>http://127.0.0.1:8000/hello/</code> invokes <code>hello()</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Regular Expressions with</b> <code>re_path()</code></li>
    <br/>
    <ul>
        <li>For complex patterns, Django offers <code>re_path()</code>, which uses regular expressions.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.urls import re_path
from blog import views

urlpatterns = [
    re_path(r"^archive/(?P&lt;year&gt;[0-9]{4})/$", views.year_archive),
]
</code></pre>

    <ul>
        <li>Example view:</li>
    </ul>

<pre><code class="language-py line-numbers">def year_archive(request, year):
    return HttpResponse(f"Archive for year {year}")
</code></pre>

    <ul>
        <li>Now <code>/archive/2024/</code> calls <code>year_archive(request, year="2024")</code>.</li>
        <li><code>path()</code> is simpler and recommended for most cases; <code>re_path()</code> is for advanced patterns.</li>
    </ul>
    <br/><br/>


    <li><b>Splitting Routes by App with</b> <code>include()</code></li>
    <br/>
    <ul>
        <li>For better organization, each app usually defines its own <code>urls.py</code>.</li>
        <li>App-level <code>urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path("hello/", views.hello),
    path("about/", views.about),
]
</code></pre>

    <ul>
        <li>Project-level <code>urls.py</code> includes the app URLs:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),   # mounts blog.urls under /blog/
]
</code></pre>

    <ul>
        <li>Resulting URLs:
            <ul>
                <li><code>/blog/hello/</code></li>
                <li><code>/blog/about/</code></li>
            </ul>
        </li>
        <li><code>include()</code> lets you build a tree of URLconfs.</li>
    </ul>
    <br/><br/>


    <li><b>Dynamic Segments with Path Converters</b></li>
    <br/>
    <ul>
        <li>With <code>path()</code> you can capture parts of the URL as parameters.</li>
        <li>Syntax: <code>&lt;converter:name&gt;</code></li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path("post/&lt;int:post_id&gt;/", views.post_detail, name="post-detail"),
]
</code></pre>

    <ul>
        <li>View receives the argument:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

def post_detail(request, post_id):
    return HttpResponse(f"Post id is {post_id}")
</code></pre>

    <ul>
        <li>Built-in converters:
            <ul>
                <li><code>int</code>  → integer</li>
                <li><code>str</code>  → non-empty string (no slash)</li>
                <li><code>slug</code> → letters, numbers, hyphen, underscore</li>
                <li><code>uuid</code> → UUID string</li>
                <li><code>path</code> → string including slashes</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Custom Path Converters (Advanced)</b></li>
    <br/>
    <ul>
        <li>You can define your own converters when built-ins are not enough.</li>
        <li>Example: only accept lowercase letters.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/converters.py

class LowercaseConverter:
    regex = "[a-z]+"

    def to_python(self, value):
        return value   # can transform the value if needed

    def to_url(self, value):
        return value.lower()
</code></pre>

    <ul>
        <li>Register the converter:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path, include, register_converter
from blog.converters import LowercaseConverter

register_converter(LowercaseConverter, "lower")

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),
]
</code></pre>

    <ul>
        <li>Use it in your app URLs:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path("user/&lt;lower:username&gt;/", views.profile),
]
</code></pre>

    <br/><br/>


    <li><b>Order, Matching Rules, and 404 Errors</b></li>
    <br/>
    <ul>
        <li><u>Order matters</u> in <code>urlpatterns</code>:
            <ul>
                <li>Django goes from top to bottom</li>
                <li>The first pattern that matches wins</li>
                <li>Remaining patterns are ignored</li>
            </ul>
        </li>
        <br/>
        <li>Example of problematic order:</li>
    </ul>

<pre><code class="language-py line-numbers">urlpatterns = [
    path("post/&lt;int:id&gt;/", views.post_by_id),
    path("post/latest/", views.latest_post),
]
</code></pre>

    <ul>
        <li>A request for <code>/post/latest/</code> will try to match <code>&lt;int:id&gt;</code> first, fail, then move on.</li>
        <li>Better order:</li>
    </ul>

<pre><code class="language-py line-numbers">urlpatterns = [
    path("post/latest/", views.latest_post),
    path("post/&lt;int:id&gt;/", views.post_by_id),
]
</code></pre>

    <ul>
        <li>If nothing matches, Django returns a <u>404 Not Found</u> page.</li>
        <br/>
        <li>Trailing slash behavior is influenced by <code>APPEND_SLASH</code>: If <code>APPEND_SLASH = True</code> (default), Django may redirect <code>/hello</code> to <code>/hello/</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Named URLs and Reverse Resolution</b></li>
    <br/>
    <ul>
        <li>Giving a <code>name</code> to your URL pattern lets you refer to it without hardcoding the path.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path("hello/", views.hello, name="hello"),
]
</code></pre>

    <ul>
        <li>Use <code>reverse()</code> in Python code:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.urls import reverse

url = reverse("hello")   # returns "/hello/"
</code></pre>

    <ul>
        <li>Use <code>{% url %}</code> in templates:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;a href="{% url 'hello' %}"&gt;Say hello&lt;/a&gt;
</code></pre>

    <ul>
        <li>Advantages:
            <ul>
                <li>changing the actual path does not break all links</li>
                <li>safe refactoring</li>
            </ul>
        </li>
    </ul>
    <br/><br/>



    <li><b>Class-Based Views and <code>as_view()</code></b></li>
    <br/>
    <ul>
        <li>Django encourages class-based views (CBVs) for reusable logic.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.views import View
from django.http import HttpResponse

class HelloView(View):
    def get(self, request):
        return HttpResponse("Hello from class-based view!")
</code></pre>

    <ul>
        <li>URL pattern uses <code>.as_view()</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from .views import HelloView

urlpatterns = [
    path("hello/", HelloView.as_view(), name="hello-class"),
]
</code></pre>

    <ul>
        <li>For generic views (like <code>ListView</code>, <code>DetailView</code>), you also use <code>as_view()</code> in the dispatcher.</li>
    </ul>
    <br/><br/>


    <li><b>Static Files, Media, and Other Helpers</b></li>
    <br/>
    <ul>
        <li>During development, you can serve static and media files via URL dispatcher helpers.</li>
        <li>Example (development only):</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/urls.py

from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
</code></pre>

    <ul>
        <li>The admin itself (<code>/admin/</code>) is just another URL pattern registered in the dispatcher.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-views-beginner">Beginner&#39;s Guide to Views in Django</h3>
<ol>

    <li><b>What Is a View?</b></li>
    <br/>
    <ul>
        <li>A <u>view</u> is simply a Python function (or class) that Django calls when someone visits a URL in your website.</li>
        <br/>
        <li>You can think of a view as:
            <ul>
                <li><u>input</u>: an HTTP request from the browser</li>
                <li><u>logic</u>: your Python code runs</li>
                <li><u>output</u>: an HTTP response (text, HTML, JSON, etc.)</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Your First View</b></li>
    <br/>
    <ul>
        <li>Go to <code>blog/views.py</code> and create a simple function:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import HttpResponse

def hello(request):
    return HttpResponse(&quot;Hello, Django beginner!&quot;)
</code></pre>

    <ul>
        <li>This view:
            <ul>
                <li>receives the request</li>
                <li>returns the text <code>&quot;Hello, Django beginner!&quot;</code> to the browser</li>
            </ul>
        </li>
        <li>Then map it to a URL:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path(&quot;hello/&quot;, views.hello),
]
</code></pre>

    <ul>
        <li>Now visit <code>http://127.0.0.1:8000/blog/hello/</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Views Should Return HttpResponse</b></li>
    <br/>
    <ul>
        <li>Every view must return some kind of <code>HttpResponse</code>.</li>
        <li>You can return simple text:</li>
    </ul>

<pre><code class="language-py line-numbers">def hi(request):
    return HttpResponse(&quot;Hi from Django!&quot;)
</code></pre>

    <ul>
        <li>You can also return HTML as a string:</li>
    </ul>

<pre><code class="language-py line-numbers">def html_example(request):
    return HttpResponse(&quot;&lt;h1&gt;Welcome&lt;/h1&gt;&lt;p&gt;This is HTML.&lt;/p&gt;&quot;)
</code></pre>

    <br/><br/>


    <li><b>Views That Use Templates</b></li>
    <br/>
    <ul>
        <li>In real web apps, we don&#39;t want to write HTML in Python.</li>
        <li>We use templates for cleaner separation.</li>
        <li>Example view using <code>render()</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import render

def home(request):
    return render(request, &quot;blog/home.html&quot;)
</code></pre>

    <ul>
        <li>Template example:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/home.html --&gt;
&lt;h1&gt;Welcome to my blog&lt;/h1&gt;
&lt;p&gt;This page is rendered using a Django template.&lt;/p&gt;
</code></pre>

    <ul>
        <li>Now the view:
            <ul>
                <li>loads the template</li>
                <li>inserts dynamic data (if any)</li>
                <li>returns it as a response</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Passing Data from View to Template</b></li>
    <br/>
    <ul>
        <li>You can send Python data to your HTML page:</li>
    </ul>

<pre><code class="language-py line-numbers">def home(request):
    data = {&quot;name&quot;: &quot;Alice&quot;, &quot;hobby&quot;: &quot;Reading&quot;}
    return render(request, &quot;blog/home.html&quot;, data)
</code></pre>

    <ul>
        <li>In template:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;h1&gt;Hello {{ name }}!&lt;/h1&gt;
&lt;p&gt;Your hobby is {{ hobby }}.&lt;/p&gt;
</code></pre>

    <br/><br/>


    <li><b>Views with URL Parameters</b></li>
    <br/>
    <ul>
        <li>Sometimes URLs include variable parts like IDs.</li>
        <li>URL route:</li>
    </ul>

<pre><code class="language-py line-numbers">path(&quot;post/&lt;int:id&gt;/&quot;, views.show_post)
</code></pre>

    <ul>
        <li>View receives the variable:</li>
    </ul>

<pre><code class="language-py line-numbers">def show_post(request, id):
    return HttpResponse(f&quot;You requested post {id}&quot;)
</code></pre>

    <br/><br/>


    <li><b>Handling GET and POST Requests</b></li>
    <br/>
    <ul>
        <li>Basic check for request method:</li>
    </ul>

<pre><code class="language-py line-numbers">def contact(request):
    if request.method == &quot;GET&quot;:
        return HttpResponse(&quot;This is the contact form page.&quot;)
    if request.method == &quot;POST&quot;:
        return HttpResponse(&quot;Form submitted!&quot;)
</code></pre>

    <ul>
        <li>Later, you can process forms using Django forms or request.POST.</li>
    </ul>
    <br/><br/>


    <li><b>Redirecting from a View</b></li>
    <br/>
    <ul>
        <li>Use <code>redirect()</code> to send users to a different page:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import redirect

def go_home(request):
    return redirect(&quot;/blog/hello/&quot;)
</code></pre>

    <br/><br/>


    <li><b>Class-Based Views (Very Beginner-Friendly)</b></li>
    <br/>
    <ul>
        <li>Instead of writing functions, Django lets you create views as classes.</li>
        <li>A very simple class-based view:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.views import View
from django.http import HttpResponse

class HelloView(View):
    def get(self, request):
        return HttpResponse(&quot;Hello from a class-based view!&quot;)
</code></pre>

    <ul>
        <li>URL route:</li>
    </ul>

<pre><code class="language-py line-numbers">path(&quot;hello-class/&quot;, HelloView.as_view())
</code></pre>

    <ul>
        <li>Beginners can ignore CBVs at first, but they become useful later.</li>
    </ul>
    <br/><br/>


    <li><b>What Should a Beginner Focus On?</b></li>
    <br/>
    <ul>
        <li>As a beginner, you should mainly understand:
            <ul>
                <li>How to create a view function</li>
                <li>How to map a URL to a view</li>
                <li>How to return text or HTML</li>
                <li>How to render templates</li>
                <li>How to pass data to templates</li>
            </ul>
        </li>
        <br/>
        <li>Ignore advanced stuff like mixins, decorators, or class inheritance until you&#39;re comfortable with basics.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-views">Views in Django</h3>
<ol>

    <li><b>What Is a View?</b></li>
    <br/>
    <ul>
        <li>A <u>view</u> in Django is a Python function or class that receives a request and returns a response.</li>
        <br/>
        <li>Views contain the <u>business logic</u> of your application:
            <ul>
                <li>querying the database</li>
                <li>rendering templates</li>
                <li>processing forms</li>
                <li>returning JSON or HTML</li>
                <li>redirecting users</li>
            </ul>
        </li>
        <br/>
        <li>Every view must return some kind of <code>HttpResponse</code> object.</li>
    </ul>
    <br/><br/>


    <li><b>Simple Function-Based View (FBV)</b></li>
    <br/>
    <ul>
        <li>A basic function-based view looks like this:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.http import HttpResponse

def hello(request):
    return HttpResponse(&quot;Hello from a Django view!&quot;)
</code></pre>

    <ul>
        <li>Mapped in <code>urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path(&quot;hello/&quot;, views.hello),
]
</code></pre>

    <ul>
        <li>Request path → <code>/hello/</code> executes <code>hello()</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Returning HTML with HttpResponse</b></li>
    <br/>
    <ul>
        <li>You can return raw HTML as a string:</li>
    </ul>

<pre><code class="language-py line-numbers">def home(request):
    return HttpResponse(&quot;&lt;h1&gt;Welcome!&lt;/h1&gt;&lt;p&gt;This is raw HTML.&lt;/p&gt;&quot;)
</code></pre>

    <ul>
        <li>Good for testing, not for real applications.</li>
    </ul>
    <br/><br/>


    <li><b>Rendering Templates</b></li>
    <br/>
    <ul>
        <li>Most views return HTML produced by templates.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.shortcuts import render

def home(request):
    return render(request, &quot;blog/home.html&quot;)
</code></pre>

    <ul>
        <li>Example template:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/home.html --&gt;
&lt;h1&gt;Blog Home&lt;/h1&gt;
&lt;p&gt;Rendered by Django.&lt;/p&gt;
</code></pre>

    <br/><br/>


    <li><b>Passing Data to Templates</b></li>
    <br/>
    <ul>
        <li>You can send context variables:</li>
    </ul>

<pre><code class="language-py line-numbers">def home(request):
    context = {
        &quot;title&quot;: &quot;My Blog&quot;,
        &quot;posts&quot;: [&quot;Post A&quot;, &quot;Post B&quot;],
    }
    return render(request, &quot;blog/home.html&quot;, context)
</code></pre>

    <ul>
        <li>In template:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;h1&gt;{{ title }}&lt;/h1&gt;
&lt;ul&gt;
    {% for p in posts %}
        &lt;li&gt;{{ p }}&lt;/li&gt;
    {% endfor %}
&lt;/ul&gt;
</code></pre>

    <br/><br/>


    <li><b>Returning JSON Responses</b></li>
    <br/>
    <ul>
        <li>Django provides <code>JsonResponse</code> for structured data (APIs).</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import JsonResponse

def api_info(request):
    return JsonResponse({&quot;status&quot;: &quot;ok&quot;, &quot;version&quot;: 1})
</code></pre>

    <ul>
        <li>This is very common in modern REST or AJAX applications.</li>
    </ul>
    <br/><br/>


    <li><b>Handling URL Parameters</b></li>
    <br/>
    <ul>
        <li>URL patterns can pass arguments to views.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

def show_post(request, post_id):
    return HttpResponse(f&quot;Post ID is {post_id}&quot;)
</code></pre>

    <ul>
        <li>URL route:</li>
    </ul>

<pre><code class="language-py line-numbers">path(&quot;post/&lt;int:post_id&gt;/&quot;, views.show_post)
</code></pre>

    <br/><br/>


    <li><b>Class-Based Views (CBV)</b></li>
    <br/>
    <ul>
        <li>Django offers class-based views for reusable, structured logic.</li>
        <li>A simple CBV:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.views import View
from django.http import HttpResponse

class HelloView(View):
    def get(self, request):
        return HttpResponse(&quot;Hello from a class-based view!&quot;)
</code></pre>

    <ul>
        <li>URL mapping:</li>
    </ul>

<pre><code class="language-py line-numbers">path(&quot;hello/&quot;, HelloView.as_view())
</code></pre>

    <br/><br/>


    <li><b>Advantages of Class-Based Views</b></li>
    <br/>
    <ul>
        <li>CBVs provide:
            <ul>
                <li>built-in methods (<code>get</code>, <code>post</code>, <code>put</code>, etc.)</li>
                <li>clean separation of HTTP methods</li>
                <li>mixins for reusable behavior</li>
                <li>generic views for CRUD operations</li>
            </ul>
        </li>
        <br/>
        <li>For example, <code>ListView</code>, <code>DetailView</code>, <code>CreateView</code>, etc. help build apps faster.</li>
    </ul>
    <br/><br/>


    <li><b>Generic Class-Based Views (GCBV)</b></li>
    <br/>
    <ul>
        <li>Generic Class-Based Views are ready-made view classes that perform common tasks for you.</li>
        <li>You do <u>not</u> need to manually query the database or write boilerplate logic.</li>
        <li>Django already knows how to list objects, show details, create forms, update records, delete records, etc.</li>
        <li>Here is a simple example: <u>displaying a list of all <code>Post</code> objects</u>.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.views.generic import ListView
from .models import Post

class PostListView(ListView):
    model = Post                             # Tell Django which model you want to list
    template_name = &quot;blog/posts.html&quot;
    context_object_name = "posts"
</code></pre>
    <ul>
        <li><b>How this works:</b></li>
        <ul>
            <li>Django automatically runs <code>Post.objects.all()</code> for you.</li>
            <li>The result is stored in a context variable called <code>object_list</code> (or <code>post_list</code>).</li>
            <li>The view then renders your template <code>blog/posts.html</code> and provides the list of posts as data.</li>
        </ul>
    </ul>

    <br/>

    <ul>
        <li><b>Connecting the View to a URL:</b></li>
    </ul>

<pre><code class="language-py line-numbers">path(&quot;posts/&quot;, PostListView.as_view())
</code></pre>

    <ul>
        <li>Django will now serve <code>/posts/</code> using your <code>PostListView</code>.</li>
        <li>Whenever a user visits that page, Django automatically fetches the posts and renders the template.</li>
    </ul>

    <br/>

    <ul>
        <li><b>Example content of <code>blog/posts.html</code>:</b></li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/posts.html --&gt;
&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;All Posts&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;All Posts&lt;/h1&gt;

    &lt;ul&gt;
    {% for post in posts %}
        &lt;li&gt;
            &lt;h2&gt;{{ post.title }}&lt;/h2&gt;
            &lt;p&gt;{{ post.body|truncatechars:100 }}&lt;/p&gt;
        &lt;/li&gt;
    {% empty %}
        &lt;li&gt;No posts yet.&lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

    <ul>
        <li><b>What is going on in this template:</b></li>
        <br/>
        <ul>
            <li><code>{% for post in posts %}</code> loops over the list provided by the view (the context variable <code>posts</code>).</li>
            <li><code>{{ post.title }}</code> and <code>{{ post.body }}</code> access fields on each <code>Post</code> object.</li>
            <li><code>|truncatechars:100</code> is a filter that shortens the text to 100 characters (optional).</li>
            <li><code>{% empty %}</code> is used if the list is empty (no posts in the database).</li>
        </ul>
    </ul>
    <br/><br/>



    <li><b>Redirecting from Views</b></li>
    <br/>
    <ul>
        <li>You can redirect using <code>redirect()</code>.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import redirect

def go_home(request):
    return redirect(&quot;/hello/&quot;)
</code></pre>

    <br/><br/>


    <li><b>Handling HTTP Methods Manually</b></li>
    <br/>
    <ul>
        <li>Function-based views can inspect the request method.</li>
    </ul>

<pre><code class="language-py line-numbers">def contact(request):
    if request.method == &quot;GET&quot;:
        return HttpResponse(&quot;Form page&quot;)
    elif request.method == &quot;POST&quot;:
        return HttpResponse(&quot;Processing form...&quot;)
</code></pre>

    <br/><br/>


    <li><b>Using Decorators in Views</b></li>
    <br/>
    <ul>
        <li>Django provides view decorators such as <code>login_required</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.contrib.auth.decorators import login_required

@login_required
def dashboard(request):
    return HttpResponse(&quot;Dashboard&quot;)
</code></pre>

    <br/><br/>


    <li><b>Error Views</b></li>
    <br/>
    <ul>
        <li>Views can act as custom error handlers:</li>
    </ul>

<pre><code class="language-py line-numbers"># in mysite/urls.py

handler404 = &quot;mysite.views.not_found&quot;
handler500 = &quot;mysite.views.server_error&quot;
</code></pre>

    <ul>
        <li>Custom view example:</li>
    </ul>

<pre><code class="language-py line-numbers">def not_found(request, exception):
    return HttpResponse(&quot;Page not found&quot;, status=404)
</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-httpresponse">HttpResponse in Django</h3>
<ol>

    <li><b>What Is HttpResponse?</b></li>
    <br/>
    <ul>
        <li><code>HttpResponse</code> is the core Django class used to return data back to the browser.</li>
        <br/>
        <li>Whenever a Django view finishes processing a request, it must return an <code>HttpResponse</code> (or a subclass of it).</li>
        <br/>
        <li>It represents:
            <ul>
                <li>the response body (HTML, JSON, text, binary)</li>
                <li>HTTP status code (200, 404, 500, etc.)</li>
                <li>response headers (Content-Type, cookies, etc.)</li>
            </ul>
        </li>
        <br/>
        <li>All responses in Django originate from <code>HttpResponse</code> or one of its subclasses.</li>
    </ul>
    <br/><br/>


    <li><b>Basic Usage of HttpResponse</b></li>
    <br/>
    <ul>
        <li>A simple view that returns plain text:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import HttpResponse

def hello(request):
    return HttpResponse(&quot;Hello World!&quot;)
</code></pre>

    <ul>
        <li>This returns an HTTP response with:
            <ul>
                <li>status = 200</li>
                <li>content = &quot;Hello World!&quot;</li>
                <li>Content-Type = text/html; charset=utf-8</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Returning HTML via HttpResponse</b></li>
    <br/>
    <ul>
        <li>You can put raw HTML inside your response:</li>
    </ul>

<pre><code class="language-py line-numbers">def home(request):
    return HttpResponse(&quot;&lt;h1&gt;Welcome&lt;/h1&gt;&lt;p&gt;This is direct HTML.&lt;/p&gt;&quot;)
</code></pre>

    <ul>
        <li>Good for testing; templates are preferred for real applications.</li>
    </ul>
    <br/><br/>


    <li><b>Setting Content Types</b></li>
    <br/>
    <ul>
        <li>Specify the <code>Content-Type</code> using the <code>content_type</code> parameter.</li>
    </ul>

<pre><code class="language-py line-numbers">def plain_text(request):
    return HttpResponse(&quot;Just text&quot;, content_type=&quot;text/plain&quot;)
</code></pre>

    <ul>
        <li>Other examples:
            <ul>
                <li><code>application/json</code></li>
                <li><code>text/csv</code></li>
                <li><code>application/pdf</code></li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Returning Binary Data</b></li>
    <br/>
    <ul>
        <li>You can send images, files, or other binary streams.</li>
    </ul>

<pre><code class="language-py line-numbers">def raw_png(request):
    with open(&quot;logo.png&quot;, &quot;rb&quot;) as f:
        data = f.read()
    return HttpResponse(data, content_type=&quot;image/png&quot;)
</code></pre>

    <ul>
        <li>Use <code>FileResponse</code> for really large files (more efficient).</li>
    </ul>
    <br/><br/>


    <li><b>Setting HTTP Status Codes</b></li>
    <br/>
    <ul>
        <li>You can override the status code:</li>
    </ul>

<pre><code class="language-py line-numbers">def not_found(request):
    return HttpResponse(&quot;Not here&quot;, status=404)
</code></pre>
    <br/><br/>


    <li><b>Adding Custom Headers</b></li>
    <br/>
    <ul>
        <li>You can modify response headers before returning:</li>
    </ul>

<pre><code class="language-py line-numbers">def custom_headers(request):
    response = HttpResponse(&quot;OK&quot;)
    response[&quot;X-Powered-By&quot;] = &quot;Django&quot;
    return response
</code></pre>

    <ul>
        <li>Useful for:
            <ul>
                <li>security headers</li>
                <li>custom caching rules</li>
                <li>rate-limiting information</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>HttpResponse Subclasses</b></li>
    <br/>
    <ul>
        <li>Django offers built-in convenience response classes:</li>
        <ul>
            <li><code>JsonResponse</code> → returns JSON</li>
            <li><code>HttpResponseRedirect</code> → redirect</li>
            <li><code>HttpResponsePermanentRedirect</code></li>
            <li><code>FileResponse</code> → efficient streaming responses</li>
            <li><code>StreamingHttpResponse</code> → large or infinite data streams</li>
        </ul>
        <br/>
        <li>Example JSON:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import JsonResponse

def api(request):
    return JsonResponse({&quot;result&quot;: 123})
</code></pre>

    <br/><br/>


    <li><b>HttpResponse and Templates</b></li>
    <br/>
    <ul>
        <li><code>render()</code> returns an <code>HttpResponse</code> behind the scenes.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import render

def home(request):
    return render(request, &quot;blog/home.html&quot;)
</code></pre>

    <ul>
        <li><code>render()</code> is simply a wrapper around:
            <ul>
                <li>loading a template</li>
                <li>rendering HTML</li>
                <li>returning an <code>HttpResponse</code></li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>HttpResponse with Cookies</b></li>
    <br/>
    <ul>
        <li>You can set cookies in a response:</li>
    </ul>

<pre><code class="language-py line-numbers">def set_cookie(request):
    response = HttpResponse(&quot;Cookie set&quot;)
    response.set_cookie(&quot;theme&quot;, &quot;dark&quot;)
    return response
</code></pre>

    <ul>
        <li>Reading cookies is done via <code>request.COOKIES</code>.</li>
    </ul>
    <br/><br/>


    <li><b>StreamingHttpResponse</b> (Advanced)</li>
    <br/>
    <ul>
        <li>For extremely large or infinite data:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import StreamingHttpResponse

def stream_numbers(request):
    def generator():
        for i in range(1, 6):
            yield f&quot;Number: {i}\n&quot;
    return StreamingHttpResponse(generator())
</code></pre>
    <br/><br/>


    <li><b>FileResponse</b> (Efficient File Downloads)</li>
    <br/>
    <ul>
        <li>Django recommends <code>FileResponse</code> for serving files:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import FileResponse

def download(request):
    return FileResponse(open(&quot;report.pdf&quot;, &quot;rb&quot;), as_attachment=True)
</code></pre>

    <ul>
        <li>Streams file data instead of loading the entire file into memory.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-writing-views">Writing Views in Django</h3>
<ol>

    <li><b>What Does It Mean to “Write a View”?</b></li>
    <br/>
    <ul>
        <li>Writing a view means creating Python code that decides what should happen when a user opens a certain URL.</li>
        <br/>
        <li>Every view:
            <ul>
                <li>receives a <code>request</code> object</li>
                <li>runs some logic (optional)</li>
                <li>returns an <code>HttpResponse</code> (or <code>render()</code> template)</li>
            </ul>
        </li>
        <br/>
        <li>Views live inside the <code>views.py</code> file of your app.</li>
    </ul>
    <br/><br/>


    <li><b>Start With a Simple View</b></li>
    <br/>
    <ul>
        <li>Open <code>blog/views.py</code> and write:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import HttpResponse

def hello(request):
    return HttpResponse(&quot;Hello! This is my first view.&quot;)
</code></pre>

    <ul>
        <li>Now create a URL route:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path(&quot;hello/&quot;, views.hello),
]
</code></pre>

    <ul>
        <li>Visit <code>/blog/hello/</code> and the text will appear.</li>
    </ul>
    <br/><br/>


    <li><b>Views That Return HTML</b></li>
    <br/>
    <ul>
        <li>You can write HTML inside the response:</li>
    </ul>

<pre><code class="language-py line-numbers">def welcome(request):
    return HttpResponse(&quot;&lt;h1&gt;Welcome&lt;/h1&gt;&lt;p&gt;This is a simple HTML page.&lt;/p&gt;&quot;)
</code></pre>

    <ul>
        <li>Django will send this HTML to the browser.</li>
    </ul>
    <br/><br/>


    <li><b>Rendering Templates (Recommended)</b></li>
    <br/>
    <ul>
        <li>For anything more than simple text, use templates.</li>
        <li>Example view:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import render

def home(request):
    return render(request, &quot;blog/home.html&quot;)
</code></pre>

    <ul>
        <li>Create the template:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/home.html --&gt;
&lt;h1&gt;Blog Home&lt;/h1&gt;
&lt;p&gt;This page was rendered using a template!&lt;/p&gt;
</code></pre>

    <ul>
        <li>This separates Python logic from HTML layout.</li>
    </ul>
    <br/><br/>


    <li><b>Passing Data to a Template</b></li>
    <br/>
    <ul>
        <li>Views can send variables to templates using a dictionary (called a &quot;context&quot;).</li>
    </ul>

<pre><code class="language-py line-numbers">def about(request):
    info = {
        &quot;title&quot;: &quot;About This Blog&quot;,
        &quot;author&quot;: &quot;Junzhe&quot;,
    }
    return render(request, &quot;blog/about.html&quot;, info)
</code></pre>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/about.html --&gt;
&lt;h1&gt;{{ title }}&lt;/h1&gt;
&lt;p&gt;Created by {{ author }}.&lt;/p&gt;
</code></pre>

    <br/><br/>


    <li><b>Views With URL Parameters</b></li>
    <br/>
    <ul>
        <li>You can write views that handle dynamic URLs:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py
path(&quot;post/&lt;int:id&gt;/&quot;, views.show_post)
</code></pre>

<pre><code class="language-py line-numbers">def show_post(request, id):
    return HttpResponse(f&quot;You asked for post {id}&quot;)
</code></pre>

    <ul>
        <li>Visiting <code>/blog/post/7/</code> will return <code>You asked for post 7</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Views That Handle GET and POST</b></li>
    <br/>
    <ul>
        <li>Django views can check request methods.</li>
    </ul>

<pre><code class="language-py line-numbers">def contact(request):
    if request.method == &quot;GET&quot;:
        return HttpResponse(&quot;This is the contact page.&quot;)
    elif request.method == &quot;POST&quot;:
        return HttpResponse(&quot;You submitted the form!&quot;)
</code></pre>

    <ul>
        <li>This is the basis for form handling.</li>
    </ul>
    <br/><br/>


    <li><b>Redirects in Views</b></li>
    <br/>
    <ul>
        <li>You can redirect to another URL easily.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import redirect

def go_to_home(request):
    return redirect(&quot;/blog/home/&quot;)
</code></pre>

    <ul>
        <li>This tells the browser to open a different page.</li>
    </ul>
    <br/><br/>


    <li><b>Writing Class-Based Views (Beginner Level)</b></li>
    <br/>
    <ul>
        <li>Instead of using a function, Django allows writing views as classes.</li>
        <li>A simple class-based view:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.views import View
from django.http import HttpResponse

class HelloView(View):
    def get(self, request):
        return HttpResponse(&quot;Hello from a class-based view!&quot;)
</code></pre>

<pre><code class="language-py line-numbers">path(&quot;hello-class/&quot;, HelloView.as_view())
</code></pre>

    <ul>
        <li>For now, it’s fine if you focus only on function-based views.</li>
    </ul>
    <br/><br/>


    <li><b>Where Should You Write Views?</b></li>
    <br/>
    <ul>
        <li>Each app has its own <code>views.py</code> file:</li>
    </ul>

<pre><code class="language-bash line-numbers">blog/
├── admin.py
├── apps.py
├── models.py
├── views.py   &lt;-- write your views here
├── tests.py
└── migrations/
</code></pre>

    <ul>
        <li>You write your project’s logic here.</li>
    </ul>
    <br/><br/>


    <li><b>A Good Beginner Workflow for Writing Views</b></li>
    <br/>
    <ul>
        <li>Whenever you need a new page in your website:</li>
        <ul>
            <li>step 1 → write the view in <code>views.py</code></li>
            <li>step 2 → connect it to a URL in <code>urls.py</code></li>
            <li>step 3 → (optional) create a template</li>
            <li>step 4 → add logic or pass data as needed</li>
        </ul>
        <br/>
        <li>This flow becomes second nature once you practice it a few times.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-view-decorators">Beginner&#39;s Guide to View Decorators in Django</h3>
<ol>

    <li><b>What Is a View Decorator?</b></li>
    <br/>
    <ul>
        <li>A <b>decorator</b> in Django is something you place <u>on top of a view function</u> to give that view extra features or behavior.</li>
        <br/>
        <li>You can think of it like:
            <ul>
                <li>“this view needs login first”</li>
                <li>“this view should only accept certain HTTP methods”</li>
                <li>“this view should run extra checks before executing”</li>
            </ul>
        </li>
        <br/>
        <li>The syntax always looks like this:</li>
    </ul>

<pre><code class="language-py line-numbers">@decorator_name
def my_view(request):
    ...
</code></pre>

    <ul>
        <li>The <code>@decorator</code> line wraps your view and adds extra rules.</li>
    </ul>
    <br/><br/>


    <li><b>Why Do We Use Decorators?</b></li>
    <br/>
    <ul>
        <li>They help you avoid repeating the same logic in many views.</li>
        <li>They make your code cleaner and more readable.</li>
        <li>Django provides many useful built-in decorators.</li>
    </ul>
    <br/><br/>


    <li><b>Decorator #1: login_required</b></li>
    <br/>
    <ul>
        <li>This is the most common decorator.</li>
        <li>It makes sure the user is logged in before accessing the view.</li>
        <li>If not logged in, Django automatically redirects to the login page.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.contrib.auth.decorators import login_required
from django.http import HttpResponse

@login_required
def dashboard(request):
    return HttpResponse(&quot;Welcome to your dashboard!&quot;)
</code></pre>

    <ul>
        <li>If the user is not logged in:
            <ul>
                <li>Django redirects them to <code>/accounts/login/</code> (default)</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Decorator #2: require_http_methods</b></li>
    <br/>
    <ul>
        <li>This decorator restricts which HTTP methods are allowed for a view.</li>
        <li>Example: allow only GET and POST:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.views.decorators.http import require_http_methods
from django.http import HttpResponse

@require_http_methods([&quot;GET&quot;, &quot;POST&quot;])
def contact(request):
    return HttpResponse(&quot;This view accepts only GET and POST&quot;)
</code></pre>

    <ul>
        <li>If someone sends a PUT request, Django returns 405 (Method Not Allowed).</li>
    </ul>
    <br/><br/>


    <li><b>Decorator #3: require_GET and require_POST</b></li>
    <br/>
    <ul>
        <li>These shortcuts restrict views to a <u>single</u> method.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.views.decorators.http import require_GET

@require_GET
def homepage(request):
    return HttpResponse(&quot;Only GET requests are allowed here!&quot;)
</code></pre>

<pre><code class="language-py line-numbers">from django.views.decorators.http import require_POST

@require_POST
def save_data(request):
    return HttpResponse(&quot;Only POST requests accepted.&quot;)
</code></pre>

    <br/><br/>


    <li><b>Decorator #4: csrf_exempt</b></li>
    <br/>
    <ul>
        <li>This decorator disables Django&#39;s CSRF protection for a specific view.</li>
        <li>Beginners should use this carefully (only when you know why).</li>
    </ul>

<pre><code class="language-py line-numbers">from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def webhook(request):
    return HttpResponse(&quot;CSRF check skipped for this view.&quot;)
</code></pre>

    <ul>
        <li>Useful for external services posting data (GitHub webhooks, Stripe, etc.)</li>
    </ul>
    <br/><br/>


    <li><b>Decorator #5: cache_page</b></li>
    <br/>
    <ul>
        <li>This caches (saves) the output of a view for a certain number of seconds.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.views.decorators.cache import cache_page

@cache_page(60)  # cache for 60 seconds
def news(request):
    return HttpResponse(&quot;This page is cached for 1 minute.&quot;)
</code></pre>

    <ul>
        <li>Meaning: the view won&#39;t run again until the cache expires.</li>
    </ul>
    <br/><br/>


    <li><b>How Decorators Work (beginner explanation)</b></li>
    <br/>
    <ul>
        <li>When you add <code>@something</code> above a view, Django replaces your view with a “wrapped” version.</li>
        <li>You don’t need to fully understand decorators in Python yet, but the idea is:</li>
    </ul>

<pre><code class="language-text line-numbers">@my_decorator
def my_view(request):
    ...
</code></pre>

    <ul>
        <li>This is the same as:</li>
    </ul>

<pre><code class="language-text line-numbers">my_view = my_decorator(my_view)
</code></pre>

    <ul>
        <li>So the decorator can add rules <u>before</u> or <u>after</u> your view runs.</li>
    </ul>
    <br/><br/>


    <li><b>Decorators With Arguments</b></li>
    <br/>
    <ul>
        <li>Some decorators need extra information.</li>
        <li>Example: restrict to certain HTTP methods:</li>
    </ul>

<pre><code class="language-py line-numbers">@require_http_methods([&quot;GET&quot;, &quot;POST&quot;])
def example(request):
    return HttpResponse(&quot;This view accepts only GET and POST&quot;)
</code></pre>

    <ul>
        <li>The decorator receives your list <code>[&quot;GET&quot;, &quot;POST&quot;]</code> as a parameter.</li>
    </ul>
    <br/><br/>


    <li><b>Using Multiple Decorators</b></li>
    <br/>
    <ul>
        <li>You can “stack” decorators on top of each other.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.contrib.auth.decorators import login_required
from django.views.decorators.http import require_GET

@login_required
@require_GET
def profile(request):
    return HttpResponse(&quot;Your profile&quot;)
</code></pre>

    <ul>
        <li>Order matters: the top-most decorator runs first</li>
    </ul>
    <br/><br/>


    <li><b>Decorators and Class-Based Views (Beginner Note)</b></li>
    <br/>
    <ul>
        <li>Decorators can be used on CBVs using <code>method_decorator</code>, but beginners can skip this for now.</li>
        <li>Just know that decorators <u>do</u> work with CBVs too.</li>
    </ul>
    <br/><br/>


    <li><b>Which Decorators Should Beginners Learn First?</b></li>
    <br/>
    <ul>
        <li>If you are new, learn these 3:
            <ul>
                <li><code>login_required</code></li>
                <li><code>require_GET</code> / <code>require_POST</code></li>
                <li><code>csrf_exempt</code> (use sparingly)</li>
            </ul>
        </li>
        <br/>
        <li>The others are useful but not needed for your first 2–3 weeks of Django learning.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-file-uploads">File Uploads in Django (Beginner&#39;s Guide)</h3>
<ol>

    <li><b>What Does “File Upload” Mean in Django?</b></li>
    <br/>
    <ul>
        <li>File upload means allowing users to send files (images, PDFs, documents, videos) from their browser to your server.</li>
        <br/>
        <li>Django handles uploads using:
            <ul>
                <li><code>request.FILES</code> &rarr; uploaded file objects</li>
                <li>HTML forms with <code>enctype=&quot;multipart/form-data&quot;</code></li>
                <li>settings <code>MEDIA_ROOT</code> and <code>MEDIA_URL</code> to store and serve files</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Step 1: Configure MEDIA_ROOT and MEDIA_URL</b></li>
    <br/>
    <ul>
        <li>In <code>mysite/settings.py</code> add (or check) these lines:</li>
    </ul>

<pre><code class="language-py line-numbers">from pathlib import Path

BASE_DIR = Path(__file__).resolve().parent.parent

MEDIA_ROOT = BASE_DIR / &quot;media&quot;   # folder on disk for uploaded files
MEDIA_URL  = &quot;/media/&quot;            # URL prefix used in the browser
</code></pre>

    <ul>
        <li><code>MEDIA_ROOT</code>: real folder on the server (e.g. <code>/home/user/project/media</code>).</li>
        <li><code>MEDIA_URL</code>: how the browser reaches files in that folder (e.g. <code>/media/...</code>).</li>
    </ul>
    <br/><br/>


    <li><b>Step 2: Serve Media Files in Development</b></li>
    <br/>
    <ul>
        <li>In development you let Django serve uploaded files for you.</li>
        <li>In <code>mysite/urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path(&quot;admin/&quot;, admin.site.urls),
    path(&quot;blog/&quot;, include(&quot;blog.urls&quot;)),
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
</code></pre>

    <ul>
        <li>Now any file saved under <code>MEDIA_ROOT</code> can be accessed via URLs that start with <code>MEDIA_URL</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Step 3: Simple Upload Form (HTML)</b></li>
    <br/>
    <ul>
        <li>Create a template for uploading a file:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/upload.html --&gt;

&lt;h1&gt;Upload a File&lt;/h1&gt;

&lt;form method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;
    {% csrf_token %}
    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;
    &lt;br/&gt;&lt;br/&gt;
    &lt;button type=&quot;submit&quot;&gt;Upload&lt;/button&gt;
&lt;/form&gt;
</code></pre>

    <ul>
        <li><b>Important</b>:
            <ul>
                <li><code>method=&quot;POST&quot;</code> is required.</li>
                <li><code>enctype=&quot;multipart/form-data&quot;</code> is required for file uploads.</li>
                <li><code>{% csrf_token %}</code> is needed for POST forms in Django.</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Step 4: View That Saves the Uploaded File (Manual Saving)</b></li>
    <br/>
    <ul>
        <li>In <code>blog/views.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import render
from django.http import HttpResponse
from django.conf import settings
import os

def upload_file(request):
    if request.method == &quot;POST&quot;:
        uploaded = request.FILES.get(&quot;file&quot;)

        if not uploaded:
            return HttpResponse(&quot;No file selected.&quot;)

        save_path = settings.MEDIA_ROOT / uploaded.name

        with open(save_path, &quot;wb&quot;) as f:
            for chunk in uploaded.chunks():
                f.write(chunk)

        return HttpResponse(f&quot;Uploaded: {uploaded.name}&quot;)

    return render(request, &quot;blog/upload.html&quot;)
</code></pre>

    <ul>
        <li>Here we:
            <ul>
                <li>read the file from <code>request.FILES</code></li>
                <li>build a path using <code>settings.MEDIA_ROOT</code> (not a hardcoded <code>&quot;media/&quot;</code>)</li>
                <li>write the file in chunks (safe for big files)</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Step 5: URL for the Upload View</b></li>
    <br/>
    <ul>
        <li>In <code>blog/urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.urls import path
from . import views

urlpatterns = [
    path(&quot;upload/&quot;, views.upload_file, name=&quot;upload&quot;),
]
</code></pre>

    <ul>
        <li>Now <code>/blog/upload/</code> shows the upload form.</li>
    </ul>
    <br/><br/>


    <li><b>Where Files Actually Go</b></li>
    <br/>
    <ul>
        <li>After uploading <code>picture.jpg</code>, your project folder looks like:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
├── media/
│   └── picture.jpg
└── blog/
    ├── views.py
    └── ...
</code></pre>

    <ul>
        <li><code>media/</code> is <code>MEDIA_ROOT</code>, and the file is stored there.</li>
    </ul>
    <br/><br/>


    <li><b>Serving Uploaded Files (Manual Example)</b></li>
    <br/>
    <ul>
        <li>If <code>MEDIA_URL = &quot;/media/&quot;</code>, then <code>picture.jpg</code> is available at:</li>
    </ul>

<pre><code class="language-text line-numbers">/media/picture.jpg
</code></pre>

    <ul>
        <li>You could show it in a template like:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;img src=&quot;/media/picture.jpg&quot; alt=&quot;uploaded&quot; /&gt;
</code></pre>

    <ul>
        <li>However, hardcoding <code>&quot;/media/&quot;</code> is not ideal. The cleaner way is to use a <code>FileField</code> model and <code>{{ object.file.url }}</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Using a Model with FileField (Recommended)</b></li>
    <br/>
    <ul>
        <li>Create a model to store uploaded files:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models

class Upload(models.Model):
    file = models.FileField(upload_to=&quot;uploads/&quot;)

    def __str__(self):
        return self.file.name
</code></pre>

    <ul>
        <li><code>FileField</code> now will save files under <code>MEDIA_ROOT / &quot;uploads/&quot;</code>, for example:</li>
    </ul>

<pre><code class="language-bash line-numbers">media/
└── uploads/
    └── myfile.pdf
</code></pre>

    <br/><br/>


    <li><b>View That Uses the Model</b></li>

<pre><code class="language-py line-numbers">from django.shortcuts import render
from django.http import HttpResponse
from .models import Upload

def upload_with_model(request):
    if request.method == &quot;POST&quot;:
        file_obj = request.FILES.get(&quot;file&quot;)
        if not file_obj:
            return HttpResponse(&quot;No file selected.&quot;)

        Upload.objects.create(file=file_obj)
        return HttpResponse(&quot;File uploaded using model!&quot;)

    return render(request, &quot;blog/upload.html&quot;)
</code></pre>

    <br/><br/>


    <li><b>Listing and Displaying Uploaded Files</b></li>

<pre><code class="language-py line-numbers">def show_uploads(request):
    files = Upload.objects.all()
    return render(request, &quot;blog/files.html&quot;, {&quot;files&quot;: files})
</code></pre>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/files.html --&gt;

&lt;h2&gt;Uploaded Files&lt;/h2&gt;

{% for f in files %}
    &lt;p&gt;
        &lt;a href=&quot;{{ f.file.url }}&quot;&gt;{{ f.file.name }}&lt;/a&gt;
    &lt;/p&gt;
{% endfor %}
</code></pre>

    <ul>
        <li><code>{{ f.file.url }}</code> automatically uses <code>MEDIA_URL</code>, so you don&#39;t hardcode <code>/media/...</code>.</li>
    </ul>
    <br/><br/>

        <li><b>Serving Media Files: Development vs Production</b></li>
    <br/>
    <ul>
        <li>In <u>development</u>, Django can serve uploaded files for you using a helper in <code>urls.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # your normal routes here...
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
</code></pre>

    <ul>
        <li>This means:
            <ul>
                <li>When <code>DEBUG = True</code>, any URL starting with <code>MEDIA_URL</code> (for example <code>/media/</code>)</li>
                <li>is served directly from files in <code>MEDIA_ROOT</code> (for example <code>BASE_DIR / "media"</code>).</li>
            </ul>
        </li>
        <li>This helper is <b>only meant for local development</b>, not for production.</li>
    </ul>
    <br/>

    <ul>
        <li>In <u>production</u>:
            <ul>
                <li>Django still saves files into <code>MEDIA_ROOT</code>.</li>
                <li>But a real web server (like Nginx or Apache) should serve those files for requests that start with <code>MEDIA_URL</code>.</li>
                <li>You normally <u>do not</u> use the <code>static(...)</code> helper when <code>DEBUG = False</code>.</li>
            </ul>
        </li>
        <li>A very simplified Nginx example (just to show the idea, not full config):</li>
    </ul>

<pre><code class="language-text line-numbers">location /media/ {
    alias /var/www/myproject/media/;
}
</code></pre>

    <ul>
        <li>As a beginner you can remember:
            <ul>
                <li><b>Development</b>: Django serves media using <code>static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</code>.</li>
                <li><b>Production</b>: your web server (or a storage service like S3 plus CDN) serves files from <code>MEDIA_ROOT</code> for <code>MEDIA_URL</code> requests.</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Common Beginner Mistakes (Revisited)</b></li>
    <br/>
    <ul>
        <li>Forgetting <code>enctype=&quot;multipart/form-data&quot;</code> in the form.</li>
        <li>Trying to read files from <code>request.POST</code> instead of <code>request.FILES</code>.</li>
        <li>Hardcoding paths like <code>&quot;media/&quot;</code> instead of using <code>MEDIA_ROOT</code>.</li>
        <li>Hardcoding URLs like <code>&quot;/media/...&quot;</code> instead of using <code>{{ file.url }}</code>.</li>
        <li>Not adding the <code>static()</code> helper for media in <code>urls.py</code> during development.</li>
    </ul>
    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li><code>MEDIA_ROOT</code> is where files live on disk, <code>MEDIA_URL</code> is how the browser reaches them.</li>
        <li>Use <code>request.FILES</code> to access uploaded files and save them under <code>MEDIA_ROOT</code>.</li>
        <li>Using <code>FileField</code> on a model is the cleanest way to manage uploads.</li>
        <li>Use <code>{{ some_file_field.url }}</code> in templates instead of hardcoding <code>/media/...</code>.</li>
        <li>Hardcoded <code>/media</code> paths &amp; manual <code>&quot;media/&quot;</code> folders are okay for quick demos, but not ideal for real projects.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-shortcut-http-functions">Django Shortcut HTTP Functions (Beginner&#39;s Guide)</h3>
<ol>

    <li><b>What Are Django Shortcut HTTP Functions?</b></li>
    <br/>
    <ul>
        <li>Django provides several <u>shortcut functions</u> that make writing views easier.</li>
        <br/>
        <li>These shortcuts help you:
            <ul>
                <li>render templates</li>
                <li>redirect users</li>
                <li>display 404 errors</li>
                <li>handle permissions</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><code>render()</code> — Return an HTML Template</li>
    <br/>
    <ul>
        <li>Most common shortcut.</li>
        <li>It loads a template, fills it with data, and returns an <code>HttpResponse</code>.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import render

def home(request):
    context = {&quot;title&quot;: &quot;Homepage&quot;}
    return render(request, &quot;blog/home.html&quot;, context)
</code></pre>

    <ul>
        <li>Equivalent long version (you don&#39;t need to write this!):</li>
    </ul>

<pre><code class="language-py line-numbers">from django.template import loader
from django.http import HttpResponse

def home(request):
    template = loader.get_template(&quot;blog/home.html&quot;)
    html = template.render({&quot;title&quot;: &quot;Homepage&quot;}, request)
    return HttpResponse(html)
</code></pre>

    <ul>
        <li>Use <code>render()</code> for any page that returns HTML.</li>
    </ul>
    <br/><br/>


    <li><code>redirect()</code> — Redirect the User to Another URL</li>
    <br/>
    <ul>
        <li>Redirects the browser to a different page.</li>
        <li>You can redirect to:
            <ul>
                <li>a URL path (&quot;/blog/&quot;)</li>
                <li>a view name</li>
                <li>a full external URL</li>
            </ul>
        </li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import redirect

def go_home(request):
    return redirect(&quot;/blog/home/&quot;)
</code></pre>

    <ul>
        <li>Recommended way: redirect by <u>view name</u>.</li>
    </ul>

<pre><code class="language-py line-numbers">def go_home(request):
    return redirect(&quot;home&quot;)   # the URL pattern named &quot;home&quot;
</code></pre>

    <ul>
        <li>This avoids hardcoding URL strings.</li>
    </ul>
    <br/><br/>


    <li><b>get_object_or_404()</b> — Retrieve an Object or Return 404</li>
    <br/>
    <ul>
        <li>This is the best way to fetch a single object from the database.</li>
        <li>If not found → Django automatically shows a 404 page.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import get_object_or_404
from .models import Post

def show_post(request, id):
    post = get_object_or_404(Post, pk=id)
    return render(request, &quot;blog/post.html&quot;, {&quot;post&quot;: post})
</code></pre>

    <ul>
        <li>Without it, you would need:</li>
    </ul>

<pre><code class="language-py line-numbers">try:
    post = Post.objects.get(pk=id)
except Post.DoesNotExist:
    raise Http404()
</code></pre>

    <ul>
        <li>Use <code>get_object_or_404()</code> whenever you expect exactly one object.</li>
    </ul>
    <br/><br/>


    <li><b>4. get_list_or_404()</b> — Get a List or Return 404</li>
    <br/>
    <ul>
        <li>Same as <code>get_object_or_404()</code>, but for lists of objects.</li>
        <li>If the list is empty → 404 error.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import get_list_or_404
from .models import Post

def posts_by_author(request, name):
    posts = get_list_or_404(Post, author=name)
    return render(request, &quot;blog/list.html&quot;, {&quot;posts&quot;: posts})
</code></pre>

    <ul>
        <li>Often used when a &quot;page must show something&quot;.</li>
    </ul>
    <br/><br/>


    <li><b>HttpResponse()</b> — Return Plain Text or Custom Content</li>
    <br/>
    <ul>
        <li>Django&#39;s basic HTTP response object.</li>
        <li>Used when you do not need a template.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import HttpResponse

def hello(request):
    return HttpResponse(&quot;Hello world!&quot;)
</code></pre>

    <ul>
        <li>You can set status codes or headers:</li>
    </ul>

<pre><code class="language-py line-numbers">return HttpResponse(&quot;Not allowed&quot;, status=405)
</code></pre>

    <br/><br/>


    <li><b>HttpResponseRedirect()</b> — Redirect Using a URL</li>
    <br/>
    <ul>
        <li>This is the low-level version of <code>redirect()</code>.</li>
        <li>You rarely need it directly.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import HttpResponseRedirect

def go_somewhere(request):
    return HttpResponseRedirect(&quot;/blog/home/&quot;)
</code></pre>

    <ul>
        <li><code>redirect()</code> is easier, so use that instead.</li>
    </ul>
    <br/><br/>


    <li><b>JsonResponse()</b> — Return JSON Data</b></li>
    <br/>
    <ul>
        <li>Perfect for APIs or AJAX calls.</li>
        <li>Accepts a Python dict or list and converts it to JSON automatically.</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import JsonResponse

def api_data(request):
    return JsonResponse({&quot;name&quot;: &quot;Junzhe&quot;, &quot;age&quot;: 22})
</code></pre>

    <ul>
        <li>Django handles:
            <ul>
                <li>setting <code>Content-Type: application/json</code></li>
                <li>serializing Python dict/list into JSON</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>HttpResponseNotFound(), HttpResponseForbidden(), etc.</b></li>
    <br/>
    <ul>
        <li>Django provides shortcuts for common HTTP errors:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.http import HttpResponseNotFound

def missing(request):
    return HttpResponseNotFound(&quot;This page does not exist&quot;)
</code></pre>

    <ul>
        <li>Other shortcuts:</li>
    </ul>

<ul>
    <li><code>HttpResponseBadRequest</code> (400)</li>
    <li><code>HttpResponseForbidden</code> (403)</li>
    <li><code>HttpResponseNotAllowed</code> (405)</li>
    <li><code>HttpResponseServerError</code> (500)</li>
</ul>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-generic-views">Beginner&#39;s Guide to Django Generic Views</h3>
<ol>

    <li><b>What Are Generic Views?</b></li>
    <br/>
    <ul>
        <li>Django comes with many built-in views called <u>generic views</u>.</li>
        <br/>
        <li>A <u>generic view</u> is a reusable view class that already knows how to do common tasks such as:
            <ul>
                <li>showing a list of database objects</li>
                <li>showing details of a single object</li>
                <li>creating, editing, deleting objects</li>
                <li>rendering templates</li>
            </ul>
        </li>
        <br/>
        <li>This means you don’t have to write the logic yourself. Django handles it for you.</li>
        <br/>
        <li>You only specify:
            <ul>
                <li>which model should be used</li>
                <li>which template to render</li>
            </ul>
        </li>
        <br/>
        <li>Generic views help avoid writing repetitive CRUD code.</li>
    </ul>
    <br/><br/>


    <li><b>The Two Most Common Generic Views</b></li>
    <br/>
    <ul>
        <li>Django’s generic views include many types, but beginners should start with these:</li>
        <ul>
            <li><code>ListView</code>: displays a list of objects</li>
            <li><code>DetailView</code>: displays one object</li>
        </ul>
    </ul>
    <br/><br/>


    <li><b>ListView — Display a List of Objects</b></li>
    <br/>
    <ul>
        <li>Suppose you have a model:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/models.py

from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()

    def __str__(self):
        return self.title
</code></pre>

    <ul>
        <li>You can create a view to list all posts:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.views.generic import ListView
from .models import Post

class PostListView(ListView):
    model = Post
    template_name = &quot;blog/post_list.html&quot;
</code></pre>

    <ul>
        <li>Add a URL pattern:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from django.urls import path
from .views import PostListView

urlpatterns = [
    path(&quot;posts/&quot;, PostListView.as_view(), name=&quot;post-list&quot;),
]
</code></pre>

    <ul>
        <li>Create the template:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/post_list.html --&gt;

&lt;h1&gt;All Posts&lt;/h1&gt;

{% for post in object_list %}
    &lt;h3&gt;{{ post.title }}&lt;/h3&gt;
    &lt;p&gt;{{ post.body|truncatechars:80 }}&lt;/p&gt;
{% endfor %}
</code></pre>

    <ul>
        <li><code>object_list</code> is provided automatically by Django.</li>
    </ul>
    <br/><br/>


    <li><b>DetailView — Show One Object</b></li>
    <br/>
    <ul>
        <li>To show a single post:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/views.py

from django.views.generic import DetailView

class PostDetailView(DetailView):
    model = Post
    template_name = &quot;blog/post_detail.html&quot;
</code></pre>

    <ul>
        <li>Add a URL pattern with a dynamic ID:</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/urls.py

from .views import PostDetailView

urlpatterns += [
    path(&quot;posts/&lt;int:pk&gt;/&quot;, PostDetailView.as_view(), name=&quot;post-detail&quot;),
]
</code></pre>

    <ul>
        <li>Create the template:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/post_detail.html --&gt;

&lt;h1&gt;{{ object.title }}&lt;/h1&gt;
&lt;p&gt;{{ object.body }}&lt;/p&gt;
</code></pre>

    <ul>
        <li><b>object</b> is automatically passed into the template (the Post instance).</li>
    </ul>
    <br/><br/>


    <li><b>Understanding `pk` in the URL</b></li>
    <br/>
    <ul>
        <li><code>DetailView</code> automatically looks for a parameter called <code>pk</code>.</li>
        <li>So the URL must use <code>&lt;int:pk&gt;</code> unless you customize it.</li>
        <li>This <code>pk</code> is used to fetch a single object from the database.</li>
    </ul>
    <br/><br/>


    <li><b>Other Useful Generic Views (Beginner Overview)</b></li>
    <br/>
    <ul>
        <li>Generic views for creating, editing, and deleting objects:</li>
<ul>
    <li><code>CreateView</code>: create a new object</li>
    <li><code>UpdateView</code>: edit an existing object</li>
    <li><code>DeleteView</code>: delete an object</li>
    <li><code>FormView</code>: display and process forms</li>
</ul>
    </ul>

    <br/>

    <ul>
        <li>For example, a simple <code>CreateView</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.views.generic import CreateView
from .models import Post

class PostCreateView(CreateView):
    model = Post
    fields = [&quot;title&quot;, &quot;body&quot;]
    template_name = &quot;blog/post_form.html&quot;
    success_url = &quot;/blog/posts/&quot;
</code></pre>

    <ul>
        <li>This automatically:
            <ul>
                <li>generates a form</li>
                <li>saves the data</li>
                <li>redirects after success</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>How Generic Views Know What to Do</b></li>
    <br/>
    <ul>
        <li>You must provide at least two things:
            <ul>
                <li><code>model</code> → which database model to use</li>
                <li><code>template_name</code> → which HTML file to load</li>
            </ul>
        </li>
        <br/>
        <li>Optional:
            <ul>
                <li><code>context variables</code></li>
                <li><code>ordering</code></li>
                <li><code>fields</code> (for CreateView/UpdateView)</li>
                <li><code>success_url</code></li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Customizing Context Data</b></li>
    <br/>
    <ul>
        <li>You can add your own variables by overriding <code>get_context_data()</code>.</li>
    </ul>

<pre><code class="language-py line-numbers">class PostListView(ListView):
    model = Post
    template_name = &quot;blog/post_list.html&quot;

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context[&quot;extra&quot;] = &quot;Hello from context!&quot;
        return context
</code></pre>

    <ul>
        <li>Then in the template:</li>
    </ul>

<pre><code class="language-html line-numbers">{{ extra }}</code></pre>

    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-middleware">Beginner&#39;s Guide to Django Middleware</h3>
<ol>

    <li><b>What Is Middleware?</b></li>
    <br/>
    <ul>
        <li>Middleware in Django is like a series of filters that every request and response passes through.</li>
        <br/>
        <li>Every time a user opens a page:
            <ul>
                <li>the request enters Django</li>
                <li>it travels through the middleware chain</li>
                <li>reaches your view</li>
                <li>the response travels back through middleware</li>
                <li>finally reaches the user</li>
            </ul>
        </li>
        <br/>
        <li>Django comes with many built-in middleware, but you can also write your own.</li>
    </ul>
    <br/><br/>


    <li><b>Where Is Middleware Defined?</b></li>
    <br/>
    <ul>
        <li>In your project settings file:</li>
    </ul>

<pre><code class="language-py line-numbers"># mysite/settings.py

MIDDLEWARE = [
    &quot;django.middleware.security.SecurityMiddleware&quot;,
    &quot;django.contrib.sessions.middleware.SessionMiddleware&quot;,
    &quot;django.middleware.common.CommonMiddleware&quot;,
    &quot;django.middleware.csrf.CsrfViewMiddleware&quot;,
    &quot;django.contrib.auth.middleware.AuthenticationMiddleware&quot;,
    &quot;django.contrib.messages.middleware.MessageMiddleware&quot;,
    &quot;django.middleware.clickjacking.XFrameOptionsMiddleware&quot;,
]
</code></pre>

    <ul>
        <li>The order matters — each middleware wraps the next.</li>
    </ul>
    <br/><br/>


    <li><b>How Middleware Works (Simple Explanation)</b></li>
    <br/>
    <ul>
        <li>Example chain:</li>
    </ul>

<pre><code class="language-bash line-numbers">Request → Middleware 1 → Middleware 2 → ... → View
Response ← Middleware 1 ← Middleware 2 ← ... ← View
</code></pre>

    <ul>
        <li>Each middleware can:
            <ul>
                <li>modify the request</li>
                <li>block the request</li>
                <li>run code before the view</li>
                <li>run code after the view</li>
                <li>modify the response</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Django’s Most Important Built-In Middleware (Beginner-Friendly)</b></li>
    <br/>

    <ul>
        <li><b>SecurityMiddleware</b></li>
        <ul>
            <li>Adds security headers (HTTPS, HSTS, etc.).</li>
        </ul>
        <br/>

        <li><b>SessionMiddleware</b></li>
        <ul>
            <li>Enables sessions (used for login, carts, preferences).</li>
        </ul>
        <br/>

        <li><b>CommonMiddleware</b></li>
        <ul>
            <li>URL rewriting, simple debugging features.</li>
        </ul>
        <br/>

        <li><b>CsrfViewMiddleware</b></li>
        <ul>
            <li>Protects from CSRF attacks in forms.</li>
        </ul>
        <br/>

        <li><b>AuthenticationMiddleware</b></li>
        <ul>
            <li>Adds <code>request.user</code> so you know who is logged in.</li>
        </ul>
        <br/>

        <li><b>MessageMiddleware</b></li>
        <ul>
            <li>Enables temporary messages like “Post created successfully!”.</li>
        </ul>
        <br/>

        <li><b>Clickjacking Protection Middleware</b></li>
        <ul>
            <li>Adds <code>X-Frame-Options</code> header to prevent framing attacks.</li>
        </ul>
    </ul>

    <br/><br/>


    <li><b>Writing Your First Custom Middleware</b></li>
    <br/>
    <ul>
        <li>Here is a super simple middleware example that prints a message every time a request arrives.</li>
    </ul>

<pre><code class="language-py line-numbers"># blog/middleware.py

class SimpleLogMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        print(&quot;A request just arrived!&quot;)

        response = self.get_response(request)

        print(&quot;A response is leaving!&quot;)
        return response
</code></pre>

    <ul>
        <li>Now activate it in <code>settings.py</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">MIDDLEWARE += [
    &quot;blog.middleware.SimpleLogMiddleware&quot;,
]
</code></pre>

    <ul>
        <li>Every page refresh will now print messages in your console.</li>
    </ul>
    <br/><br/>


    <li><b>Middleware That Runs Before the View</b></li>
    <br/>
    <ul>
        <li>You can add custom processing before the view runs by writing <code>process_view()</code>.</li>
    </ul>

<pre><code class="language-py line-numbers">class CheckAdminMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        return self.get_response(request)

    def process_view(self, request, view_func, view_args, view_kwargs):
        print(f&quot;About to call: {view_func.__name__}&quot;)
</code></pre>

    <ul>
        <li>Django calls <code>process_view()</code> right before running the actual view.</li>
    </ul>
    <br/><br/>


    <li><b>Middleware That Runs After the View</b></li>
    <br/>
    <ul>
        <li>Anything you want to modify in the response goes here.</li>
    </ul>

<pre><code class="language-py line-numbers">class AddHeaderMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        response = self.get_response(request)
        response[&quot;X-My-Header&quot;] = &quot;Hello&quot;
        return response
</code></pre>

    <ul>
        <li>This example adds a custom header to every response.</li>
    </ul>
    <br/><br/>


    <li><b>Key Rules to Remember</b></li>
    <br/>
    <ul>
        <li><u>Order matters</u>: middleware runs from top to bottom for requests.</li>
        <li><u>Reverse order</u> for responses.</li>
        <li>Middleware must be a <b>class</b> with:
            <ul>
                <li><code>__init__()</code></li>
                <li><code>__call__()</code></li>
            </ul>
        </li>
        <li>You can optionally add:
            <ul>
                <li><code>process_view()</code></li>
                <li><code>process_exception()</code></li>
                <li><code>process_template_response()</code></li>
            </ul>
        </li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-sessions">Beginner&#39;s Guide to Using Sessions in Django</h3>
<ol>

    <li><b>What Are Sessions in Django?</b></li>
    <br/>
    <ul>
        <li>A <u>session</u> lets Django remember information about a specific user across multiple requests.</li>
        <br/>
        <li>This is useful because HTTP is <u>stateless</u> — normally, each request forgets everything about previous ones.</li>
        <br/>
        <li>With sessions, Django can store data such as:
            <ul>
                <li>whether a user is logged in</li>
                <li>shopping cart items</li>
                <li>user preferences</li>
                <li>a page visit counter</li>
            </ul>
        </li>
        <br/>
        <li>Sessions store data on the server, while the browser holds only a <u>session ID cookie</u>.</li>
    </ul>
    <br/><br/>


    <li><b>How Sessions Work (Beginner Explanation)</b></li>
    <br/>
    <ul>
        <li>Step 1: Django creates a session ID (e.g., &quot;xyz123&quot;).</li>
        <li>Step 2: Browser stores it in a cookie named <code>sessionid</code>.</li>
        <li>Step 3: Django stores session data in the database by default.</li>
        <li>Step 4: On every request, Django matches the cookie to the stored data.</li>
    </ul>

    <br/>
    <ul>
        <li>Django always makes sessions available through:</li>
    </ul>

<pre><code class="language-py line-numbers">request.session
</code></pre>

    <br/><br/>


    <li><b>Check That Sessions Are Enabled</b></li>
    <br/>
    <ul>
        <li>Two things must be present in your <code>settings.py</code>:</li>
        <br/>

        <li><b>1. SessionMiddleware</b>:</li>
<pre><code class="language-py line-numbers">MIDDLEWARE = [
    &quot;django.contrib.sessions.middleware.SessionMiddleware&quot;,
    ...
]
</code></pre>

        <li><b>2. sessions app</b>:</li>
<pre><code class="language-py line-numbers">INSTALLED_APPS = [
    &quot;django.contrib.sessions&quot;,
    ...
]
</code></pre>

    </ul>
    <br/><br/>


    <li><b>Storing Data in a Session</b></li>
    <br/>
    <ul>
        <li>Store data like using a Python dictionary:</li>
    </ul>

<pre><code class="language-py line-numbers">def set_session(request):
    request.session[&quot;username&quot;] = &quot;Junzhe&quot;
    request.session[&quot;role&quot;] = &quot;admin&quot;
    return HttpResponse(&quot;Session data saved!&quot;)
</code></pre>

    <ul>
        <li>Django automatically saves the session after modifying it.</li>
    </ul>
    <br/><br/>


    <li><b>Retrieving Data from a Session</b></li>

<pre><code class="language-py line-numbers">def get_session(request):
    username = request.session.get(&quot;username&quot;, &quot;Guest&quot;)
    return HttpResponse(f&quot;Hello {username}!&quot;)
</code></pre>

    <ul>
        <li><code>get()</code> avoids errors if the key does not exist.</li>
    </ul>
    <br/><br/>


    <li><b>Checking If a Session Key Exists</b></li>

<pre><code class="language-py line-numbers">if &quot;username&quot; in request.session:
    ...
</code></pre>

    <br/><br/>


    <li><b>Deleting a Single Session Key</b></li>

<pre><code class="language-py line-numbers">def delete_key(request):
    if &quot;username&quot; in request.session:
        del request.session[&quot;username&quot;]
    return HttpResponse(&quot;Username deleted.&quot;)
</code></pre>

    <br/><br/>


    <li><b>Clearing the Entire Session</b></li>
    <br/>
    <ul>
        <li>This removes all data for this user:</li>
    </ul>

<pre><code class="language-py line-numbers">request.session.flush()
</code></pre>

    <ul>
        <li>Useful for logout.</li>
        <li>It also creates a new empty session ID.</li>
    </ul>
    <br/><br/>


    <li><b>Setting Session Expiration</b></li>
    <br/>
    <ul>
        <li>Sessions expire when the browser closes by default.</li>
    </ul>

    <ul>
        <li>You can set a custom timeout in seconds:</li>
    </ul>

<pre><code class="language-py line-numbers">request.session.set_expiry(60 * 60)  # 1 hour
</code></pre>

    <ul>
        <li>Or make the session never expire:</li>
    </ul>

<pre><code class="language-py line-numbers">request.session.set_expiry(None)
</code></pre>

    <ul>
        <li>Or expire immediately on browser close:</li>
    </ul>

<pre><code class="language-py line-numbers">request.session.set_expiry(0)
</code></pre>

    <br/><br/>


    <li><b>Where Does Django Store Session Data?</b></li>
    <br/>
    <ul>
        <li>By default, Django stores sessions in the database table:</li>
    </ul>

<pre><code class="language-bash line-numbers">django_session
</code></pre>

    <ul>
        <li>But Django also supports storing sessions in:</li>
        <ul>
            <li>cache</li>
            <li>file system</li>
            <li>signed cookies (session data stored in browser)</li>
        </ul>
    </ul>

    <br/><br/>


    <li><b>Example: Simple Page Visit Counter</b></li>
    <br/>
    <ul>
        <li>A classic beginner example:</li>
    </ul>

<pre><code class="language-py line-numbers">def counter(request):
    count = request.session.get(&quot;count&quot;, 0)
    request.session[&quot;count&quot;] = count + 1
    return HttpResponse(f&quot;You have visited this page {count} times.&quot;)
</code></pre>

    <ul>
        <li>This shows how sessions persist data across page reloads.</li>
    </ul>
    <br/><br/>


    <li><b>How Sessions Relate to Authentication</b></li>
    <br/>
    <ul>
        <li>Django&#39;s login system uses sessions:</li>
        <ul>
            <li>When a user logs in → Django stores their user ID inside the session.</li>
            <li>This gives you <code>request.user</code> for every request.</li>
        </ul>
        <br/>
        <li>So sessions are the foundation of Django&#39;s authentication system.</li>
    </ul>
    <br/><br/>


    <li><b>Quick Checklist for Beginners</b></li>
    <br/>
    <ul>
        <li>Use <code>request.session[&quot;key&quot;] = value</code> to store data.</li>
        <li>Use <code>request.session.get(&quot;key&quot;)</code> to read data safely.</li>
        <li>Use <code>del request.session[&quot;key&quot;]</code> to delete.</li>
        <li>Use <code>request.session.flush()</code> to clear all data (logout).</li>
        <li>Make sure SessionMiddleware is enabled.</li>
    </ul>
    <br/><br/>


    <li><b>Summary</b></li>
    <br/>
    <ul>
        <li>Django sessions let you store user-specific data between requests.</li>
        <li>The data lives on the server, and the browser only stores a session ID.</li>
        <li>You can add, read, delete, or clear session data easily via <code>request.session</code>.</li>
        <li>Sessions power features like login systems, shopping carts, and preferences.</li>
        <li>They are a fundamental concept for almost any web application.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-template">Django Template Language</h3>
<ol>

    <li><b>What Is a Django Template?</b></li>
    <br/>
    <ul>
        <li>A <u>template</u> in Django is an HTML file with special placeholders and tags that Django fills with data.</li>
        <br/>
        <li>You can think of it like:
            <ul>
                <li>Normal HTML
                + places to insert dynamic values (e.g. user name, list of posts)
                + simple logic (if/for loops)</li>
            </ul>
        </li>
        <br/>
        <li>Views prepare data (Python objects) and pass it to templates. Templates then render the final HTML for the browser.</li>
        <br/>
        <li>Django templates are:
            <ul>
                <li>designed for <u>presentation</u>, not for heavy business logic</li>
                <li>safe by default (auto-escaping)</li>
                <li>extensible with custom tags and filters</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Where Templates Live in Your Project</b></li>
    <br/>
    <ul>
        <li>Typical project layout:</li>
    </ul>

<pre><code class="language-bash line-numbers">mysite/
├── manage.py
├── mysite/
│   ├── settings.py
│   └── urls.py
└── blog/
    ├── views.py
    ├── models.py
    └── templates/
        └── blog/
            └── home.html
</code></pre>

    <ul>
        <li>Common convention:
            <ul>
                <li>Each app has its own <code>templates/&lt;app_name&gt;/</code> folder.</li>
                <li>For app <code>blog</code>, template paths look like <code>blog/home.html</code>, <code>blog/post_detail.html</code>, etc.</li>
            </ul>
        </li>
        <br/>
        <li>Django finds these app templates because in <code>settings.py</code> we normally have:</li>
    </ul>

<pre><code class="language-py line-numbers">TEMPLATES = [
    {
        &quot;BACKEND&quot;: &quot;django.template.backends.django.DjangoTemplates&quot;,
        &quot;DIRS&quot;: [],          # extra global template folders (optional)
        &quot;APP_DIRS&quot;: True,    # &lt;-- search in app/templates/
        &quot;OPTIONS&quot;: {
            &quot;context_processors&quot;: [
                # default processors...
            ],
        },
    },
]
</code></pre>

    <ul>
        <li><code>APP_DIRS = True</code> tells Django to look inside each app&#39;s <code>templates/</code> folder.</li>
    </ul>
    <br/><br/>


    <li><b>Rendering a Template from a View</b></li>
    <br/>
    <ul>
        <li>Basic usage in a view:</li>
    </ul>

<pre><code class="language-py line-numbers">from django.shortcuts import render

def home(request):
    context = {
        &quot;name&quot;: &quot;Junzhe&quot;,
        &quot;age&quot;: 22,
    }
    return render(request, &quot;blog/home.html&quot;, context)
</code></pre>

    <ul>
        <li>Template <code>blog/home.html</code> might look like:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/home.html --&gt;
&lt;h1&gt;Hello {{ name }}!&lt;/h1&gt;
&lt;p&gt;You are {{ age }} years old.&lt;/p&gt;
</code></pre>

    <ul>
        <li><code>context</code> is just a Python dict.</li>
        <li>Keys in the dict become variables in the template.</li>
    </ul>
    <br/><br/>


    <li><b>Template Variables: {{ ... }}</b></li>
    <br/>
    <ul>
        <li>To show dynamic values, use double curly braces: <code>{{ variable_name }}</code></li>
        <li>Examples:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;p&gt;User: {{ username }}&lt;/p&gt;
&lt;p&gt;Today is {{ current_date }}&lt;/p&gt;
</code></pre>

    <ul>
        <li>You can access attributes and dictionary keys using dots:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;p&gt;Title: {{ post.title }}&lt;/p&gt;
&lt;p&gt;Author: {{ post.author.username }}&lt;/p&gt;
&lt;p&gt;First tag: {{ post.tags.0 }}&lt;/p&gt;
</code></pre>

    <ul>
        <li>If a variable does not exist, Django shows an empty string by default.</li>
    </ul>
    <br/><br/>


    <li><b>Template Filters: {{ variable|filter }}</b></li>
    <br/>
    <ul>
        <li>Filters transform the value of a variable.</li>
        <li>Syntax: <code>{{ value|filter_name:argument }}</code> (argument is optional).</li>
        <li>Common filters:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;p&gt;Original: {{ username }}&lt;/p&gt;
&lt;p&gt;Uppercase: {{ username|upper }}&lt;/p&gt;
&lt;p&gt;Lowercase: {{ username|lower }}&lt;/p&gt;
&lt;p&gt;Length: {{ username|length }}&lt;/p&gt;
&lt;p&gt;Default if empty: {{ nickname|default:&quot;No nickname&quot; }}&lt;/p&gt;
</code></pre>

    <ul>
        <li>Some other useful filters:</li>
    </ul>

    <ul>
        <li><code>truncatechars:50</code> &rarr; cut a string after 50 characters</li>
        <li><code>date:&quot;Y-m-d&quot;</code> &rarr; format a date</li>
        <li><code>safe</code> &rarr; mark string as safe HTML (disables auto-escaping for that value)</li>
        <li><code>escape</code> &rarr; escape HTML characters</li>
        <li><code>join:&quot;, &quot;</code> &rarr; join list elements</li>
    </ul>

    <br/><br/>


    <li><b>Template Tags: {% ... %}</b></li>
    <br/>
    <ul>
        <li>Tags do actions: conditions, loops, template inheritance, etc.</li>
        <li>Syntax: <code>{% tag_name ... %}</code></li>
        <li>We&#39;ll look at the most important ones.</li>
    </ul>
    <br/><br/>


    <li><b>The {% if %} Tag (Conditions)</b></li>
    <br/>
    <ul>
        <li>Basic <code>if</code>:</li>
    </ul>

<pre><code class="language-html line-numbers">{% if user_is_logged_in %}
    &lt;p&gt;Welcome back!&lt;/p&gt;
{% endif %}
</code></pre>

    <ul>
        <li><code>if / else</code>:</li>
    </ul>

<pre><code class="language-html line-numbers">{% if user.is_authenticated %}
    &lt;p&gt;Hello {{ user.username }}!&lt;/p&gt;
{% else %}
    &lt;p&gt;You are not logged in.&lt;/p&gt;
{% endif %}
</code></pre>

    <ul>
        <li><code>if / elif / else</code>:</li>
    </ul>

<pre><code class="language-html line-numbers">{% if score &gt;= 90 %}
    &lt;p&gt;Grade: A&lt;/p&gt;
{% elif score &gt;= 80 %}
    &lt;p&gt;Grade: B&lt;/p&gt;
{% else %}
    &lt;p&gt;Keep trying!&lt;/p&gt;
{% endif %}
</code></pre>

    <ul>
        <li>Template conditions are simple; they are not full Python expressions.</li>
    </ul>
    <br/><br/>


    <li><b>The {% for %} Tag (Loops)</b></li>
    <br/>
    <ul>
        <li>Used to loop over lists or querysets.</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;ul&gt;
{% for post in posts %}
    &lt;li&gt;{{ post.title }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</code></pre>

    <ul>
        <li>You can use <code>forloop</code> variables inside the loop:</li>
    </ul>

<pre><code class="language-html line-numbers">{% for item in items %}
    &lt;p&gt;{{ forloop.counter }}. {{ item }}&lt;/p&gt;
{% endfor %}
</code></pre>

    <ul>
        <li>Useful attributes:
            <ul>
                <li><code>forloop.counter</code> &rarr; 1-based index</li>
                <li><code>forloop.counter0</code> &rarr; 0-based index</li>
                <li><code>forloop.first</code> &rarr; True on first iteration</li>
                <li><code>forloop.last</code> &rarr; True on last iteration</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>{% url %} Tag (Reverse URL Resolution)</b></li>
    <br/>
    <ul>
        <li>Instead of hardcoding URLs like <code>/blog/hello/</code>, you use URL names.</li>
        <li>Example URL pattern:</li>
    </ul>

<pre><code class="language-py line-numbers">path(&quot;hello/&quot;, views.hello, name=&quot;hello&quot;)
</code></pre>

    <ul>
        <li>In template:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;a href=&quot;{% url 'hello' %}&quot;&gt;Say Hello&lt;/a&gt;
</code></pre>

    <ul>
        <li>With parameters:</li>
    </ul>

<pre><code class="language-py line-numbers">path(&quot;post/&lt;int:pk&gt;/&quot;, views.post_detail, name=&quot;post-detail&quot;)
</code></pre>

<pre><code class="language-html line-numbers">&lt;a href=&quot;{% url 'post-detail' pk=post.id %}&quot;&gt;Read more&lt;/a&gt;
</code></pre>

    <ul>
        <li>This keeps your templates independent of hardcoded URL paths.</li>
    </ul>
    <br/><br/>


    <li><b>Template Comments: {# ... #}</b></li>
    <br/>
    <ul>
        <li>Use comments to leave notes that will not appear in output HTML:</li>
    </ul>

<pre><code class="language-html line-numbers">{# This is a Django template comment #}
&lt;p&gt;Visible to user&lt;/p&gt;
</code></pre>

    <br/><br/>


    <li><b>Template Inheritance: {% extends %} and {% block %}</b></li>
    <br/>
    <ul>
        <li>Template inheritance lets you define a <b>base layout</b> (header, footer, nav) and reuse it on many pages.</li>
        <li>Step 1: create a base template, e.g. <code>base.html</code>:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/base.html --&gt;
&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;My Site - {% block title %}Default Title{% endblock %}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;header&gt;
        &lt;h1&gt;My Blog&lt;/h1&gt;
    &lt;/header&gt;

    &lt;main&gt;
        {% block content %}{% endblock %}
    &lt;/main&gt;

    &lt;footer&gt;
        &lt;p&gt;Copyright 2025&lt;/p&gt;
    &lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

    <ul>
        <li>Step 2: child template that extends it:</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/home.html --&gt;
{% extends &quot;blog/base.html&quot; %}

{% block title %}Home{% endblock %}

{% block content %}
    &lt;h2&gt;Welcome!&lt;/h2&gt;
    &lt;p&gt;This is the home page.&lt;/p&gt;
{% endblock %}
</code></pre>

    <ul>
        <li>Key rules:
            <ul>
                <li><code>{% extends %}</code> must be the first tag in the template (except comments).</li>
                <li>Child templates can override blocks defined in the base.</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>{% include %} for Reusing Small Pieces</b></li>
    <br/>
    <ul>
        <li>Use <code>{% include %}</code> for small reusable fragments like navigation bars or forms.</li>
    </ul>

<pre><code class="language-html line-numbers">&lt;!-- blog/templates/blog/nav.html --&gt;
&lt;nav&gt;
    &lt;a href=&quot;{% url 'home' %}&quot;&gt;Home&lt;/a&gt;
    &lt;a href=&quot;{% url 'post-list' %}&quot;&gt;Posts&lt;/a&gt;
&lt;/nav&gt;
</code></pre>

<pre><code class="language-html line-numbers">&lt;!-- in base.html --&gt;
&lt;body&gt;
    {% include &quot;blog/nav.html&quot; %}
    &lt;main&gt;
        {% block content %}{% endblock %}
    &lt;/main&gt;
&lt;/body&gt;
</code></pre>

    <ul>
        <li>Included templates receive the same context by default.</li>
    </ul>
    <br/><br/>


    <li><b>Static Files in Templates: {% load static %}</b></li>
    <br/>
    <ul>
        <li>To include CSS, JS, or images managed by Django’s staticfiles system:</li>
    </ul>

<pre><code class="language-html line-numbers">{% load static %}

&lt;link rel=&quot;stylesheet&quot; href=&quot;{% static 'css/style.css' %}&quot; /&gt;
&lt;img src=&quot;{% static 'images/logo.png' %}&quot; alt=&quot;Logo&quot; /&gt;
</code></pre>

    <ul>
        <li><code>{% load static %}</code> imports the <code>static</code> template tag library.</li>
    </ul>
    <br/><br/>


    <li><b>Auto-Escaping and Safety</b></li>
    <br/>
    <ul>
        <li>By default, Django escapes HTML in variables to prevent XSS attacks.</li>
    </ul>

<pre><code class="language-html line-numbers">{{ user_input }}
</code></pre>

    <ul>
        <li>If <code>user_input</code> is <code>&quot;&lt;script&gt;alert('xss')&lt;/script&gt;&quot;</code>, Django will output:</li>
    </ul>

<pre><code class="language-html line-numbers">&amp;lt;script&amp;gt;alert(&#39;xss&#39;)&amp;lt;/script&amp;gt;
</code></pre>

    <ul>
        <li>This way, the browser shows it as text instead of executing it as JavaScript.</li>
        <br/>
        <li>If you really want to output HTML safely (for trusted content only!), you can use the <code>safe</code> filter:</li>
    </ul>

<pre><code class="language-html line-numbers">{{ html_content|safe }}
</code></pre>

    <ul>
        <li>Never apply <code>safe</code> to untrusted user input.</li>
    </ul>
    <br/><br/>


    <li><b>Context: What Data Is Available in Templates?</b></li>
    <br/>
    <ul>
        <li>Everything you pass from the view via <code>context</code>:</li>
    </ul>

<pre><code class="language-py line-numbers">return render(request, &quot;blog/home.html&quot;, {&quot;name&quot;: &quot;Junzhe&quot;})
</code></pre>

    <ul>
        <li>Plus variables added by <b>context processors</b> (depending on your settings), for example:</li>
    </ul>

    <ul>
        <li><code>request</code> &rarr; the request object</li>
        <li><code>user</code> &rarr; current logged-in user</li>
        <li><code>messages</code> &rarr; message framework</li>
    </ul>

    <ul>
        <li>Example:</li>
    </ul>

<pre><code class="language-html line-numbers">{% if user.is_authenticated %}
    &lt;p&gt;Logged in as {{ user.username }}&lt;/p&gt;
{% else %}
    &lt;p&gt;Not logged in&lt;/p&gt;
{% endif %}
</code></pre>

    <br/><br/>


    <li><b>Template Language Limitations (On Purpose)</b></li>
    <br/>
    <ul>
        <li>Django templates are deliberately simple. Things you <u>cannot</u> do in templates:</li>
        <ul>
            <li>arbitrary Python code</li>
            <li>complex calculations</li>
            <li>access private attributes or call dangerous methods</li>
        </ul>
        <br/>
        <li>Rule of thumb:
            <ul>
                <li>views handle business logic</li>
                <li>templates handle display and simple conditions/loops</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Custom Template Filters and Tags (Very Brief Intro)</b></li>
    <br/>
    <ul>
        <li>Sometimes built-in filters are not enough. You can create your own.</li>
        <li>Create a file <code>templatetags/blog_extras.py</code> inside your app:</li>
    </ul>

<pre><code class="language-bash line-numbers">blog/
├── templatetags/
│   ├── __init__.py
│   └── blog_extras.py
</code></pre>

<pre><code class="language-py line-numbers"># blog/templatetags/blog_extras.py

from django import template

register = template.Library()

@register.filter
def shout(value):
    return str(value).upper() + &quot;!!!&quot;
</code></pre>

    <ul>
        <li>In your template:</li>
    </ul>

<pre><code class="language-html line-numbers">{% load blog_extras %}

&lt;p&gt;{{ &quot;hello&quot;|shout }}&lt;/p&gt;  {# outputs HELLO!!! #}
</code></pre>

    <ul>
        <li>This is an advanced topic, but good to know that it exists.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-url-mapping">Django URL Mapping</h3>
<ol>

    <li>What Is URL Mapping in Django?</li>
    <br/>
    <ul>
        <li><b>URL Mapping</b> (also called URL routing) is the mechanism Django uses to connect incoming browser requests to the correct view function.</li>
        <br/>
        <li>Django uses a dedicated file named <code>urls.py</code> that defines how each URL pattern is processed.</li>
        <br/>
        <li>URL mappings allow developers to create clean, predictable, and SEO-friendly page addresses, such as:
            <ul>
                <li><code>/blog/</code></li>
                <li><code>/users/login/</code></li>
                <li><code>/products/42/</code></li>
            </ul>
        </li>
        <br/>
        <li>Django uses the concept of:
            <ul>
                <li><code>project URLs</code> → global URL entry point</li>
                <li><code>app URLs</code> → routing per functional module</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>The URL Dispatcher</li>
    <br/>
    <ul>
        <li>Django's URL dispatcher matches patterns using the <code>path()</code> and <code>re_path()</code> functions.</li>
<pre><code class="language-python line-numbers">from django.urls import path

urlpatterns = [
    path('home/', views.home),
]
</code></pre>

        <li>When a client requests <code>/home/</code>, Django calls <code>views.home</code>.</li>
    </ul>
    <br/><br/>


    <li>Project-Level <code>urls.py</code></li>
    <br/>
    <ul>
        <li>This file is created automatically when you create a Django project.</li>
        <br/>
        <li>Location:</li>
<pre><code class="language-plaintext line-numbers">myproject/
    myproject/
        urls.py   &lt;--- main entry
</code></pre>

        <li>Example:</li>
<pre><code class="language-python line-numbers">from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('blog/', include('blog.urls')),   # include app router
]
</code></pre>

        <br/>
        <li><code>include()</code> allows you to delegate URL handling to apps.</li>
    </ul>
    <br/><br/>


    <li>App-Level <code>urls.py</code></li>
    <br/>
    <ul>
        <li>Each app can have its own routing file.</li>
        <br/>
        <li>Location:</li>
<pre><code class="language-plaintext line-numbers">blog/
    urls.py
    views.py
</code></pre>

        <li>Example:</li>
<pre><code class="language-python line-numbers">from django.urls import path
from . import views

urlpatterns = [
    path('', views.index),
    path('post/&lt;int:id&gt;/', views.post_detail),
]
</code></pre>
    </ul>
    <br/><br/>


    <li>Understanding <code>path()</code> Parameters</li>
    <br/>
    <ul>
        <li>The <code>path()</code> function has the following signature:</li>
<pre><code class="language-python line-numbers">path(route, view, name=None)
</code></pre>

        <li>Parameter meanings:</li>
        <ul>
            <li><code>route</code> → URL pattern (string)</li>
            <li><code>view</code> → function/class to process the request</li>
            <li><code>name</code> → optional name used for reverse URL lookup</li>
        </ul>

        <br/>
        <li>Example:</li>
<pre><code class="language-python line-numbers">path('about/', views.about, name='about-page')
</code></pre>
    </ul>
    <br/><br/>


    <li>Using URL Parameters</li>
    <br/>
    <ul>
        <li>Django supports type-constrained parameters:</li>

<pre><code class="language-python line-numbers">path('user/&lt;int:id&gt;/', views.user_detail)
path('product/&lt;slug:slug&gt;/', views.product_detail)
path('files/&lt;path:filepath&gt;/', views.files)
</code></pre>

        <li>Supported converters:</li>
        <ul>
            <li><code>str</code></li>
            <li><code>int</code></li>
            <li><code>slug</code></li>
            <li><code>uuid</code></li>
            <li><code>path</code></li>
        </ul>
    </ul>
    <br/><br/>


    <li>Using <code>re_path()</code> for Regular Expressions</li>
    <br/>
    <ul>
        <li>Advanced URL matching with regex:</li>
<pre><code class="language-python line-numbers">from django.urls import re_path

urlpatterns = [
    re_path(r'^articles/(?P&lt;year&gt;\d{4})/$', views.articles_by_year)
]
</code></pre>
        <li>If your route requires patterns like:
            <ul>
                <li>dates</li>
                <li>custom formats</li>
                <li>optional sections</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>URL Names and Reverse Lookups</li>
    <br/>
    <ul>
        <li>Named routes help avoid hardcoding URLs in templates.</li>

<pre><code class="language-python line-numbers">path('login/', views.login, name='user-login')
</code></pre>

        <li>In templates:</li>
<pre><code class="language-django line-numbers">&lt;a href="{% url 'user-login' %}"&gt;Login&lt;/a&gt;
</code></pre>

        <li>In Python code:</li>
<pre><code class="language-python line-numbers">from django.urls import reverse

login_url = reverse('user-login')
</code></pre>
    </ul>
    <br/><br/>


    <li>Organizing URL Files (Recommended Structure)</li>
    <br/>
    <ul>
        <li>A good, scalable project structure:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">myproject/
    myproject/
        urls.py            &lt;-- main router
    blog/
        urls.py            &lt;-- app router
    accounts/
        urls.py
    shop/
        urls.py
</code></pre>
    <br/><br/>


    <li>Including URLs Under a Common Prefix</li>
<pre><code class="language-python line-numbers">urlpatterns = [
    path('api/', include('api.urls')),
    path('auth/', include('accounts.urls')),
]
</code></pre>
    <ul>
        <li>The prefix is automatically prepended to all routes inside the included module.</li>
    </ul>
    <br/><br/>


    <li>Handling 404 and Error URLs</li>
<pre><code class="language-python line-numbers">
handler404 = 'myproject.views.page_not_found'
handler500 = 'myproject.views.server_error'
</code></pre>
    <ul>
        <li>These run when Django cannot match a URL pattern.</li>
    </ul>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-shell">Django Shell</h3>
<ol>

    <li>What Is the Django Shell?</li>
    <br/>
    <ul>
        <li>The <b>Django shell</b> is an interactive Python environment preloaded with Django settings, ORM, and project modules.</li>
        <br/>
        <li>It allows you to:
            <ul>
                <li>interact with your database (via ORM)</li>
                <li>test functions and business logic</li>
                <li>import and manipulate Django models</li>
                <li>quickly debug issues</li>
            </ul>
        </li>
        <br/>
        <li>It is more powerful than the normal Python shell because it loads the entire Django environment.</li>
    </ul>
    <br/><br/>


    <li>Starting the Django Shell</li>
    <br/>
    <ul>
        <li>Use the built-in management command:</li>
<pre><code class="language-bash line-numbers">python3 manage.py shell</code></pre>
        <li>This opens a standard Python REPL with Django loaded.</li>
    </ul>
    <br/><br/>


    <li>Using the Enhanced Django Shell (<code>shell_plus</code>)</li>
    <br/>
    <ul>
        <li><code>shell_plus</code> from <b>django-extensions</b> automatically imports all your models.</li>
        <br/>
        <li>Install:</li>
<pre><code class="language-bash line-numbers">pip install django-extensions</code></pre>
        <br/>
        <li>Add to <code>INSTALLED_APPS</code>:</li>
<pre><code class="language-python line-numbers">INSTALLED_APPS = [
    ...
    "django_extensions",
]</code></pre>
        <br/>
        <li>Start enhanced shell:</li>
<pre><code class="language-bash line-numbers">python3 manage.py shell_plus</code></pre>
        <br/>
        <li>Automatically imports:
            <ul>
                <li>all models</li>
                <li>settings</li>
                <li>common utilities</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Running Basic ORM Commands</li>
    <br/>
    <ul>
        <li>You can directly query the database using Django ORM.</li>
        <br/>

        <li>Query all objects:</li>
<pre><code class="language-python line-numbers">from blog.models import Post
Post.objects.all()</code></pre>

        <br/>
        <li>Create a record:</li>
<pre><code class="language-python line-numbers">Post.objects.create(title="Hello", content="My first post!")</code></pre>

        <br/>
        <li>Filter records:</li>
<pre><code class="language-python line-numbers">Post.objects.filter(title__icontains="hello")</code></pre>

        <br/>
        <li>Update an object:</li>
<pre><code class="language-python line-numbers">post = Post.objects.first()
post.title = "Updated"
post.save()</code></pre>

        <br/>
        <li>Delete an object:</li>
<pre><code class="language-python line-numbers">Post.objects.filter(id=1).delete()</code></pre>
    </ul>
    <br/><br/>


    <li>Checking Model Fields and Metadata</li>
    <br/>
    <ul>
        <li>Django shell can introspect models:</li>
<pre><code class="language-python line-numbers">Post._meta.get_fields()</code></pre>
        <li>List field names only:</li>
<pre><code class="language-python line-numbers">[f.name for f in Post._meta.fields]</code></pre>
    </ul>
    <br/><br/>


    <li>Importing and Using Django Settings</li>
<pre><code class="language-python line-numbers">from django.conf import settings
settings.DEBUG</code></pre>

    <ul>
        <li>You can inspect environment variables, database configs, etc.</li>
    </ul>
    <br/><br/>


    <li>Testing Functions and Business Logic</li>
    <br/>
    <ul>
        <li>The Django shell is perfect for quickly testing code:</li>
    </ul>
<pre><code class="language-python line-numbers">from accounts.utils import hash_password
hash_password("secret123")</code></pre>
    <ul>
        <li>You can import any module inside the project.</li>
    </ul>
    <br/><br/>


    <li>Working With Transactions</li>
    <br/>
    <ul>
        <li>You can manually control DB transactions:</li>
    </ul>
<pre><code class="language-python line-numbers">from django.db import transaction
with transaction.atomic():
    Post.objects.create(title="Atomic", content="Safe commit!")</code></pre>
    <br/><br/>


    <li>Using the Shell for Debugging</li>
    <br/>
    <ul>
        <li>Test a failing query:</li>
    </ul>
<pre><code class="language-python line-numbers">Post.objects.get(id=999)</code></pre>
    <ul>
        <li>Check error messages immediately.</li>
        <br/>
        <li>Test functions before putting them into views.</li>
    </ul>
    <br/><br/>


    <li>Loading Sample Data</li>
    <br/>
<pre><code class="language-python line-numbers">from django.contrib.auth.models import User
User.objects.create_user("junzhe", password="1234")</code></pre>

    <ul>
        <li>Very useful during development.</li>
    </ul>
    <br/><br/>


    <li>Exiting the Django Shell</li>
    <br/>
<pre><code class="language-bash line-numbers">exit()</code></pre>
    <ul>
        <li>or:</li>
    </ul>
<pre><code class="language-bash line-numbers">Ctrl + D</code></pre>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-admin-interface">Django Admin Interface</h3>
<ol>

    <li>What Is the Django Admin Interface?</li>
    <br/>
    <ul>
        <li>The Django admin is a built-in web-based interface for managing application data.</li>
        <br/>
        <li>It provides a full CRUD backend for registered models without writing custom views or templates.</li>
        <br/>
        <li>Features include:
            <ul>
                <li>model listing, filtering, and search</li>
                <li>inline editing</li>
                <li>relations navigation</li>
                <li>permissions and authentication integration</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Enabling the Admin Interface</li>
    <br/>
    <ul>
        <li>Ensure these apps are included in your <code>INSTALLED_APPS</code>:</li>
<pre><code class="language-python line-numbers">INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
]</code></pre>
        <br/>
        <li>Include admin routes in <code>urls.py</code>:</li>
<pre><code class="language-python line-numbers">from django.contrib import admin
from django.urls import path

urlpatterns = [
    path('admin/', admin.site.urls),
]</code></pre>
        <br/>
        <li>Run database migrations:</li>
<pre><code class="language-bash line-numbers">python3 manage.py migrate</code></pre>
    </ul>
    <br/><br/>


    <li>Creating an Admin User</li>
    <br/>
    <ul>
        <li>Create a superuser to access the admin panel:</li>
<pre><code class="language-bash line-numbers">python3 manage.py createsuperuser</code></pre>
        <li>You will be prompted to enter:
            <ul>
                <li>username</li>
                <li>email</li>
                <li>password</li>
            </ul>
        </li>
        <br/>
        <li>Login at <code>http://localhost:8000/admin/</code></li>
    </ul>
    <br/><br/>


    <li>Registering Models in the Admin</li>
    <br/>
    <ul>
        <li>To manage a model through the admin interface, register it in <code>admin.py</code>:</li>
<pre><code class="language-python line-numbers">from django.contrib import admin
from .models import Product

admin.site.register(Product)</code></pre>
        <li>Once registered, the model becomes accessible in the admin panel.</li>
    </ul>
    <br/><br/>


    <li>Customizing ModelAdmin</li>
    <br/>
    <ul>
        <li>Create a custom admin class to control how data is displayed:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    list_display  = ('name', 'price', 'created_at')
    search_fields = ('name',)
    list_filter   = ('category',)

admin.site.register(Product, ProductAdmin)</code></pre>
        <li>Common options:
            <ul>
                <li><code>list_display</code> are columns to show in list view</li>
                <li><code>search_fields</code> aere fields for full-text search</li>
                <li><code>list_filter</code> are sidebar filters</li>
                <li><code>readonly_fields</code> are display only, not editable</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Custom Forms in Admin</li>
    <br/>
    <ul>
        <li>You can override the form used in the admin:</li>
<pre><code class="language-python line-numbers">from django import forms

class ProductForm(forms.ModelForm):
    class Meta:
        model = Product
        fields = '__all__'

class ProductAdmin(admin.ModelAdmin):
    form = ProductForm</code></pre>
        <li>This enables custom validation, widgets, or logic in forms.</li>
    </ul>
    <br/><br/>


    <li>Using Fieldsets for Grouping Fields</li>
    <br/>
    <ul>
        <li>Group related fields visually in the admin form:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    fieldsets = (
        ('Basic Info', {
            'fields': ('name', 'price')
        }),
        ('Advanced Options', {
            'classes': ('collapse',),
            'fields': ('description', 'category'),
        }),
    )</code></pre>
        <li>Helpful for large models with many fields.</li>
    </ul>
    <br/><br/>


    <li>Admin Site Customization</li>
    <br/>
    <ul>
        <li>You can customize the site branding and headers:</li>
<pre><code class="language-python line-numbers">admin.site.site_header = "My Dashboard"
admin.site.site_title = "My Admin"
admin.site.index_title = "Welcome to the Admin Panel"</code></pre>
        <li>To style the admin, override templates and static files.</li>
    </ul>
    <br/><br/>


    <li>Permissions and Access Control</li>
    <br/>
    <ul>
        <li>The admin uses Django’s built-in permissions system.</li>
        <br/>
        <li>You can assign users:
            <ul>
                <li>add, change, delete, view model</li>
                <li>staff status to access admin</li>
                <li>groups for role-based access</li>
            </ul>
        </li>
        <br/>
        <li>Check and restrict access in admin classes:</li>
<pre><code class="language-python line-numbers">def has_change_permission(self, request, obj=None):
    return request.user.is_superuser</code></pre>
    </ul>
    <br/><br/>


    <li>Security Recommendations</li>
    <br/>
    <ul>
        <li>Always restrict admin access to trusted users.</li>
        <br/>
        <li>Use strong passwords and enable two-factor authentication.</li>
        <br/>
        <li>Consider changing the default admin URL to reduce bot scans:</li>
<pre><code class="language-python line-numbers">path('secret-admin/', admin.site.urls)</code></pre>
        <li>Use HTTPS and enable CSRF protection (enabled by default).</li>
    </ul>
    <br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-admin-create-user">Django Admin Create User</h3>
<ol>

    <li>Creating Users via Django Admin</li>
    <br/>
    <ul>
        <li>Django’s built-in <code>User</code> model can be managed directly via the admin interface.</li>
        <br/>
        <li>To access it, make sure:</li>
            <ol>
                <li><code>django.contrib.auth</code> is in <code>INSTALLED_APPS</code></li>
                <li>You’ve run <code>python3 manage.py migrate</code></li>
            </ol>
        <br/>
        <li>Login to <code>/admin</code> as a superuser, and go to:</li>
            <ol>
                <li><b>Users</b> under the “Authentication and Authorization” section</li>
                <li>Click <b>+ Add</b> to create a new user</li>
            </ol>
        <br/>
        <li>You'll first be prompted for:</li>
            <ul>
                <li>Username</li>
                <li>Password</li>
            </ul>
    </ul>
    <br/><br/>


    <li>Fields in the Admin Create User Form</li>
    <br/>
    <ul>
        <li>After the initial password setup, you can set additional fields:</li>
        <br/>
        <ul>
            <li><code>First name</code>, <code>Last name</code></li>
            <li><code>Email address</code></li>
            <li><code>Is staff</code>: can access the admin interface</li>
            <li><code>Is superuser</code>: full permissions</li>
            <li><code>Is active</code>: determines if the account is active</li>
            <li><code>Groups</code>: role-based permission bundles</li>
            <li><code>User permissions</code>: fine-grained permission settings</li>
            <li><code>Last login</code> and <code>Date joined</code></li>
        </ul>
        <br/>
        <li>Click <b>Save</b> to create the user.</li>
    </ul>
    <br/><br/>


    <li>Customizing the User Creation Form</li>
    <br/>
    <ul>
        <li>If you are using a custom user model, the default form may not be sufficient.</li>
        <br/>
        <li>Create a custom admin class in <code>admin.py</code>:</li>
<pre><code class="language-python line-numbers">from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth import get_user_model

class CustomUserAdmin(UserAdmin):
    model = get_user_model()
    list_display = ('username', 'email', 'is_staff')
    add_fieldsets = (
        (None, {
            'classes': ('wide',),
            'fields': ('username', 'email', 'password1', 'password2', 'is_staff')}
        ),
    )

admin.site.register(get_user_model(), CustomUserAdmin)
</code></pre>
        <li>Now the admin panel uses the custom logic and layout for creating users.</li>
    </ul>
    <br/><br/>


    <li>Creating Users Programmatically (Optional)</li>
    <br/>
    <ul>
        <li>Users can also be created via Django shell:</li>
<pre><code class="language-bash line-numbers">python3 manage.py shell</code></pre>
<pre><code class="language-python line-numbers">
from django.contrib.auth.models import User
user = User.objects.create_user('junzhe', password='secure123')
user.email = 'junzhe@example.com'
user.is_staff = True
user.save()
</code></pre>
        <br/>
        <li>For superusers:</li>
<pre><code class="language-python line-numbers">
User.objects.create_superuser('admin', 'admin@example.com', 'superpass')
</code></pre>
    </ul>
    <br/><br/>


    <li>Important Tips</li>
    <br/>
    <ul>
        <li>Always use <code>create_user()</code> or <code>create_superuser()</code> when creating users programmatically. They handle password hashing and validation.</li>
        <br/>
        <li>Don’t forget to assign <code>is_staff=True</code> for users that should access the admin panel.</li>
        <br/>
        <li>By default, <code>is_active=True</code> — set it to <code>False</code> to temporarily disable a user.</li>
        <br/>
        <li>Assigning users to <code>groups</code> and <code>permissions</code> helps enforce access control.</li>
    </ul>
    <br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-admin-include-models">Django Admin Include Models</h3>
<ol>

    <li>What Does "Including Models in Django Admin" Mean?</li>
    <br/>
    <ul>
        <li>By default, Django admin only shows models that you explicitly register.</li>
        <br/>
        <li>“Including a model” means registering it in the <code>admin.py</code> file of your app so it appears in the admin panel.</li>
        <br/>
        <li>Once registered, you can create, edit, filter, and delete records from the admin dashboard.</li>
    </ul>
    <br/><br/>


    <li>Basic Model Registration</li>
    <br/>
    <ul>
        <li>To make a model appear in the admin interface:</li>
<pre><code class="language-python line-numbers"># admin.py
from django.contrib import admin
from .models import Product

admin.site.register(Product)</code></pre>
        <li>Now <code>Product</code> will show up in the admin panel automatically.</li>
    </ul>
    <br/><br/>


    <li>Registering Multiple Models</li>
    <br/>
    <ul>
        <li>You can register multiple models in the same file:</li>
<pre><code class="language-python line-numbers">from django.contrib import admin
from .models import Product, Category, Order

admin.site.register(Product)
admin.site.register(Category)
admin.site.register(Order)</code></pre>
        <li>Alternatively, use a loop (not commonly used):</li>
<pre><code class="language-python line-numbers">models = [Product, Category, Order]
for model in models:
    admin.site.register(model)
</code></pre>
    </ul>
    <br/><br/>


    <li>Using ModelAdmin for Custom Admin Behavior</li>
    <br/>
    <ul>
        <li>You can pass a custom admin class with display/editing configuration:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    list_display = ('name', 'price', 'available')
    search_fields = ('name',)

admin.site.register(Product, ProductAdmin)
</code></pre>
        <li>This allows:</li>
        <ul>
            <li>Column selection</li>
            <li>Search indexing</li>
            <li>List filtering</li>
            <li>Custom forms or field layouts</li>
        </ul>
    </ul>
    <br/><br/>


    <li>Grouping Models Under an App Label</li>
    <br/>
    <ul>
        <li>Django automatically groups models by app in the admin sidebar.</li>
        <br/>
        <li>You can override the label with <code>verbose_name</code> in your <code>AppConfig</code>:</li>
<pre><code class="language-python line-numbers"># apps.py
class ShopConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'shop'
    verbose_name = 'My Shop Backend'</code></pre>
        <li>This changes the heading in the admin UI.</li>
    </ul>
    <br/><br/>


    <li>Customizing Display Names of Models</li>
    <br/>
    <ul>
        <li>Each model name shown in the admin is based on its class name.</li>
        <br/>
        <li>You can override it via the model's <code>Meta</code> class:</li>
<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=255)

    class Meta:
        verbose_name = "Product"
        verbose_name_plural = "Products"
</code></pre>
        <li>This is especially useful for:
            <ul>
                <li>Changing pluralization (e.g. “People” instead of “Persons”)</li>
                <li>Localization</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Unregistering a Model</li>
    <br/>
    <ul>
        <li>If you don’t want a model to appear in admin:</li>
<pre><code class="language-python line-numbers">admin.site.unregister(MyModel)</code></pre>
        <li>Useful when overriding or hiding default models such as <code>Group</code> or <code>User</code>.</li>
    </ul>
    <br/><br/>


    <li>Auto-Discovery of Admin Files</li>
    <br/>
    <ul>
        <li>Django auto-discovers and loads <code>admin.py</code> from each app listed in <code>INSTALLED_APPS</code>.</li>
        <br/>
        <li>This happens when you open the admin site or call <code>admin.autodiscover()</code> manually.</li>
        <br/>
        <li>No extra setup is needed for discovery if the file is named <code>admin.py</code>.</li>
    </ul>
    <br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-admin-display-fields">Django Admin Set Fields to Display</h3>
<ol>

    <li>What Does "Display Fields in Django Admin" Mean?</li>
    <br/>
    <ul>
        <li>In the Django admin interface, you can configure which model fields appear in:
            <ul>
                <li><b>List view</b> – the table of records</li>
                <li><b>Form view</b> – the create/edit form</li>
                <li><b>Read-only fields</b> – visible but not editable</li>
            </ul>
        </li>
        <br/>
        <li>This is done by customizing the <code>ModelAdmin</code> class for each model.</li>
    </ul>
    <br/><br/>


    <li>Setting Fields for List Display</li>
    <br/>
    <ul>
        <li>Use <code>list_display</code> to show specific fields in the object list table:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    list_display = ('name', 'price', 'available')
</code></pre>
        <br/>
        <li>This renders the selected fields as columns in the list view.</li>
        <br/>
        <li>You can also display methods or computed properties:</li>
<pre><code class="language-python line-numbers">class Product(models.Model):
    name = models.CharField(max_length=100)
    price = models.DecimalField(max_digits=6, decimal_places=2)

    def is_expensive(self):
        return self.price &gt; 100
    is_expensive.boolean = True

class ProductAdmin(admin.ModelAdmin):
    list_display = ('name', 'price', 'is_expensive')
</code></pre>
    </ul>
    <br/><br/>


    <li>Setting Fields in the Form View</li>
    <br/>
    <ul>
        <li>Use <code>fields</code> to control the order and visibility of fields in the form:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    fields = ('name', 'price', 'description')
</code></pre>
        <br/>
        <li>Only listed fields will be shown in the form.</li>
        <br/>
        <li>To group fields visually, use <code>fieldsets</code>:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    fieldsets = (
        ('Basic Info', {'fields': ('name', 'price')}),
        ('Details', {'fields': ('description',)}),
    )
</code></pre>
    </ul>
    <br/><br/>


    <li>Making Fields Read-Only</li>
    <br/>
    <ul>
        <li>Use <code>readonly_fields</code> to show fields as uneditable:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    readonly_fields = ('created_at',)
</code></pre>
        <li>This is often used for:
            <ul>
                <li>timestamps</li>
                <li>automatically generated values</li>
                <li>fields not meant to be changed via admin</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Controlling Which Fields Are Editable in List View</li>
    <br/>
    <ul>
        <li>Use <code>list_editable</code> to make columns editable directly in list view:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    list_display = ('name', 'price', 'available')
    list_editable = ('price', 'available')
</code></pre>
        <li>Note: All <code>list_editable</code> fields must also be in <code>list_display</code>, but not the first field (usually the link).</li>
    </ul>
    <br/><br/>


    <li>Using Exclude to Hide Fields</li>
    <br/>
    <ul>
        <li>Use <code>exclude</code> to prevent certain fields from appearing in the form:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    exclude = ('internal_note',)
</code></pre>
        <li>Use this if you want Django to generate the form but hide specific fields.</li>
    </ul>
    <br/><br/>


    <li>Dynamic Field Customization</li>
    <br/>
    <ul>
        <li>You can override <code>get_fields()</code> or <code>get_readonly_fields()</code> to make decisions based on user or object:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    def get_readonly_fields(self, request, obj=None):
        if not request.user.is_superuser:
            return ('price',)
        return ()
</code></pre>
        <li>This allows field display behavior to adapt dynamically.</li>
    </ul>
    <br/><br/>


    <li>Hiding the Primary Key Field</li>
    <br/>
    <ul>
        <li>The primary key (e.g. <code>id</code>) is not shown by default.</li>
        <br/>
        <li>To show it explicitly in list or form:</li>
<pre><code class="language-python line-numbers">list_display = ('id', 'name')
readonly_fields = ('id',)
</code></pre>
        <li>This can be useful for reference or debugging.</li>
    </ul>
    <br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="django-admin-update-objects">Django Admin Update Objects</h3>
<ol>

    <li>What Does "Updating Objects in Django Admin" Mean?</li>
    <br/>
    <ul>
        <li>The Django admin interface allows you to edit (update) existing database records directly through a web UI.</li>
        <br/>
        <li>This is done via the object’s <b>change form</b>, accessed by clicking any record in the admin list view.</li>
        <br/>
        <li>Updating objects in the admin is useful for:
            <ul>
                <li>editing model data</li>
                <li>managing content without writing SQL</li>
                <li>quick data inspection or correction</li>
            </ul>
        </li>
        <br/>
        <li>The behavior of this edit form is controlled by your <code>ModelAdmin</code> configuration.</li>
    </ul>
    <br/><br/>


    <li>Accessing the Update Form</li>
    <br/>
    <ul>
        <li>Navigate to:
            <ul>
                <li><b>/admin/</b></li>
                <li>Select your model (e.g., Products)</li>
                <li>Click an existing object in the list</li>
            </ul>
        </li>
        <br/>
        <li>This opens the edit form, pre-filled with the object’s current data.</li>
    </ul>
    <br/><br/>


    <li>Basic Object Updating</li>
    <br/>
    <ul>
        <li>The fields displayed in the update form are determined automatically unless overridden.</li>
        <br/>
        <li>After modifying the fields, click:
            <ul>
                <li><b>Save</b> — save and stay on the edit page</li>
                <li><b>Save and add another</b></li>
                <li><b>Save and continue editing</b></li>
                <li><b>Delete</b> — delete the object</li>
            </ul>
        </li>
        <br/>
        <li>All changes are saved to the database immediately after clicking Save.</li>
    </ul>
    <br/><br/>


    <li>Customizing Fields in the Update Form</li>
    <br/>
    <ul>
        <li>Use <code>fields</code> to control which fields appear and their order:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    fields = ('name', 'price', 'description', 'category')
</code></pre>
        <br/>
        <li>Or group them via <code>fieldsets</code>:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    fieldsets = (
        ('Basic Info', {'fields': ('name', 'price')}),
        ('Details', {'fields': ('description', 'category')}),
    )
</code></pre>
    </ul>
    <br/><br/>


    <li>Making Certain Fields Read-Only</li>
    <br/>
    <ul>
        <li>You can prevent specific fields from being edited:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    readonly_fields = ('created_at', 'updated_at')
</code></pre>
        <br/>
        <li>Read-only fields still appear in the form but cannot be changed.</li>
        <br/>
        <li>This is useful for:
            <ul>
                <li>timestamps</li>
                <li>IDs</li>
                <li>fields auto-generated by logic or signals</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Editing Related Objects (Inline Models)</li>
    <br/>
    <ul>
        <li>You can update related objects on the same page using inlines.</li>
        <br/>
        <li>Example: update product images directly when editing a product:</li>
<pre><code class="language-python line-numbers">class ProductImageInline(admin.TabularInline):
    model = ProductImage
    extra = 1

class ProductAdmin(admin.ModelAdmin):
    inlines = [ProductImageInline]
</code></pre>
        <br/>
        <li>Inline editing is powerful for one-to-many relationships.</li>
    </ul>
    <br/><br/>


    <li>Bulk Updating Multiple Objects</li>
    <br/>
    <ul>
        <li>The admin list page allows bulk updates via <b>actions</b>.</li>
        <br/>
        <li>Create a custom action to update many entries at once:</li>
<pre><code class="language-python line-numbers">def mark_available(modeladmin, request, queryset):
    queryset.update(available=True)

mark_available.short_description = "Mark selected items as available"

class ProductAdmin(admin.ModelAdmin):
    actions = [mark_available]
</code></pre>
        <br/>
        <li>Works on all selected rows in the list view.</li>
    </ul>
    <br/><br/>


    <li>Tracking Who Updated an Object</li>
    <br/>
    <ul>
        <li>You can override <code>save_model()</code> to track user updates:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    def save_model(self, request, obj, form, change):
        obj.updated_by = request.user
        super().save_model(request, obj, form, change)
</code></pre>
        <br/>
        <li>This is helpful for audit logs or accountability.</li>
    </ul>
    <br/><br/>


    <li>Preventing Users from Updating Objects</li>
    <br/>
    <ul>
        <li>Override permission methods in <code>ModelAdmin</code>:</li>
<pre><code class="language-python line-numbers">class ProductAdmin(admin.ModelAdmin):
    def has_change_permission(self, request, obj=None):
        return request.user.is_superuser
</code></pre>
        <br/>
        <li>Alternative: allow edits, but restrict specific users:</li>
<pre><code class="language-python line-numbers">def has_change_permission(self, request, obj=None):
    return request.user.groups.filter(name='Editors').exists()
</code></pre>
    </ul>
    <br/><br/>


    <li>Validating Object Updates</li>
    <br/>
    <ul>
        <li>Use a custom form to validate edits:</li>
<pre><code class="language-python line-numbers">from django import forms

class ProductForm(forms.ModelForm):
    def clean_price(self):
        price = self.cleaned_data['price']
        if price < 0:
            raise forms.ValidationError("Price cannot be negative")
        return price

class ProductAdmin(admin.ModelAdmin):
    form = ProductForm
</code></pre>
        <br/>
        <li>Admin forms fully support Django’s validation system.</li>
    </ul>
    <br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->

<!-- * * * * * * * * * * * * * * -->


<hr/>
<!-- * * * * * * * * * * * * * * -->

<footer>
    <p>&copy; 2025 Hwangfucius. All rights reserved.</p>
</footer>
</body>
<!-- * * * * * * * * * * * * * * -->
</html>
<!-- * * * * * * * * * * * * * * -->
