<!-- * * * * * * * * * * * * * * -->
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>nginx</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css">

    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"
            data-prismjs-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs/components/"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>

<style>
    html {
        scroll-behavior: smooth;
    }

    .back-to-top {
        position: fixed;
        right: 20px;
        bottom: 20px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #333;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        font-size: 22px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        opacity: 0.75;
        transition: opacity 0.2s ease, transform 0.2s ease;
        z-index: 999;
    }

    .back-to-top:hover {
        opacity: 1;
        transform: translateY(-2px);
    }

    .nav-icon {
        width: 38px;
        height: 38px;
        object-fit: contain;
        vertical-align: middle;
        margin-left: 0.3rem;
    }

    table {
        border-collapse: collapse;
        width: 100%;
        font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", serif;
        font-size: 14px;
    }

    th {
        background-color: #f5f5f5;
        text-align: left;
        font-weight: 600;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px 12px;
    }

    tr:nth-child(even) {
        background-color: #fafafa;
    }

    tr:hover {
        background-color: #f0f8ff;
    }

    .comment {
        color: grey;
    }

    .token.keyword {
        font-weight: 500;
    }

    .red-underline {
        text-decoration-line: underline;
        text-decoration-color: red;
        text-decoration-thickness: 2px;
        text-underline-offset: 2px;
    }

    body {
        font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", serif;
        font-variant-ligatures: none;
    }

    ul > li {
        list-style-type: disc;
    }

    code {
        color: #24292e;
        background-color: #f6f8fa;
        border: 1px solid #d0d7de;
        border-radius: .375rem;
        padding: .05rem .35rem;
        font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.775rem;
        line-height: 1.1;
    }


    pre {
        margin: 1rem 0;
        padding: .8rem 1rem;
        background-color: #f6f8fa;
        border: 1px solid #d0d7de;
        border-radius: .5rem;
        overflow: auto;
        tab-size: 4;
    }


    pre code {
        display: block;
        padding: 0;
        background: transparent;
        border: 0;
        color: #24292e;
        font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.875rem;
        line-height: 1.5;
        white-space: pre;
    }
</style>
</head>
<!-- * * * * * * * * * * * * * * -->
<body>
<a href="#" class="back-to-top" aria-label="Back to top">
    &#8593;
</a>
<!-- * * * * * * * * * * * * * * -->


<!-- * * * * * * * * * * * * * * -->
<hr/>
<nav id="toc" style="margin-bottom: 2rem;">
    <h2> <img src="resources/nginx.png" alt="Logo" class="nav-icon"/> Documentation Index</h2>
    <ol style="line-height: 1.8;">
        <li><a href="#nginx-beginners">Nginx for Beginners</a></li>
        <li><a href="#nginx-main-vs-server-config">Difference Between Nginx Main Config and Server Config</a></li>
        <li><a href="#nginx-smallest-app-workflow">Serving a Smallest App Using Nginx</a></li>
        <li><a href="#nginx-deploy-frontend-backend">Deploying a Frontend + Backend App Using Nginx</a></li>
    </ol>
</nav>
<hr/>
<!-- * * * * * * * * * * * * * * -->


<!-- * * * * * * * * * * * * * * -->
<h3 id="nginx-beginners">Nginx for Beginners</h3>
<ol>

    <li>What Is Nginx?</li>
    <br/>
    <ul>
        <li><b>Nginx</b> (pronounced “engine-x”) is a high-performance web server widely used for:</li>
        <ul>
            <li>serving static websites</li>
            <li>acting as a reverse proxy</li>
            <li>load balancing</li>
            <li>caching</li>
            <li>handling HTTPS/SSL</li>
        </ul>
        <br/>
        <li>Nginx is known for being:</li>
        <ul>
            <li>very fast</li>
            <li>lightweight</li>
            <li>scalable</li>
            <li>easy to configure</li>
        </ul>
        <br/>
        <li>It is used by companies like Netflix, Dropbox, GitHub, Airbnb, and many more.</li>
    </ul>
    <br/><br/>


    <li>How Nginx Works?</li>
    <br/>
    <ul>
        <li>Nginx uses an <code>event-driven</code> architecture instead of creating a new process for each request.</li>
        <br/>
        <li>This makes Nginx extremely efficient:</li>
        <ul>
            <li>handles thousands of connections with low memory usage</li>
            <li>ideal for high-traffic websites</li>
        </ul>
        <br/>
        <li>Common roles of Nginx:</li>
<table>
    <thead>
        <tr>
            <th>Nginx Role</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>Web Server</b></td>
            <td>Serves static files such as HTML, CSS, JavaScript, and images.</td>
        </tr>
        <tr>
            <td><b>Reverse Proxy</b></td>
            <td>Forwards incoming requests to backend applications (Flask, Django, Node.js, Spring, etc.).</td>
        </tr>
        <tr>
            <td><b>Load Balancer</b></td>
            <td>Distributes traffic across multiple backend servers to improve scalability and reliability.</td>
        </tr>
        <tr>
            <td><b>SSL Terminator</b></td>
            <td>Handles HTTPS/TLS encryption so backend apps can stay on plain HTTP.</td>
        </tr>
    </tbody>
</table>

    </ul>
    <br/><br/>


    <li>Basic Nginx Server Block (Virtual Host)</li>
    <br/>
    <ul>
        <li>Example: Serving a static website</li>
<pre><code class="language-nginx line-numbers">server {
    listen 80;
    server_name example.com;

    root /var/www/example;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}
</code></pre>
        <br/>
        <li>This configuration:</li>
        <ul>
            <li>Listens on port 80</li>
            <li>Serves <code>/var/www/example/index.html</code></li>
            <li>Returns 404 if file not found</li>
        </ul>
    </ul>
    <br/><br/>


    <li>Serving Static Files</li>
    <br/>
    <ul>
        <li>Static assets like images, CSS, JS can be served extremely fast by Nginx.</li>
        <br/>
        <li>Example:</li>
<pre><code class="language-nginx line-numbers">location /static/ {
    alias /var/www/example/static/;
}
</code></pre>
        <br/>
        <li><code>alias</code> is used instead of <code>root</code> when mapping a URL path to a different directory.</li>
    </ul>
    <br/><br/>


    <li>Nginx as a Reverse Proxy (for Flask, Django, Node.js, etc.)</li>
    <br/>
    <ul>
        <li>This is one of the most common use cases:</li>
<pre><code class="language-nginx line-numbers">server {
    listen 80;
    server_name example.com;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
</code></pre>
        <br/>
        <li>What this does:</li>
        <ul>
            <li>Receives HTTP requests</li>
            <li>Forwards them to your backend app (Gunicorn, uWSGI, Node.js)</li>
            <li>Passes user IP and host headers correctly</li>
        </ul>
    </ul>
    <br/><br/>


    <li>Enabling HTTPS with Nginx</li>
    <br/>
    <ul>
        <li>Install Certbot for Let's Encrypt:</li>
<pre><code class="language-bash line-numbers">sudo apt install certbot python3-certbot-nginx
</code></pre>
        <br/>
        <li>Enable HTTPS:</li>
<pre><code class="language-bash line-numbers">sudo certbot --nginx -d yourdomain.com</code></pre>
        <br/>
        <li>Certbot:</li>
        <ul>
            <li>configures SSL automatically</li>
            <li>sets up renewal systemd timers</li>
            <li>redirects all traffic to HTTPS</li>
        </ul>
    </ul>
    <br/><br/>


    <li>Common Nginx Commands</li>
    <br/>
    <ul>
<pre><code class="language-bash line-numbers">sudo systemctl start nginx
sudo systemctl stop nginx
sudo systemctl restart nginx
sudo systemctl reload nginx
sudo systemctl status nginx
</code></pre>
        <br/>
        <li>Check configuration syntax:</li>
<pre><code class="language-bash line-numbers">sudo nginx -t</code></pre>
    </ul>
    <br/><br/>


    <li>Nginx Logging</li>
    <br/>
    <ul>
        <li>Default logging locations:</li>
<pre><code class="language-plaintext line-numbers">/var/log/nginx/access.log
/var/log/nginx/error.log
</code></pre>
        <br/>
        <li>Useful for debugging “404 Not Found”, “502 Bad Gateway”, and server errors.</li>
    </ul>
    <br/><br/>


    <li>Nginx Security Basics</li>
    <br/>
    <ul>
        <li>Disable server tokens:</li>
<pre><code class="language-nginx line-numbers">server_tokens off;
</code></pre>
        <br/>
        <li>Rate limiting (simple example):</li>
<pre><code class="language-nginx line-numbers">limit_req_zone $binary_remote_addr zone=mylimit:10m rate=10r/s;</code></pre>
        <br/>
        <li>Hide directory listing:</li>
<pre><code class="language-nginx line-numbers">autoindex off;</code></pre>
        <br/>
        <li>Always use HTTPS in production.</li>
    </ul>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="nginx-main-vs-server-config">Difference Between Nginx Main Config and Server Config</h3>
<ol>

    <li>Overview</li>
    <br/>
    <ul>
        <li>Nginx configuration is split into multiple layers, each defining different types of behavior.</li>
        <br/>
        <li>Two of the most important configuration scopes are:</li>
        <ul>
            <li><code>Main Configuration</code> which is global, affects the entire Nginx service</li>
            <li><code>Server Configuration</code> which applies to a specific domain or virtual host</li>
        </ul>
    </ul>
    <br/><br/>


    <li>What Is the Main Configuration?</li>
    <br/>
    <ul>
        <li>Main configuration lives in:</li>
<pre><code class="language-plaintext line-numbers">/etc/nginx/nginx.conf</code></pre>
        <br/>
        <li>Main config settings affect the entire Nginx system regardless of the domain or app being served.</li>
        <br/>
        <li>Common directives found in the main config:</li>
<table>
    <thead>
        <tr>
            <th>Directive</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>user</code></td>
            <td>Specifies the system user under which Nginx worker processes run.</td>
        </tr>
        <tr>
            <td><code>worker_processes</code></td>
            <td>Defines the number of worker processes handling client requests.</td>
        </tr>
        <tr>
            <td><code>events { ... }</code></td>
            <td>Configures event-driven connection handling (e.g., max connections).</td>
        </tr>
        <tr>
            <td><code>http { ... }</code></td>
            <td>Contains global HTTP settings and includes server blocks.</td>
        </tr>
    </tbody>
</table>

        <br/>
        <li>Example:</li>
<pre><code class="language-nginx line-numbers">user nginx;
worker_processes auto;

events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    sendfile on;
}
</code></pre>
        <br/>
        <li>In short: <code>Main Configuration</code> represents the global foundational settings.</li>
    </ul>
    <br/><br/>


    <li>What Is the Server Configuration?</li>
    <br/>
    <ul>
        <li>Server configurations live in:</li>
<pre><code class="language-plaintext line-numbers">/etc/nginx/sites-available/
/etc/nginx/sites-enabled/
</code></pre>
        <br/>
        <li>Each <code>server { ... }</code> block defines settings for a specific domain, application, or service.</li>
        <br/>
        <li>Server configs control:</li>
        <ul>
            <li>domain names</li>
            <li>SSL certificates</li>
            <li>proxy settings</li>
            <li>routing &amp; locations</li>
            <li>static file paths</li>
        </ul>
        <br/>
        <li>Example:</li>
<pre><code class="language-nginx line-numbers">server {
    listen 80;
    server_name example.com;

    root /var/www/example;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}
</code></pre>
        <br/>
        <li>In short: <code>Server Configuration</code> represents per-website or per-application settings.</li>
    </ul>
    <br/><br/>


    <li>Relationship Between Main Config and Server Config</li>
    <br/>
    <ul>
        <li>The main config provides global HTTP defaults:</li>
<pre><code class="language-nginx line-numbers">http {
    sendfile on;
    keepalive_timeout 65;

    include /etc/nginx/sites-enabled/*;
}
</code></pre>
        <br/>
        <li><code>sites-enabled</code> is included inside <code>http { }</code>, meaning all server blocks inherit the global settings.</li>
        <br/>
        <li>Server blocks override or extend what is defined in the main config.</li>
    </ul>
    <br/><br/>


    <li>Key Differences at a Glance</li>
    <br/>
    <table>
        <thead>
            <tr>
                <th>Main Config</th>
                <th>Server Config</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Global Nginx settings</td>
                <td>Settings for a single website or application</td>
            </tr>
            <tr>
                <td>Located in <code>/etc/nginx/nginx.conf</code></td>
                <td>Located in <code>sites-available/</code> and <code>sites-enabled/</code></td>
            </tr>
            <tr>
                <td>Defines worker processes, events, global http behavior</td>
                <td>Defines domains, paths, proxies, SSL, routing</td>
            </tr>
            <tr>
                <td>Affects entire Nginx instance</td>
                <td>Affects only that specific server block</td>
            </tr>
            <tr>
                <td>Rarely changed once set</td>
                <td>Frequently edited when adding domains or apps</td>
            </tr>
        </tbody>
    </table>
    <br/><br/>


    <li>When to Use Main Config</li>
    <br/>
    <ul>
        <li>You modify <b>main config</b> when you need to change:</li>
        <ul>
            <li>global Nginx behavior</li>
            <li>performance tuning</li>
            <li>connection limits</li>
            <li>MIME types</li>
            <li>compression rules</li>
            <li>log formatting rules</li>
        </ul>
        <br/>
        <li>Example use case:</li>
        <ul>
            <li>Enable Gzip for all domains</li>
            <li>Change worker process settings</li>
            <li>Configure caching engine globally</li>
        </ul>
    </ul>
    <br/><br/>


    <li>When to Use Server Config</li>
    <br/>
    <ul>
        <li>You modify <b>server config</b> for:</li>
        <ul>
            <li>setting up a new website</li>
            <li>reverse proxy for an app</li>
            <li>SSL configuration for a domain</li>
            <li>custom routing (API endpoints, static content)</li>
        </ul>
        <br/>
        <li>Example use cases:</li>
        <ul>
            <li>Host <code>example.com</code> and <code>blog.example.com</code> separately</li>
            <li>Connect Nginx to Flask/Django via <code>proxy_pass</code></li>
            <li>Specify a root directory for only one project</li>
        </ul>
    </ul>
    <br/><br/>


    <li>Example Comparison</li>
    <br/>
    <ul>
        <li><b>Main config (global)</b>:</li>
<pre><code class="language-nginx line-numbers">http {
    sendfile on;
    client_max_body_size 10M;
}
</code></pre>
        <br/>
        <li><b>Server config (specific domain)</b>:</li>
<pre><code class="language-nginx line-numbers">server {
    client_max_body_size 50M;   # overrides global limit
}
</code></pre>
        <br/>
        <li>Server block overrides main config <b>only for that domain</b>.</li>
    </ul>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="nginx-smallest-app-workflow">Serving a Smallest App Using Nginx — Workflow</h3>
<ol>

    <li>Overview</li>
    <br/>
    <ul>
        <li>This chapter explains the <b>minimal, beginner-friendly workflow</b> to serve a simple website using Nginx.</li>
        <br/>
        <li>The “smallest app” means:</li>
        <ul>
            <li>a single <code>index.html</code> file</li>
            <li>served from Nginx</li>
            <li>using the simplest valid server block</li>
        </ul>
        <br/>
        <li>This is the foundation for hosting more advanced applications later.</li>
    </ul>
    <br/><br/>


    <li>Step 1 — Install Nginx</li>
    <br/>
    <ul>
        <li>On Ubuntu/Debian:</li>
<pre><code class="language-bash line-numbers">sudo apt update
sudo apt install nginx
</code></pre>
        <li>Check status:</li>
<pre><code class="language-bash line-numbers">systemctl status nginx</code></pre>
        <li>Open in browser:</li>
<pre><code class="language-plaintext line-numbers">http://localhost
</code></pre>
        <li>You should see an Nginx welcome page.</li>
    </ul>
    <br/><br/>


    <li>Step 2 — Create the Smallest Possible Web App</li>
    <br/>
    <ul>
        <li>Create a directory for your website:</li>
<pre><code class="language-bash line-numbers">sudo mkdir -p /var/www/smallapp</code></pre>
        <br/>
        <li>Create a minimal HTML file:</li>
<pre><code class="language-html line-numbers">&lt;!-- /var/www/smallapp/index.html --&gt;
&lt;h1&gt;Hello from Nginx!&lt;/h1&gt;
</code></pre>
        <br/>
        <li>Set correct permissions:</li>
<pre><code class="language-bash line-numbers">sudo chown -R $USER:$USER /var/www/smallapp</code></pre>
    </ul>
    <br/><br/>


    <li>Step 3 — Create a Simple Nginx Server Block</li>
    <br/>
    <ul>
        <li>Create a config file for your app:</li>
<pre><code class="language-bash line-numbers">sudo vim /etc/nginx/sites-available/smallapp</code></pre>
        <br/>
        <li>Insert this minimal configuration:</li>
<pre><code class="language-nginx line-numbers">server {
    listen 80;
    server_name _;   # matches any hostname

    root /var/www/smallapp;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}
</code></pre>
        <br/>
        <li>Activate the server block:</li>
<pre><code class="language-bash line-numbers">sudo ln -s /etc/nginx/sites-available/smallapp /etc/nginx/sites-enabled/</code></pre>
        <br/>
        <li>Test your configuration:</li>
<pre><code class="language-bash line-numbers">sudo nginx -t</code></pre>
        <br/>
        <li>Reload Nginx:</li>
<pre><code class="language-bash line-numbers">sudo systemctl reload nginx</code></pre>
    </ul>
    <br/><br/>


    <li>Step 4 — Access the Application</li>
    <br/>
    <ul>
        <li>Now open your browser:</li>
<pre><code class="language-plaintext line-numbers">http://localhost</code></pre>
        <br/>
        <li>You should see:</li>
<pre><code class="language-plaintext line-numbers">Hello from Nginx!</code></pre>
        <br/>
        <li>Congratulations — you served the smallest possible app using Nginx!</li>
    </ul>
    <br/><br/>


    <li>Step 5 — Optional: Use a Custom Domain (Local Testing)</li>
    <br/>
    <ul>
        <li>Edit your <code>/etc/hosts</code> file:</li>
<pre><code class="language-plaintext line-numbers">127.0.0.1   myapp.local</code></pre>
        <br/>
        <li>Update the server block:</li>
<pre><code class="language-nginx line-numbers">server_name myapp.local;</code></pre>
        <br/>
        <li>Reload Nginx again:</li>
<pre><code class="language-bash line-numbers">sudo systemctl reload nginx</code></pre>
        <br/>
        <li>Visit:</li>
<pre><code class="language-plaintext line-numbers">http://myapp.local</code></pre>
    </ul>
    <br/><br/>


    <li>Step 6 — Understand the Minimal Workflow</li>
    <br/>
    <ul>
        <li>The minimal workflow for serving any app with Nginx is:</li>
        <ol>
            <br/>
            <li>Install Nginx</li>
            <br/>
            <li>Create your web application directory</li>
            <br/>
            <li>Write your app files (HTML, static files, or reverse proxy endpoint)</li>
            <br/>
            <li>Create a server block in <code>sites-available/</code></li>
            <br/>
            <li>Link it into sites-enabled</li>
            <br/>
            <li>Test configuration with <code>nginx -t</code></li>
            <br/>
            <li>Reload Nginx</li>
            <br/>
            <li>Access the site in the browser</li>
        </ol>
        <br/>
        <li>This same workflow applies to:</li>
        <ul>
            <br/>
            <li>serving SPA (Vue/React/Angular)</li>
            <br/>
            <li>hosting Python backends (Flask/Django)</li>
            <br/>
            <li>hosting Node.js backends</li>
            <br/>
            <li>hosting static assets or APIs</li>
        </ul>
    </ul>
    <br/><br/>


    <li>Step 7 — Optional Extensions</li>
    <br/>
    <ul>
        <li>After serving the smallest app, you can extend the server:</li>
        <ul>
            <br/>
            <li>Add SSL (Let's Encrypt)</li>
            <br/>
            <li>Add reverse proxy (proxy_pass)</li>
            <br/>
            <li>Enable compression (gzip)</li>
            <br/>
            <li>Enable caching</li>
            <br/>
            <li>Add file upload size limits</li>
            <br/>
            <li>Add logging &amp; monitoring</li>
        </ul>
        <br/>
        <li>But everything starts with mastering the smallest workflow.</li>
    </ul>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="nginx-deploy-frontend-backend">Deploying a Frontend + Backend App Using Nginx</h3>
<ol>

    <li>Overview</li>
    <br/>
    <ul>
        <li>We will build a simple 2-part application:</li>
        <ul>
            <li><b>Frontend</b>: a static site (HTML/CSS/JS) served by Nginx</li>
            <li><b>Backend</b>: a small API server (Node.js example is used here)</li>
        </ul>
        <br/>
        <li>Nginx will act as:</li>
        <ul>
            <li>a <b>static file server</b> for frontend assets</li>
            <li>a <b>reverse proxy</b> that forwards <code>/api</code> requests to the backend server</li>
        </ul>
        <br/>
        <li>This is the <b>standard real-world deployment pattern</b> for many modern web applications.</li>
    </ul>
    <br/><br/>


    <li>Project Structure Example</li>
    <br/>
    <ul>
        <li>We use this simple folder structure:</li>
<pre><code class="language-plaintext line-numbers">myapp/
├── frontend/
│   ├── index.html
│   ├── styles.css
│   └── app.js
├── backend/
│   └── server.js
└── nginx/
    └── app.conf
</code></pre>
        <br/>
        <li>You can freely rename these folders.</li>
        <br/>
        <li>Nginx will serve <code>frontend/</code> and proxy <code>/api</code> to <code>backend/</code>.</li>
    </ul>
    <br/><br/>


    <li>Step 1: Create a Simple Frontend</li>
    <br/>
    <ul>
        <li>An extremely small frontend (<code>frontend/index.html</code>):</li>
<pre><code class="language-html line-numbers">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;MyApp Frontend&lt;/title&gt;
    &lt;link rel="stylesheet" href="styles.css"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello from Frontend&lt;/h1&gt;
    &lt;button id="btn"&gt;Call API&lt;/button&gt;
    &lt;pre id="result"&gt;&lt;/pre&gt;

    &lt;script src="app.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
        <br/>
        <li><code>frontend/app.js</code>:</li>
<pre><code class="language-javascript line-numbers">document.getElementById('btn').onclick = async () =&gt; {
    const res = await fetch('/api/hello');
    const text = await res.text();
    document.getElementById('result').innerText = text;
};
</code></pre>
    </ul>
    <br/><br/>


    <li>Step 2: Create a Simple Backend API</li>
    <br/>
    <ul>
        <li><code>backend/server.js</code> using Node.js:</li>
<pre><code class="language-javascript line-numbers">const express = require('express');
const app = express();
const PORT = 5000;

app.get('/hello', (req, res) =&gt; {
    res.send("Hello from Backend API!");
});

app.listen(PORT, () =&gt; {
    console.log("Backend running on port", PORT);
});
</code></pre>
        <br/>
        <li>The backend listens on <code>http://localhost:5000</code>.</li>
        <br/>
        <li>Nginx will forward <code>/api/*</code> to this backend.</li>
    </ul>
    <br/><br/>


    <li>Step 3: Write the Nginx Configuration File</li>
    <br/>
    <ul>
        <li>Place a file <code>nginx/app.conf</code>:</li>

<pre><code class="language-nginx line-numbers">server {
    listen 80;
    server_name localhost;

    # -------------------------------
    # 1. Serve the frontend files
    # -------------------------------
    root /usr/share/nginx/html;
    index index.html;

    # Allow direct file delivery for static assets
    location / {
        try_files $uri $uri/ =404;
    }

    # -------------------------------
    # 2. Reverse proxy for backend
    # -------------------------------
    location /api/ {
        proxy_pass http://backend:5000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
</code></pre>

        <li>What this config does:
            <ul>
                <li><code>root /usr/share/nginx/html</code> → directory where frontend files live (in container)</li>
                <li><code>location /</code> → serve static frontend files</li>
                <li><code>location /api/</code> → all requests to <code>/api/*</code> get forwarded to the backend server</li>
                <li><code>proxy_pass http://backend:5000</code> → backend container hostname = <code>backend</code></li>
            </ul>
        </li>
        <br/>
        <li>Note:
            <ul>
                <li>The name <code>backend</code> comes from Docker Compose network resolution.</li>
                <li>In production Nginx normally runs inside a container, so you copy frontend files into <code>/usr/share/nginx/html</code>.</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Step 4: Build the Dockerfile for the Frontend + Nginx</li>
    <br/>
    <ul>
        <li>Create <code>frontend/Dockerfile</code>:</li>
<pre><code class="language-dockerfile line-numbers">FROM nginx:latest

# remove default nginx welcome page
RUN rm -rf /usr/share/nginx/html/*

# copy frontend
COPY . /usr/share/nginx/html/

# copy custom nginx config
COPY ../nginx/app.conf /etc/nginx/conf.d/default.conf
</code></pre>

        <li>Explanation of arguments:</li>
        <ul>
            <li><code>FROM nginx:latest</code> → base image with nginx installed</li>
            <li><code>rm -rf</code> → remove default site</li>
            <li><code>COPY . /usr/share/nginx/html/</code> → copy frontend files into nginx web root</li>
            <li><code>COPY app.conf</code> → override default server config</li>
        </ul>
    </ul>
    <br/><br/>


    <li>Step 5: Write a Dockerfile for the Backend</li>
    <br/>
    <ul>
        <li>Create <code>backend/Dockerfile</code>:</li>
<pre><code class="language-dockerfile line-numbers">FROM node:18

WORKDIR /app

COPY . .

RUN npm install

CMD ["node", "server.js"]
</code></pre>
        <li>Explanation:</li>
        <ul>
            <li><code>FROM node:18</code> → Node.js backend</li>
            <li><code>WORKDIR /app</code> → directory inside container</li>
            <li><code>COPY . .</code> → copy backend code</li>
            <li><code>npm install</code> → install dependencies</li>
            <li><code>CMD ["node","server.js"]</code> → start backend</li>
        </ul>
    </ul>
    <br/><br/>


    <li>Step 6: Use Docker Compose to Link Everything</li>
    <br/>
    <ul>
        <li>Create <code>docker-compose.yml</code> at root:</li>

<pre><code class="language-yaml line-numbers">version: "3.9"

services:

  backend:
    build: ./backend
    container_name: backend
    expose:
      - "5000"

  frontend:
    build: ./frontend
    container_name: frontend
    ports:
      - "8080:80"
    depends_on:
      - backend
</code></pre>

        <li>Explanation:</li>
        <ul>
            <li><code>backend</code> → backend API, accessible inside network at <code>http://backend:5000</code></li>
            <li><code>expose</code> → only expose internally (not to host)</li>
            <li><code>frontend</code> runs nginx → port mapping:
                <ul>
                    <li><code>8080:80</code> → host port 8080 → container port 80</li>
                </ul>
            </li>
            <li><code>depends_on</code> → start backend before frontend</li>
        </ul>
        <br/>
        <li>After building and running, Nginx will:
            <ul>
                <li>serve <code>/</code> from frontend</li>
                <li>proxy <code>/api/*</code> to backend</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li>Step 7: Run Everything</li>
    <br/>
    <ul>
<pre><code class="language-bash line-numbers">docker compose up --build</code></pre>
        <br/>
        <li>Visit frontend:</li>
<pre><code class="language-plaintext line-numbers">http://localhost:8080</code></pre>
        <br/>
        <li>Click the button and you should see:
<pre><code class="language-plaintext line-numbers">Hello from Backend API!
</code></pre>
        </li>
    </ul>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->

<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->

<!-- * * * * * * * * * * * * * * -->


<hr/>
<!-- * * * * * * * * * * * * * * -->

<footer>
    <p>&copy; 2025 Hwangfucius. All rights reserved.</p>
</footer>
</body>
<!-- * * * * * * * * * * * * * * -->
</html>
<!-- * * * * * * * * * * * * * * -->
